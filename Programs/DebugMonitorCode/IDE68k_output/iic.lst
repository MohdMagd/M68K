680x0 MACRO ASSEMBLER   Version 5.00   (c) 1992-2005 Peter J. Fondse

Date: 25 Mar 2019      Time: 17:16:31          Source: C:\M68K\PROGRAMS\DEBUGMONITORCODE\IDE68K_OUTPUT\IIC.SRC

                       1          section   code
                       2   **********************************************************************************************************
                       3   * CSTART.ASM  -  C startup-code
                       4   *
                       5   *          Initialises the system prior to running the users main() program
                       6   *
                       7   *          1) Sets up the user program stack pointer
                       8   *          2) Switches to User mode in the 68000
                       9   *          3) Enables All Interrupts 1-7 on 68000
                      10   *          4) Copies all initialised C program variables from Rom to Ram prior to running main()
                      11   *
                      12   **********************************************************************************************************
00000000              13                   align
                      14   
                      15   
                      16   **********************************************************************************************************
                      17   * The Following ORG Statement marks the address of the start of the this CStart Program
                      18   *
                      19   * The debug Monitor and Flash Load and Program routines assume your program lives here
                      20   **********************************************************************************************************
08000000              21                   org       $08000000
08000000  46FC 2000   22   start:          move.w    #$2000,SR             clear interrupts to enable all, move to supervisor mode
                      23   
                      24   ******************************************************************************************
                      25   * Set unitialised global variables to 0 at startup
                      26   ******************************************************************************************
08000004  207C 0800   27   mainloop        movea.l   #BssStart,a0          point a0 to the start of the initialised data section held in ROM
08000008  2004      
0800000A  203C 0000   28                   move.l    #BssLength,d0         figure out how many bytes of C program variables data to copy
0800000E  0050      
08000010  6700 0024   29                   beq       go_main               if no data to copy go straight to program
08000014  10FC 0000   30   Zeroinit        move.b    #0,(a0)+              copy the C program initialise variables from rom to ram
08000018  5380        31                   subq.l    #1,d0
0800001A  66F8        32                   bne       Zeroinit
                      33   
                      34   *******************************************************************************************
                      35   * last minute initialisation before calling main
                      36   *******************************************************************************************
                      37   
0800001C  23FC FFFF   38                   move.l    #-1,__ungetbuf         required for use of scanf() etc in C programs
08000020  FFFF 0800 
08000024  1FF4      
08000026  42B9 0800   39                   clr.l     __allocp               used by malloc() in C
0800002A  1FF8      
0800002C  23FC 0800   40                   move.l    #heap,__heap           pointer to free memory
08000030  2054 0800 
08000034  1FFC      
08000036  4EB9 0800   41   go_main         jsr       _main
0800003A  07E2      
0800003C  60C2        42                   bra       start
                      43   
                      44   ; C:\M68K\PROGRAMS\DEBUGMONITORCODE\IIC EEPROM PROGRAM FILES\M68KUSERPROGRAM (DE1).C - Compiled by CC68K  Version 5.00 (c) 1991-2005  Peter J. Fondse
                      45   ; #include <stdio.h>
                      46   ; #include <time.h>
                      47   ; /*********************************************************************************************
                      48   ; **  RS232 port addresses
                      49   ; *********************************************************************************************/
                      50   ; #define RS232_Control     *(volatile unsigned char *)(0x00400040)
                      51   ; #define RS232_Status      *(volatile unsigned char *)(0x00400040)
                      52   ; #define RS232_TxData      *(volatile unsigned char *)(0x00400042)
                      53   ; #define RS232_RxData      *(volatile unsigned char *)(0x00400042)
                      54   ; #define RS232_Baud        *(volatile unsigned char *)(0x00400044)
                      55   ; /*********************************************************************************************
                      56   ; **  IIC registers
                      57   ; *********************************************************************************************/
                      58   ; #define PRERlo  (*(volatile unsigned char *)(0x00408000)) // Clock Prescale register lo-byte
                      59   ; #define PRERhi  (*(volatile unsigned char *)(0x00408002)) // Clock Prescale register hi-byte
                      60   ; #define CTR     (*(volatile unsigned char *)(0x00408004)) // Control Register
                      61   ; #define TXR     (*(volatile unsigned char *)(0x00408006)) // Transmit Register
                      62   ; #define RXR     (*(volatile unsigned char *)(0x00408006)) // Receive Register
                      63   ; #define CR      (*(volatile unsigned char *)(0x00408008)) // Command Register
                      64   ; #define SR      (*(volatile unsigned char *)(0x00408008)) // Status Register
                      65   ; // Sequence Start & Stop Register Commands
                      66   ; #define start           0x80    // Set STA bit              --> (1000 0000)
                      67   ; #define stop            0x40    // Set STO bit              --> (0100 0000)
                      68   ; // Write Command Register Commands
                      69   ; #define startWrite      0x90    // set STA, WR bit          --> (1001 0000)
                      70   ; #define Write           0x10    // set WR bit               --> (0001 0000)
                      71   ; #define ReadIACK        0x21    // Set RD, IACK bits        --> (0010 0001)
                      72   ; #define ReadNACKIACK    0x29    // Set RD, ACK, IACK bits   --> (0010 1001)
                      73   ; #define stopWrite       0x50    // set STO, WR bit          --> (0101 0000)
                      74   ; // Read Command Register Commands
                      75   ; #define startRead       0xA8    // set STA, RD, ACK bit     --> (1010 1000)
                      76   ; #define stopRead        0x41    // set STO, IACK bit        --> (0100 0001)
                      77   ; /*********************************************************************************************
                      78   ; **  Function protoTypes
                      79   ; *********************************************************************************************/
                      80   ; void SequentialBlockWrite(int address, int sizeOfBlock, char payloadByte);
                      81   ; void WritePageToChip(void);
                      82   ; void WriteByteToChip(char c);
                      83   ; void initiateWriteSequence(int address);
                      84   ; void WaitForWriteCycle(void);
                      85   ; void SequentialBlockRead(int address, int sizeOfBlock, char expectedByte);
                      86   ; void ReadPageFromChip(void);
                      87   ; char ReadByteFromChip(void);
                      88   ; void initiateReadSequence(int address);
                      89   ; void BlockDecode(char * writeControlByte, char * readControlByte, int address);
                      90   ; void WaitForTXByte(void);
                      91   ; void WaitForReceivedByte(void);
                      92   ; int CheckForACK(void);
                      93   ; void IIC_Init(void);
                      94   ; int _getch( void )
                      95   ; {
                      96   __getch:
0800003E  4E56 FFFC   97          link      A6,#-4
                      98   ; char c ;
                      99   ; while((RS232_Status & (char)(0x01)) != (char)(0x01))    // wait for Rx bit in 6850 serial comms chip status register to be '1'
                     100   _getch_1:
08000042  1039 0040  101          move.b    4194368,D0
08000046  0040      
08000048  C03C 0001  102          and.b     #1,D0
0800004C  0C00 0001  103          cmp.b     #1,D0
08000050  6702       104          beq.s     _getch_3
08000052  60EE       105          bra       _getch_1
                     106   _getch_3:
                     107   ; ;
                     108   ; return (RS232_RxData & (char)(0x7f));                   // read received character, mask off top bit and return as 7 bit ASCII character
08000054  1039 0040  109          move.b    4194370,D0
08000058  0042      
0800005A  C0BC 0000  110          and.l     #255,D0
0800005E  00FF      
08000060  C0BC 0000  111          and.l     #127,D0
08000064  007F      
08000066  4E5E       112          unlk      A6
08000068  4E75       113          rts
                     114   ; }
                     115   ; int _putch( int c)
                     116   ; {
                     117   __putch:
0800006A  4E56 0000  118          link      A6,#0
                     119   ; while((RS232_Status & (char)(0x02)) != (char)(0x02))    // wait for Tx bit in status register or 6850 serial comms chip to be '1'
                     120   _putch_1:
0800006E  1039 0040  121          move.b    4194368,D0
08000072  0040      
08000074  C03C 0002  122          and.b     #2,D0
08000078  0C00 0002  123          cmp.b     #2,D0
0800007C  6702       124          beq.s     _putch_3
0800007E  60EE       125          bra       _putch_1
                     126   _putch_3:
                     127   ; ;
                     128   ; RS232_TxData = (c & (char)(0x7f));                      // write to the data register to output the character (mask off bit 8 to keep it 7 bit ASCII)
08000080  202E 0008  129          move.l    8(A6),D0
08000084  C0BC 0000  130          and.l     #127,D0
08000088  007F      
0800008A  13C0 0040  131          move.b    D0,4194370
0800008E  0042      
                     132   ; return c ;                                              // putchar() expects the character to be returned
08000090  202E 0008  133          move.l    8(A6),D0
08000094  4E5E       134          unlk      A6
08000096  4E75       135          rts
                     136   ; }
                     137   ; /*********************************************************************************************
                     138   ; **  Write Sequential Block to EEPROM Chip
                     139   ; *********************************************************************************************/
                     140   ; void SequentialBlockWrite(int address, int sizeOfBlock, char payloadByte){
                     141   _SequentialBlockWrite:
08000098  4E56 0000  142          link      A6,#0
0800009C  48E7 3820  143          movem.l   D2/D3/D4/A2,-(A7)
080000A0  242E 0008  144          move.l    8(A6),D2
080000A4  45F9 0800  145          lea       _printf.L,A2
080000A8  1258      
                     146   ; int i = 0;
080000AA  4283       147          clr.l     D3
                     148   ; int endAddress = address + sizeOfBlock;
080000AC  2002       149          move.l    D2,D0
080000AE  D0AE 000C  150          add.l     12(A6),D0
080000B2  2800       151          move.l    D0,D4
                     152   ; // Parameter checks
                     153   ; if (endAddress > 0x1FFFF){
080000B4  0C84 0001  154          cmp.l     #131071,D4
080000B8  FFFF      
080000BA  6F0E       155          ble.s     SequentialBlockWrite_1
                     156   ; printf("Not Enough Memory locations!\r\n");
080000BC  4879 0800  157          pea       @m68kus~1_1.L
080000C0  1CD4      
080000C2  4E92       158          jsr       (A2)
080000C4  584F       159          addq.w    #4,A7
                     160   ; return;
080000C6  6000 007A  161          bra       SequentialBlockWrite_6
                     162   SequentialBlockWrite_1:
                     163   ; }
                     164   ; printf("Writing Sequential Block of Data to EEPROM\r\n");
080000CA  4879 0800  165          pea       @m68kus~1_2.L
080000CE  1CF4      
080000D0  4E92       166          jsr       (A2)
080000D2  584F       167          addq.w    #4,A7
                     168   ; while (address <= endAddress){
                     169   SequentialBlockWrite_4:
080000D4  B484       170          cmp.l     D4,D2
080000D6  6E00 006A  171          bgt       SequentialBlockWrite_6
                     172   ; initiateWriteSequence(address);
080000DA  2F02       173          move.l    D2,-(A7)
080000DC  4EB9 0800  174          jsr       _initiateWriteSequence
080000E0  0276      
080000E2  584F       175          addq.w    #4,A7
                     176   ; // Fill up a 128 byte block
                     177   ; for(i= address%128; i<128; i++){
080000E4  2F02       178          move.l    D2,-(A7)
080000E6  4878 0080  179          pea       128
080000EA  4EB9 0800  180          jsr       LDIV
080000EE  0888      
080000F0  202F 0004  181          move.l    4(A7),D0
080000F4  504F       182          addq.w    #8,A7
080000F6  2600       183          move.l    D0,D3
                     184   SequentialBlockWrite_7:
080000F8  0C83 0000  185          cmp.l     #128,D3
080000FC  0080      
080000FE  6C32       186          bge.s     SequentialBlockWrite_9
                     187   ; TXR = payloadByte;        
08000100  13EE 0013  188          move.b    19(A6),4227078
08000104  0040 8006 
                     189   ; CR = Write;
08000108  13FC 0010  190          move.b    #16,4227080
0800010C  0040 8008 
                     191   ; WaitForTXByte();
08000110  4EB9 0800  192          jsr       _WaitForTXByte
08000114  0780      
                     193   ; if(!CheckForACK())
08000116  4EB9 0800  194          jsr       _CheckForACK
0800011A  07A6      
0800011C  4A80       195          tst.l     D0
0800011E  660C       196          bne.s     SequentialBlockWrite_10
                     197   ; printf("No ACK returned for byte #%d", i);
08000120  2F03       198          move.l    D3,-(A7)
08000122  4879 0800  199          pea       @m68kus~1_3.L
08000126  1D22      
08000128  4E92       200          jsr       (A2)
0800012A  504F       201          addq.w    #8,A7
                     202   SequentialBlockWrite_10:
                     203   ; address ++;
0800012C  5282       204          addq.l    #1,D2
0800012E  5283       205          addq.l    #1,D3
08000130  60C6       206          bra       SequentialBlockWrite_7
                     207   SequentialBlockWrite_9:
                     208   ; }
                     209   ; CR = stop;
08000132  13FC 0040  210          move.b    #64,4227080
08000136  0040 8008 
                     211   ; WaitForWriteCycle();
0800013A  4EB9 0800  212          jsr       _WaitForWriteCycle
0800013E  032E      
08000140  6092       213          bra       SequentialBlockWrite_4
                     214   SequentialBlockWrite_6:
08000142  4CDF 041C  215          movem.l   (A7)+,D2/D3/D4/A2
08000146  4E5E       216          unlk      A6
08000148  4E75       217          rts
                     218   ; }
                     219   ; }
                     220   ; /*********************************************************************************************
                     221   ; **  Write Page to EEPROM Chip
                     222   ; *********************************************************************************************/
                     223   ; void WritePageToChip(void){
                     224   _WritePageToChip:
0800014A  2F02       225          move.l    D2,-(A7)
                     226   ; int i = 0;
0800014C  4282       227          clr.l     D2
                     228   ; printf("Writing Page to EEPROM\r\n");
0800014E  4879 0800  229          pea       @m68kus~1_4.L
08000152  1D40      
08000154  4EB9 0800  230          jsr       _printf
08000158  1258      
0800015A  584F       231          addq.w    #4,A7
                     232   ; initiateWriteSequence(0x00000);
0800015C  42A7       233          clr.l     -(A7)
0800015E  4EB9 0800  234          jsr       _initiateWriteSequence
08000162  0276      
08000164  584F       235          addq.w    #4,A7
                     236   ; for(i=0; i<128; i++){
08000166  4282       237          clr.l     D2
                     238   WritePageToChip_1:
08000168  0C82 0000  239          cmp.l     #128,D2
0800016C  0080      
0800016E  6C32       240          bge.s     WritePageToChip_3
                     241   ; TXR = i;            // send 1 byte of data
08000170  13C2 0040  242          move.b    D2,4227078
08000174  8006      
                     243   ; CR = Write;
08000176  13FC 0010  244          move.b    #16,4227080
0800017A  0040 8008 
                     245   ; WaitForTXByte();
0800017E  4EB9 0800  246          jsr       _WaitForTXByte
08000182  0780      
                     247   ; if(!CheckForACK())
08000184  4EB9 0800  248          jsr       _CheckForACK
08000188  07A6      
0800018A  4A80       249          tst.l     D0
0800018C  6610       250          bne.s     WritePageToChip_4
                     251   ; printf("No ACK returned for byte #%d", i);
0800018E  2F02       252          move.l    D2,-(A7)
08000190  4879 0800  253          pea       @m68kus~1_3.L
08000194  1D22      
08000196  4EB9 0800  254          jsr       _printf
0800019A  1258      
0800019C  504F       255          addq.w    #8,A7
                     256   WritePageToChip_4:
0800019E  5282       257          addq.l    #1,D2
080001A0  60C6       258          bra       WritePageToChip_1
                     259   WritePageToChip_3:
                     260   ; }
                     261   ; CR = stop;
080001A2  13FC 0040  262          move.b    #64,4227080
080001A6  0040 8008 
                     263   ; WaitForWriteCycle();
080001AA  4EB9 0800  264          jsr       _WaitForWriteCycle
080001AE  032E      
080001B0  241F       265          move.l    (A7)+,D2
080001B2  4E75       266          rts
                     267   ; }
                     268   ; /*********************************************************************************************
                     269   ; **  Write Byte to EEPROM Chip
                     270   ; *********************************************************************************************/
                     271   ; void WriteByteToChip(char c){
                     272   _WriteByteToChip:
080001B4  4E56 0000  273          link      A6,#0
080001B8  48E7 0038  274          movem.l   A2/A3/A4,-(A7)
080001BC  45F9 0800  275          lea       _WaitForTXByte.L,A2
080001C0  0780      
080001C2  47F9 0800  276          lea       _printf.L,A3
080001C6  1258      
080001C8  49F9 0800  277          lea       _CheckForACK.L,A4
080001CC  07A6      
                     278   ; printf("Writing Byte to EEPROM\r\n");
080001CE  4879 0800  279          pea       @m68kus~1_5.L
080001D2  1D5A      
080001D4  4E93       280          jsr       (A3)
080001D6  584F       281          addq.w    #4,A7
                     282   ; // Ensure TX is ready before sending control byte
                     283   ; WaitForTXByte();
080001D8  4E92       284          jsr       (A2)
                     285   ; TXR = 0xA0;         // Write Control Byte (1010 0000)
080001DA  13FC 00A0  286          move.b    #160,4227078
080001DE  0040 8006 
                     287   ; CR = startWrite;    // Set STA bit, set WR bit
080001E2  13FC 0090  288          move.b    #144,4227080
080001E6  0040 8008 
                     289   ; WaitForTXByte();
080001EA  4E92       290          jsr       (A2)
                     291   ; if(!CheckForACK())
080001EC  4E94       292          jsr       (A4)
080001EE  4A80       293          tst.l     D0
080001F0  660A       294          bne.s     WriteByteToChip_1
                     295   ; printf("No ACK returned");
080001F2  4879 0800  296          pea       @m68kus~1_6.L
080001F6  1D74      
080001F8  4E93       297          jsr       (A3)
080001FA  584F       298          addq.w    #4,A7
                     299   WriteByteToChip_1:
                     300   ; TXR = 0x20;         // Address Byte 1
080001FC  13FC 0020  301          move.b    #32,4227078
08000200  0040 8006 
                     302   ; CR = Write;         // Set WR bit
08000204  13FC 0010  303          move.b    #16,4227080
08000208  0040 8008 
                     304   ; WaitForTXByte();
0800020C  4E92       305          jsr       (A2)
                     306   ; if(!CheckForACK())
0800020E  4E94       307          jsr       (A4)
08000210  4A80       308          tst.l     D0
08000212  660A       309          bne.s     WriteByteToChip_3
                     310   ; printf("No ACK returned");
08000214  4879 0800  311          pea       @m68kus~1_6.L
08000218  1D74      
0800021A  4E93       312          jsr       (A3)
0800021C  584F       313          addq.w    #4,A7
                     314   WriteByteToChip_3:
                     315   ; TXR = 0x00;         // Address Byte 2
0800021E  4239 0040  316          clr.b     4227078
08000222  8006      
                     317   ; CR = Write;         // Set WR bit
08000224  13FC 0010  318          move.b    #16,4227080
08000228  0040 8008 
                     319   ; WaitForTXByte();
0800022C  4E92       320          jsr       (A2)
                     321   ; if(!CheckForACK())
0800022E  4E94       322          jsr       (A4)
08000230  4A80       323          tst.l     D0
08000232  660A       324          bne.s     WriteByteToChip_5
                     325   ; printf("No ACK returned");
08000234  4879 0800  326          pea       @m68kus~1_6.L
08000238  1D74      
0800023A  4E93       327          jsr       (A3)
0800023C  584F       328          addq.w    #4,A7
                     329   WriteByteToChip_5:
                     330   ; TXR = c;            // send 1 byte of data
0800023E  13EE 000B  331          move.b    11(A6),4227078
08000242  0040 8006 
                     332   ; CR = Write;
08000246  13FC 0010  333          move.b    #16,4227080
0800024A  0040 8008 
                     334   ; WaitForTXByte();
0800024E  4E92       335          jsr       (A2)
                     336   ; if(!CheckForACK())
08000250  4E94       337          jsr       (A4)
08000252  4A80       338          tst.l     D0
08000254  660A       339          bne.s     WriteByteToChip_7
                     340   ; printf("No ACK returned");
08000256  4879 0800  341          pea       @m68kus~1_6.L
0800025A  1D74      
0800025C  4E93       342          jsr       (A3)
0800025E  584F       343          addq.w    #4,A7
                     344   WriteByteToChip_7:
                     345   ; CR = stop;
08000260  13FC 0040  346          move.b    #64,4227080
08000264  0040 8008 
                     347   ; WaitForWriteCycle();
08000268  4EB9 0800  348          jsr       _WaitForWriteCycle
0800026C  032E      
0800026E  4CDF 1C00  349          movem.l   (A7)+,A2/A3/A4
08000272  4E5E       350          unlk      A6
08000274  4E75       351          rts
                     352   ; }
                     353   ; /*********************************************************************************************
                     354   ; **  Write Page to EEPROM Chip
                     355   ; *********************************************************************************************/
                     356   ; void initiateWriteSequence(int address){
                     357   _initiateWriteSequence:
08000276  4E56 FFFC  358          link      A6,#-4
0800027A  48E7 2038  359          movem.l   D2/A2/A3/A4,-(A7)
0800027E  45F9 0800  360          lea       _WaitForTXByte.L,A2
08000282  0780      
08000284  47F9 0800  361          lea       _printf.L,A3
08000288  1258      
0800028A  49F9 0800  362          lea       _CheckForACK.L,A4
0800028E  07A6      
08000290  242E 0008  363          move.l    8(A6),D2
                     364   ; char writeControlByte = 0, unusedControlByte = 0;
08000294  422E FFFE  365          clr.b     -2(A6)
08000298  422E FFFF  366          clr.b     -1(A6)
                     367   ; BlockDecode(&writeControlByte, &unusedControlByte, address);
0800029C  2F02       368          move.l    D2,-(A7)
0800029E  486E FFFF  369          pea       -1(A6)
080002A2  486E FFFE  370          pea       -2(A6)
080002A6  4EB9 0800  371          jsr       _BlockDecode
080002AA  0738      
080002AC  DEFC 000C  372          add.w     #12,A7
                     373   ; // Ensure TX is ready before sending control byte
                     374   ; WaitForTXByte();
080002B0  4E92       375          jsr       (A2)
                     376   ; TXR = writeControlByte;     // Write Control Byte (1010 0000)
080002B2  13EE FFFE  377          move.b    -2(A6),4227078
080002B6  0040 8006 
                     378   ; CR = startWrite;            // Set STA bit, set WR bit
080002BA  13FC 0090  379          move.b    #144,4227080
080002BE  0040 8008 
                     380   ; WaitForTXByte();
080002C2  4E92       381          jsr       (A2)
                     382   ; if(!CheckForACK())
080002C4  4E94       383          jsr       (A4)
080002C6  4A80       384          tst.l     D0
080002C8  660A       385          bne.s     initiateWriteSequence_1
                     386   ; printf("No ACK returned");
080002CA  4879 0800  387          pea       @m68kus~1_6.L
080002CE  1D74      
080002D0  4E93       388          jsr       (A3)
080002D2  584F       389          addq.w    #4,A7
                     390   initiateWriteSequence_1:
                     391   ; TXR = (address >> 8) & 0xFF;    // Address Byte 1
080002D4  2002       392          move.l    D2,D0
080002D6  E080       393          asr.l     #8,D0
080002D8  C0BC 0000  394          and.l     #255,D0
080002DC  00FF      
080002DE  13C0 0040  395          move.b    D0,4227078
080002E2  8006      
                     396   ; CR = Write;                 // Set WR bit
080002E4  13FC 0010  397          move.b    #16,4227080
080002E8  0040 8008 
                     398   ; WaitForTXByte();
080002EC  4E92       399          jsr       (A2)
                     400   ; if(!CheckForACK())
080002EE  4E94       401          jsr       (A4)
080002F0  4A80       402          tst.l     D0
080002F2  660A       403          bne.s     initiateWriteSequence_3
                     404   ; printf("No ACK returned");
080002F4  4879 0800  405          pea       @m68kus~1_6.L
080002F8  1D74      
080002FA  4E93       406          jsr       (A3)
080002FC  584F       407          addq.w    #4,A7
                     408   initiateWriteSequence_3:
                     409   ; TXR = address & 0xFF;       // Address Byte 2
080002FE  2002       410          move.l    D2,D0
08000300  C0BC 0000  411          and.l     #255,D0
08000304  00FF      
08000306  13C0 0040  412          move.b    D0,4227078
0800030A  8006      
                     413   ; CR = Write;                 // Set WR bit
0800030C  13FC 0010  414          move.b    #16,4227080
08000310  0040 8008 
                     415   ; WaitForTXByte();
08000314  4E92       416          jsr       (A2)
                     417   ; if(!CheckForACK())
08000316  4E94       418          jsr       (A4)
08000318  4A80       419          tst.l     D0
0800031A  660A       420          bne.s     initiateWriteSequence_5
                     421   ; printf("No ACK returned");
0800031C  4879 0800  422          pea       @m68kus~1_6.L
08000320  1D74      
08000322  4E93       423          jsr       (A3)
08000324  584F       424          addq.w    #4,A7
                     425   initiateWriteSequence_5:
                     426   ; return;
08000326  4CDF 1C04  427          movem.l   (A7)+,D2/A2/A3/A4
0800032A  4E5E       428          unlk      A6
0800032C  4E75       429          rts
                     430   ; }
                     431   ; /*********************************************************************************************
                     432   ; ** Wait For EEPROM to complete internal Write Cycle
                     433   ; *********************************************************************************************/
                     434   ; void WaitForWriteCycle(void){
                     435   _WaitForWriteCycle:
                     436   ; do
                     437   ; {
                     438   WaitForWriteCycle_1:
                     439   ; TXR = 0xA0; // Write Control Byte (1010 0000)
0800032E  13FC 00A0  440          move.b    #160,4227078
08000332  0040 8006 
                     441   ; CR = start;
08000336  13FC 0080  442          move.b    #128,4227080
0800033A  0040 8008 
                     443   ; printf("Waiting for Internal Write!\r\n");
0800033E  4879 0800  444          pea       @m68kus~1_7.L
08000342  1D84      
08000344  4EB9 0800  445          jsr       _printf
08000348  1258      
0800034A  584F       446          addq.w    #4,A7
0800034C  41F9 0800  447          lea       _CheckForACK.L,A0
08000350  07A6      
08000352  2008       448          move.l    A0,D0
08000354  67D8       449          beq       WaitForWriteCycle_1
                     450   ; } while (!CheckForACK);
                     451   ; printf("Internal Write Complete!\r\n");
08000356  4879 0800  452          pea       @m68kus~1_8.L
0800035A  1DA2      
0800035C  4EB9 0800  453          jsr       _printf
08000360  1258      
08000362  584F       454          addq.w    #4,A7
                     455   ; return;
08000364  4E75       456          rts
                     457   ; }
                     458   ; /*********************************************************************************************
                     459   ; **  Read Block from EEPROM flash
                     460   ; *********************************************************************************************/
                     461   ; void SequentialBlockRead(int address, int sizeOfBlock, char expectedByte){
                     462   _SequentialBlockRead:
08000366  4E56 FFFC  463          link      A6,#-4
0800036A  48E7 3020  464          movem.l   D2/D3/A2,-(A7)
0800036E  242E 0008  465          move.l    8(A6),D2
08000372  45F9 0800  466          lea       _printf.L,A2
08000376  1258      
                     467   ; char receivedByte;
                     468   ; int endAddress = address + sizeOfBlock;
08000378  2002       469          move.l    D2,D0
0800037A  D0AE 000C  470          add.l     12(A6),D0
0800037E  2600       471          move.l    D0,D3
                     472   ; // Parameter checks
                     473   ; if (endAddress > 0x1FFFF){
08000380  0C83 0001  474          cmp.l     #131071,D3
08000384  FFFF      
08000386  6F0E       475          ble.s     SequentialBlockRead_1
                     476   ; printf("Not Enough Memory locations!\r\n");
08000388  4879 0800  477          pea       @m68kus~1_1.L
0800038C  1CD4      
0800038E  4E92       478          jsr       (A2)
08000390  584F       479          addq.w    #4,A7
                     480   ; return;
08000392  6000 00B2  481          bra       SequentialBlockRead_3
                     482   SequentialBlockRead_1:
                     483   ; }
                     484   ; initiateReadSequence(address);
08000396  2F02       485          move.l    D2,-(A7)
08000398  4EB9 0800  486          jsr       _initiateReadSequence
0800039C  065E      
0800039E  584F       487          addq.w    #4,A7
                     488   ; while (address < endAddress){
                     489   SequentialBlockRead_4:
080003A0  B483       490          cmp.l     D3,D2
080003A2  6C00 0090  491          bge       SequentialBlockRead_6
                     492   ; if (address == endAddress - 1 || address == 0xFFFF)
080003A6  2003       493          move.l    D3,D0
080003A8  5380       494          subq.l    #1,D0
080003AA  B480       495          cmp.l     D0,D2
080003AC  6708       496          beq.s     SequentialBlockRead_9
080003AE  0C82 0000  497          cmp.l     #65535,D2
080003B2  FFFF      
080003B4  660A       498          bne.s     SequentialBlockRead_7
                     499   SequentialBlockRead_9:
                     500   ; CR = ReadNACKIACK;
080003B6  13FC 0029  501          move.b    #41,4227080
080003BA  0040 8008 
080003BE  6008       502          bra.s     SequentialBlockRead_8
                     503   SequentialBlockRead_7:
                     504   ; else CR = ReadIACK;
080003C0  13FC 0021  505          move.b    #33,4227080
080003C4  0040 8008 
                     506   SequentialBlockRead_8:
                     507   ; WaitForReceivedByte();
080003C8  4EB9 0800  508          jsr       _WaitForReceivedByte
080003CC  0796      
                     509   ; receivedByte = RXR;
080003CE  1D79 0040  510          move.b    4227078,-1(A6)
080003D2  8006 FFFF 
                     511   ; if (address != (endAddress - 1) && !CheckForACK())
080003D6  2003       512          move.l    D3,D0
080003D8  5380       513          subq.l    #1,D0
080003DA  B480       514          cmp.l     D0,D2
080003DC  6716       515          beq.s     SequentialBlockRead_10
080003DE  4EB9 0800  516          jsr       _CheckForACK
080003E2  07A6      
080003E4  4A80       517          tst.l     D0
080003E6  660C       518          bne.s     SequentialBlockRead_10
                     519   ; printf("No ACK returned for read at address: 0x%X", address);
080003E8  2F02       520          move.l    D2,-(A7)
080003EA  4879 0800  521          pea       @m68kus~1_9.L
080003EE  1DBE      
080003F0  4E92       522          jsr       (A2)
080003F2  504F       523          addq.w    #8,A7
                     524   SequentialBlockRead_10:
                     525   ; if (receivedByte != expectedByte){
080003F4  102E FFFF  526          move.b    -1(A6),D0
080003F8  B02E 0013  527          cmp.b     19(A6),D0
080003FC  6716       528          beq.s     SequentialBlockRead_12
                     529   ; printf("Sequential Read Error at address: 0x%X\r\n", address);
080003FE  2F02       530          move.l    D2,-(A7)
08000400  4879 0800  531          pea       @m68kus~1_10.L
08000404  1DE8      
08000406  4E92       532          jsr       (A2)
08000408  504F       533          addq.w    #8,A7
                     534   ; CR = stop;
0800040A  13FC 0040  535          move.b    #64,4227080
0800040E  0040 8008 
                     536   ; return;
08000412  6032       537          bra.s     SequentialBlockRead_3
                     538   SequentialBlockRead_12:
                     539   ; }
                     540   ; if (address == 0x0FFFF){ // Stop and Start Read from 2nd bank
08000414  0C82 0000  541          cmp.l     #65535,D2
08000418  FFFF      
0800041A  6612       542          bne.s     SequentialBlockRead_14
                     543   ; CR = stop;
0800041C  13FC 0040  544          move.b    #64,4227080
08000420  0040 8008 
                     545   ; initiateReadSequence(address);
08000424  2F02       546          move.l    D2,-(A7)
08000426  4EB9 0800  547          jsr       _initiateReadSequence
0800042A  065E      
0800042C  584F       548          addq.w    #4,A7
                     549   SequentialBlockRead_14:
                     550   ; }
                     551   ; address ++;        
0800042E  5282       552          addq.l    #1,D2
08000430  6000 FF6E  553          bra       SequentialBlockRead_4
                     554   SequentialBlockRead_6:
                     555   ; }
                     556   ; CR = stop;
08000434  13FC 0040  557          move.b    #64,4227080
08000438  0040 8008 
                     558   ; printf("Sequential Block Read Successful\r\n");
0800043C  4879 0800  559          pea       @m68kus~1_11.L
08000440  1E12      
08000442  4E92       560          jsr       (A2)
08000444  584F       561          addq.w    #4,A7
                     562   SequentialBlockRead_3:
08000446  4CDF 040C  563          movem.l   (A7)+,D2/D3/A2
0800044A  4E5E       564          unlk      A6
0800044C  4E75       565          rts
                     566   ; }
                     567   ; /*********************************************************************************************
                     568   ; **  Read Page from EEPROM flash
                     569   ; *********************************************************************************************/
                     570   ; void ReadPageFromChip(void){
                     571   _ReadPageFromChip:
0800044E  4E56 FFFC  572          link      A6,#-4
08000452  48E7 2038  573          movem.l   D2/A2/A3/A4,-(A7)
08000456  45F9 0800  574          lea       _printf.L,A2
0800045A  1258      
0800045C  47F9 0800  575          lea       _CheckForACK.L,A3
08000460  07A6      
08000462  49F9 0800  576          lea       _WaitForTXByte.L,A4
08000466  0780      
                     577   ; int i = 0;
08000468  4282       578          clr.l     D2
                     579   ; char receivedByte;
                     580   ; printf("Reading Page from EEPROM \r\n");
0800046A  4879 0800  581          pea       @m68kus~1_12.L
0800046E  1E36      
08000470  4E92       582          jsr       (A2)
08000472  584F       583          addq.w    #4,A7
                     584   ; // Ensure TX is ready before sending control byte
                     585   ; WaitForTXByte();
08000474  4E94       586          jsr       (A4)
                     587   ; TXR = 0xA0;         // Write Control Byte (1010 0000)
08000476  13FC 00A0  588          move.b    #160,4227078
0800047A  0040 8006 
                     589   ; CR = startWrite;    // set STA bit
0800047E  13FC 0090  590          move.b    #144,4227080
08000482  0040 8008 
                     591   ; WaitForTXByte();
08000486  4E94       592          jsr       (A4)
                     593   ; if(!CheckForACK())
08000488  4E93       594          jsr       (A3)
0800048A  4A80       595          tst.l     D0
0800048C  660A       596          bne.s     ReadPageFromChip_1
                     597   ; printf("No ACK returned");
0800048E  4879 0800  598          pea       @m68kus~1_6.L
08000492  1D74      
08000494  4E92       599          jsr       (A2)
08000496  584F       600          addq.w    #4,A7
                     601   ReadPageFromChip_1:
                     602   ; TXR = 0x00;         // Address Byte 1
08000498  4239 0040  603          clr.b     4227078
0800049C  8006      
                     604   ; CR = Write;         // set WR bit
0800049E  13FC 0010  605          move.b    #16,4227080
080004A2  0040 8008 
                     606   ; WaitForTXByte();
080004A6  4E94       607          jsr       (A4)
                     608   ; if(!CheckForACK())
080004A8  4E93       609          jsr       (A3)
080004AA  4A80       610          tst.l     D0
080004AC  660A       611          bne.s     ReadPageFromChip_3
                     612   ; printf("No ACK returned");
080004AE  4879 0800  613          pea       @m68kus~1_6.L
080004B2  1D74      
080004B4  4E92       614          jsr       (A2)
080004B6  584F       615          addq.w    #4,A7
                     616   ReadPageFromChip_3:
                     617   ; TXR = 0x00;         // Address Byte 2
080004B8  4239 0040  618          clr.b     4227078
080004BC  8006      
                     619   ; CR = Write;         // set WR bit
080004BE  13FC 0010  620          move.b    #16,4227080
080004C2  0040 8008 
                     621   ; WaitForTXByte();
080004C6  4E94       622          jsr       (A4)
                     623   ; if(!CheckForACK())
080004C8  4E93       624          jsr       (A3)
080004CA  4A80       625          tst.l     D0
080004CC  660A       626          bne.s     ReadPageFromChip_5
                     627   ; printf("No ACK returned");
080004CE  4879 0800  628          pea       @m68kus~1_6.L
080004D2  1D74      
080004D4  4E92       629          jsr       (A2)
080004D6  584F       630          addq.w    #4,A7
                     631   ReadPageFromChip_5:
                     632   ; TXR = 0xA1;         // Read Control Byte (1010 0001)
080004D8  13FC 00A1  633          move.b    #161,4227078
080004DC  0040 8006 
                     634   ; CR = startWrite;    // Set STA bit, WR bit
080004E0  13FC 0090  635          move.b    #144,4227080
080004E4  0040 8008 
                     636   ; WaitForTXByte();
080004E8  4E94       637          jsr       (A4)
                     638   ; if(!CheckForACK())
080004EA  4E93       639          jsr       (A3)
080004EC  4A80       640          tst.l     D0
080004EE  660A       641          bne.s     ReadPageFromChip_7
                     642   ; printf("No ACK returned");
080004F0  4879 0800  643          pea       @m68kus~1_6.L
080004F4  1D74      
080004F6  4E92       644          jsr       (A2)
080004F8  584F       645          addq.w    #4,A7
                     646   ReadPageFromChip_7:
                     647   ; for (i=0; i<128; i++){
080004FA  4282       648          clr.l     D2
                     649   ReadPageFromChip_9:
080004FC  0C82 0000  650          cmp.l     #128,D2
08000500  0080      
08000502  6C00 006A  651          bge       ReadPageFromChip_11
                     652   ; if (i != 127)
08000506  0C82 0000  653          cmp.l     #127,D2
0800050A  007F      
0800050C  670A       654          beq.s     ReadPageFromChip_12
                     655   ; CR = ReadIACK;
0800050E  13FC 0021  656          move.b    #33,4227080
08000512  0040 8008 
08000516  6008       657          bra.s     ReadPageFromChip_13
                     658   ReadPageFromChip_12:
                     659   ; else  CR = ReadNACKIACK;
08000518  13FC 0029  660          move.b    #41,4227080
0800051C  0040 8008 
                     661   ReadPageFromChip_13:
                     662   ; WaitForReceivedByte();
08000520  4EB9 0800  663          jsr       _WaitForReceivedByte
08000524  0796      
                     664   ; receivedByte = RXR;
08000526  1D79 0040  665          move.b    4227078,-1(A6)
0800052A  8006 FFFF 
                     666   ; if (i != 127 && !CheckForACK())
0800052E  0C82 0000  667          cmp.l     #127,D2
08000532  007F      
08000534  6712       668          beq.s     ReadPageFromChip_14
08000536  4E93       669          jsr       (A3)
08000538  4A80       670          tst.l     D0
0800053A  660C       671          bne.s     ReadPageFromChip_14
                     672   ; printf("No ACK returned for byte #%d", i);
0800053C  2F02       673          move.l    D2,-(A7)
0800053E  4879 0800  674          pea       @m68kus~1_3.L
08000542  1D22      
08000544  4E92       675          jsr       (A2)
08000546  504F       676          addq.w    #8,A7
                     677   ReadPageFromChip_14:
                     678   ; if (receivedByte != i){
08000548  102E FFFF  679          move.b    -1(A6),D0
0800054C  4880       680          ext.w     D0
0800054E  48C0       681          ext.l     D0
08000550  B082       682          cmp.l     D2,D0
08000552  6716       683          beq.s     ReadPageFromChip_16
                     684   ; printf("Page Read Failed at Byte #%d\r\n", i);
08000554  2F02       685          move.l    D2,-(A7)
08000556  4879 0800  686          pea       @m68kus~1_13.L
0800055A  1E52      
0800055C  4E92       687          jsr       (A2)
0800055E  504F       688          addq.w    #8,A7
                     689   ; CR = stop;
08000560  13FC 0040  690          move.b    #64,4227080
08000564  0040 8008 
                     691   ; return;
08000568  6016       692          bra.s     ReadPageFromChip_18
                     693   ReadPageFromChip_16:
0800056A  5282       694          addq.l    #1,D2
0800056C  608E       695          bra       ReadPageFromChip_9
                     696   ReadPageFromChip_11:
                     697   ; }
                     698   ; }
                     699   ; CR = stop;
0800056E  13FC 0040  700          move.b    #64,4227080
08000572  0040 8008 
                     701   ; printf("Page Read Successful\r\n");
08000576  4879 0800  702          pea       @m68kus~1_14.L
0800057A  1E72      
0800057C  4E92       703          jsr       (A2)
0800057E  584F       704          addq.w    #4,A7
                     705   ReadPageFromChip_18:
08000580  4CDF 1C04  706          movem.l   (A7)+,D2/A2/A3/A4
08000584  4E5E       707          unlk      A6
08000586  4E75       708          rts
                     709   ; }
                     710   ; /*********************************************************************************************
                     711   ; **  Read Byte from EEPROM flash
                     712   ; *********************************************************************************************/
                     713   ; char ReadByteFromChip(void){
                     714   _ReadByteFromChip:
08000588  4E56 FFFC  715          link      A6,#-4
0800058C  48E7 0038  716          movem.l   A2/A3/A4,-(A7)
08000590  45F9 0800  717          lea       _WaitForTXByte.L,A2
08000594  0780      
08000596  47F9 0800  718          lea       _printf.L,A3
0800059A  1258      
0800059C  49F9 0800  719          lea       _CheckForACK.L,A4
080005A0  07A6      
                     720   ; char receivedByte;
                     721   ; printf("Reading Byte from EEPROM \r\n");
080005A2  4879 0800  722          pea       @m68kus~1_15.L
080005A6  1E8A      
080005A8  4E93       723          jsr       (A3)
080005AA  584F       724          addq.w    #4,A7
                     725   ; // Ensure TX is ready before sending control byte
                     726   ; WaitForTXByte();
080005AC  4E92       727          jsr       (A2)
                     728   ; TXR = 0xA0;         // Write Control Byte (1010 0000)
080005AE  13FC 00A0  729          move.b    #160,4227078
080005B2  0040 8006 
                     730   ; CR = startWrite;    // set STA bit
080005B6  13FC 0090  731          move.b    #144,4227080
080005BA  0040 8008 
                     732   ; WaitForTXByte();
080005BE  4E92       733          jsr       (A2)
                     734   ; if(!CheckForACK())
080005C0  4E94       735          jsr       (A4)
080005C2  4A80       736          tst.l     D0
080005C4  660A       737          bne.s     ReadByteFromChip_1
                     738   ; printf("No ACK returned");
080005C6  4879 0800  739          pea       @m68kus~1_6.L
080005CA  1D74      
080005CC  4E93       740          jsr       (A3)
080005CE  584F       741          addq.w    #4,A7
                     742   ReadByteFromChip_1:
                     743   ; TXR = 0x20;         // Address Byte 1
080005D0  13FC 0020  744          move.b    #32,4227078
080005D4  0040 8006 
                     745   ; CR = Write;         // set WR bit
080005D8  13FC 0010  746          move.b    #16,4227080
080005DC  0040 8008 
                     747   ; WaitForTXByte();
080005E0  4E92       748          jsr       (A2)
                     749   ; if(!CheckForACK())
080005E2  4E94       750          jsr       (A4)
080005E4  4A80       751          tst.l     D0
080005E6  660A       752          bne.s     ReadByteFromChip_3
                     753   ; printf("No ACK returned");
080005E8  4879 0800  754          pea       @m68kus~1_6.L
080005EC  1D74      
080005EE  4E93       755          jsr       (A3)
080005F0  584F       756          addq.w    #4,A7
                     757   ReadByteFromChip_3:
                     758   ; TXR = 0x00;         // Address Byte 2
080005F2  4239 0040  759          clr.b     4227078
080005F6  8006      
                     760   ; CR = Write;         // set WR bit
080005F8  13FC 0010  761          move.b    #16,4227080
080005FC  0040 8008 
                     762   ; WaitForTXByte();
08000600  4E92       763          jsr       (A2)
                     764   ; if(!CheckForACK())
08000602  4E94       765          jsr       (A4)
08000604  4A80       766          tst.l     D0
08000606  660A       767          bne.s     ReadByteFromChip_5
                     768   ; printf("No ACK returned");
08000608  4879 0800  769          pea       @m68kus~1_6.L
0800060C  1D74      
0800060E  4E93       770          jsr       (A3)
08000610  584F       771          addq.w    #4,A7
                     772   ReadByteFromChip_5:
                     773   ; TXR = 0xA1;         // Read Control Byte (1010 0001)
08000612  13FC 00A1  774          move.b    #161,4227078
08000616  0040 8006 
                     775   ; CR = startWrite;    // Set STA bit, WR bit
0800061A  13FC 0090  776          move.b    #144,4227080
0800061E  0040 8008 
                     777   ; WaitForTXByte();
08000622  4E92       778          jsr       (A2)
                     779   ; if(!CheckForACK())
08000624  4E94       780          jsr       (A4)
08000626  4A80       781          tst.l     D0
08000628  660A       782          bne.s     ReadByteFromChip_7
                     783   ; printf("No ACK returned");
0800062A  4879 0800  784          pea       @m68kus~1_6.L
0800062E  1D74      
08000630  4E93       785          jsr       (A3)
08000632  584F       786          addq.w    #4,A7
                     787   ReadByteFromChip_7:
                     788   ; CR = ReadNACKIACK;
08000634  13FC 0029  789          move.b    #41,4227080
08000638  0040 8008 
                     790   ; WaitForReceivedByte();
0800063C  4EB9 0800  791          jsr       _WaitForReceivedByte
08000640  0796      
                     792   ; receivedByte = RXR;
08000642  1D79 0040  793          move.b    4227078,-1(A6)
08000646  8006 FFFF 
                     794   ; CR = stop;
0800064A  13FC 0040  795          move.b    #64,4227080
0800064E  0040 8008 
                     796   ; return receivedByte;
08000652  102E FFFF  797          move.b    -1(A6),D0
08000656  4CDF 1C00  798          movem.l   (A7)+,A2/A3/A4
0800065A  4E5E       799          unlk      A6
0800065C  4E75       800          rts
                     801   ; }
                     802   ; /*********************************************************************************************
                     803   ; **  Initiate Read Command to EEPROM
                     804   ; *********************************************************************************************/
                     805   ; void initiateReadSequence(int address){
                     806   _initiateReadSequence:
0800065E  4E56 FFFC  807          link      A6,#-4
08000662  48E7 2038  808          movem.l   D2/A2/A3/A4,-(A7)
08000666  45F9 0800  809          lea       _WaitForTXByte.L,A2
0800066A  0780      
0800066C  47F9 0800  810          lea       _printf.L,A3
08000670  1258      
08000672  49F9 0800  811          lea       _CheckForACK.L,A4
08000676  07A6      
08000678  242E 0008  812          move.l    8(A6),D2
                     813   ; char writeControlByte = 0, readControlByte = 0;
0800067C  422E FFFE  814          clr.b     -2(A6)
08000680  422E FFFF  815          clr.b     -1(A6)
                     816   ; // Decode Address to determine bank
                     817   ; BlockDecode(&writeControlByte, &readControlByte, address);
08000684  2F02       818          move.l    D2,-(A7)
08000686  486E FFFF  819          pea       -1(A6)
0800068A  486E FFFE  820          pea       -2(A6)
0800068E  4EB9 0800  821          jsr       _BlockDecode
08000692  0738      
08000694  DEFC 000C  822          add.w     #12,A7
                     823   ; // Ensure TX is ready before transmission
                     824   ; WaitForTXByte();
08000698  4E92       825          jsr       (A2)
                     826   ; TXR = writeControlByte;          // Write Control Byte (1010 0000)
0800069A  13EE FFFE  827          move.b    -2(A6),4227078
0800069E  0040 8006 
                     828   ; CR = startWrite;                // set STA bit
080006A2  13FC 0090  829          move.b    #144,4227080
080006A6  0040 8008 
                     830   ; WaitForTXByte();
080006AA  4E92       831          jsr       (A2)
                     832   ; if(!CheckForACK())
080006AC  4E94       833          jsr       (A4)
080006AE  4A80       834          tst.l     D0
080006B0  660A       835          bne.s     initiateReadSequence_1
                     836   ; printf("No ACK returned");
080006B2  4879 0800  837          pea       @m68kus~1_6.L
080006B6  1D74      
080006B8  4E93       838          jsr       (A3)
080006BA  584F       839          addq.w    #4,A7
                     840   initiateReadSequence_1:
                     841   ; TXR = (address >> 8) & 0xFF;    // Address Byte 1
080006BC  2002       842          move.l    D2,D0
080006BE  E080       843          asr.l     #8,D0
080006C0  C0BC 0000  844          and.l     #255,D0
080006C4  00FF      
080006C6  13C0 0040  845          move.b    D0,4227078
080006CA  8006      
                     846   ; CR = Write;                     // set WR bit
080006CC  13FC 0010  847          move.b    #16,4227080
080006D0  0040 8008 
                     848   ; WaitForTXByte();
080006D4  4E92       849          jsr       (A2)
                     850   ; if(!CheckForACK())
080006D6  4E94       851          jsr       (A4)
080006D8  4A80       852          tst.l     D0
080006DA  660A       853          bne.s     initiateReadSequence_3
                     854   ; printf("No ACK returned");
080006DC  4879 0800  855          pea       @m68kus~1_6.L
080006E0  1D74      
080006E2  4E93       856          jsr       (A3)
080006E4  584F       857          addq.w    #4,A7
                     858   initiateReadSequence_3:
                     859   ; TXR = address & 0xFF;           // Address Byte 2
080006E6  2002       860          move.l    D2,D0
080006E8  C0BC 0000  861          and.l     #255,D0
080006EC  00FF      
080006EE  13C0 0040  862          move.b    D0,4227078
080006F2  8006      
                     863   ; CR = Write;                     // set WR bit
080006F4  13FC 0010  864          move.b    #16,4227080
080006F8  0040 8008 
                     865   ; WaitForTXByte();
080006FC  4E92       866          jsr       (A2)
                     867   ; if(!CheckForACK())
080006FE  4E94       868          jsr       (A4)
08000700  4A80       869          tst.l     D0
08000702  660A       870          bne.s     initiateReadSequence_5
                     871   ; printf("No ACK returned");
08000704  4879 0800  872          pea       @m68kus~1_6.L
08000708  1D74      
0800070A  4E93       873          jsr       (A3)
0800070C  584F       874          addq.w    #4,A7
                     875   initiateReadSequence_5:
                     876   ; TXR = readControlByte;          // Read Control Byte (1010 0001)
0800070E  13EE FFFF  877          move.b    -1(A6),4227078
08000712  0040 8006 
                     878   ; CR = startWrite;                // Set STA bit, WR bit
08000716  13FC 0090  879          move.b    #144,4227080
0800071A  0040 8008 
                     880   ; WaitForTXByte();
0800071E  4E92       881          jsr       (A2)
                     882   ; if(!CheckForACK())
08000720  4E94       883          jsr       (A4)
08000722  4A80       884          tst.l     D0
08000724  660A       885          bne.s     initiateReadSequence_7
                     886   ; printf("No ACK returned");
08000726  4879 0800  887          pea       @m68kus~1_6.L
0800072A  1D74      
0800072C  4E93       888          jsr       (A3)
0800072E  584F       889          addq.w    #4,A7
                     890   initiateReadSequence_7:
08000730  4CDF 1C04  891          movem.l   (A7)+,D2/A2/A3/A4
08000734  4E5E       892          unlk      A6
08000736  4E75       893          rts
                     894   ; }
                     895   ; /*********************************************************************************************
                     896   ; **  Decode Bank from address
                     897   ; *********************************************************************************************/
                     898   ; void BlockDecode(char * writeControlByte, char * readControlByte, int address){
                     899   _BlockDecode:
08000738  4E56 0000  900          link      A6,#0
0800073C  2F02       901          move.l    D2,-(A7)
                     902   ; char bank;
                     903   ; // Block Decoder
                     904   ; bank = (address >> 16) & 0xF;
0800073E  202E 0010  905          move.l    16(A6),D0
08000742  E080       906          asr.l     #8,D0
08000744  E080       907          asr.l     #8,D0
08000746  C0BC 0000  908          and.l     #15,D0
0800074A  000F      
0800074C  1400       909          move.b    D0,D2
                     910   ; if (bank == 0){
0800074E  4A02       911          tst.b     D2
08000750  6612       912          bne.s     BlockDecode_1
                     913   ; *writeControlByte = 0xA0;
08000752  206E 0008  914          move.l    8(A6),A0
08000756  10BC 00A0  915          move.b    #160,(A0)
                     916   ; *readControlByte = 0xA1;
0800075A  206E 000C  917          move.l    12(A6),A0
0800075E  10BC 00A1  918          move.b    #161,(A0)
08000762  6016       919          bra.s     BlockDecode_3
                     920   BlockDecode_1:
                     921   ; }
                     922   ; else if (bank == 1){
08000764  0C02 0001  923          cmp.b     #1,D2
08000768  6610       924          bne.s     BlockDecode_3
                     925   ; *writeControlByte = 0xA8;
0800076A  206E 0008  926          move.l    8(A6),A0
0800076E  10BC 00A8  927          move.b    #168,(A0)
                     928   ; *readControlByte = 0xA9;
08000772  206E 000C  929          move.l    12(A6),A0
08000776  10BC 00A9  930          move.b    #169,(A0)
                     931   BlockDecode_3:
0800077A  241F       932          move.l    (A7)+,D2
0800077C  4E5E       933          unlk      A6
0800077E  4E75       934          rts
                     935   ; }
                     936   ; }
                     937   ; /*********************************************************************************************
                     938   ; ** Probe SR register to check if TIP bit is clear
                     939   ; *********************************************************************************************/
                     940   ; void WaitForTXByte(void){
                     941   _WaitForTXByte:
                     942   ; while ((SR & 0x02) >> 1 == 1);
                     943   WaitForTXByte_1:
08000780  1039 0040  944          move.b    4227080,D0
08000784  8008      
08000786  C03C 0002  945          and.b     #2,D0
0800078A  E208       946          lsr.b     #1,D0
0800078C  0C00 0001  947          cmp.b     #1,D0
08000790  6602       948          bne.s     WaitForTXByte_3
08000792  60EC       949          bra       WaitForTXByte_1
                     950   WaitForTXByte_3:
08000794  4E75       951          rts
                     952   ; }
                     953   ; /*********************************************************************************************
                     954   ; ** Probe RX register to check if it has received data from slave
                     955   ; *********************************************************************************************/
                     956   ; void WaitForReceivedByte(void){
                     957   _WaitForReceivedByte:
                     958   ; while ((SR & 0x01) == 0);
                     959   WaitForReceivedByte_1:
08000796  1039 0040  960          move.b    4227080,D0
0800079A  8008      
0800079C  C03C 0001  961          and.b     #1,D0
080007A0  6602       962          bne.s     WaitForReceivedByte_3
080007A2  60F2       963          bra       WaitForReceivedByte_1
                     964   WaitForReceivedByte_3:
080007A4  4E75       965          rts
                     966   ; }
                     967   ; /*********************************************************************************************
                     968   ; ** Probe Status Register to check if slave has ACKed
                     969   ; Returns 0 of not ACKed and 1 if ACKed
                     970   ; *********************************************************************************************/
                     971   ; int CheckForACK(void){
                     972   _CheckForACK:
                     973   ; if ((SR & 0x80)>> 7 == 1)
080007A6  1039 0040  974          move.b    4227080,D0
080007AA  8008      
080007AC  C07C 00FF  975          and.w     #255,D0
080007B0  C07C 0080  976          and.w     #128,D0
080007B4  EE40       977          asr.w     #7,D0
080007B6  0C40 0001  978          cmp.w     #1,D0
080007BA  6604       979          bne.s     CheckForACK_1
                     980   ; return 0;
080007BC  4280       981          clr.l     D0
080007BE  6002       982          bra.s     CheckForACK_3
                     983   CheckForACK_1:
                     984   ; else return 1;
080007C0  7001       985          moveq     #1,D0
                     986   CheckForACK_3:
080007C2  4E75       987          rts
                     988   ; }
                     989   ; /*********************************************************************************************
                     990   ; ** Initialize IIC Communication
                     991   ; *********************************************************************************************/
                     992   ; void IIC_Init(void){
                     993   _IIC_Init:
                     994   ; // Set Clock Frequency to 100kHz as per page 7 of in IIC controller Document
                     995   ; CTR = 0x00; // Clear EN bit to set clock value first
080007C4  4239 0040  996          clr.b     4227076
080007C8  8004      
                     997   ; PRERlo = 0x31;
080007CA  13FC 0031  998          move.b    #49,4227072
080007CE  0040 8000 
                     999   ; PRERhi = 0x00;
080007D2  4239 0040 1000          clr.b     4227074
080007D6  8002      
                    1001   ; // Enable EN bit (core is disable) & Disable IEN bit (interrupts disable)
                    1002   ; CTR = 0x80;
080007D8  13FC 0080 1003          move.b    #128,4227076
080007DC  0040 8004 
080007E0  4E75      1004          rts
                    1005   ; }
                    1006   ; void main(void)
                    1007   ; {
                    1008   _main:
080007E2  4E56 FFFC 1009          link      A6,#-4
080007E6  2F02      1010          move.l    D2,-(A7)
                    1011   ; char sendByte = 0x55;
080007E8  7455      1012          moveq     #85,D2
                    1013   ; char recievedByte;
                    1014   ; scanflush();     // flush any text that may have been typed ahead
080007EA  4EB9 0800 1015          jsr       _scanflush
080007EE  0BD6      
                    1016   ; printf("\r\nHello IIC Lab\r\n\r\n");
080007F0  4879 0800 1017          pea       @m68kus~1_16.L
080007F4  1EA6      
080007F6  4EB9 0800 1018          jsr       _printf
080007FA  1258      
080007FC  584F      1019          addq.w    #4,A7
                    1020   ; IIC_Init();
080007FE  4EB9 0800 1021          jsr       _IIC_Init
08000802  07C4      
                    1022   ; WriteByteToChip(sendByte);
08000804  4882      1023          ext.w     D2
08000806  48C2      1024          ext.l     D2
08000808  2F02      1025          move.l    D2,-(A7)
0800080A  4EB9 0800 1026          jsr       _WriteByteToChip
0800080E  01B4      
08000810  584F      1027          addq.w    #4,A7
                    1028   ; recievedByte = ReadByteFromChip();
08000812  4EB9 0800 1029          jsr       _ReadByteFromChip
08000816  0588      
08000818  1D40 FFFF 1030          move.b    D0,-1(A6)
                    1031   ; printf("Sent Byte: 0x%X & Recieved Byte: 0x%X\r\n\r\n", sendByte, recievedByte);
0800081C  122E FFFF 1032          move.b    -1(A6),D1
08000820  4881      1033          ext.w     D1
08000822  48C1      1034          ext.l     D1
08000824  2F01      1035          move.l    D1,-(A7)
08000826  4882      1036          ext.w     D2
08000828  48C2      1037          ext.l     D2
0800082A  2F02      1038          move.l    D2,-(A7)
0800082C  4879 0800 1039          pea       @m68kus~1_17.L
08000830  1EBA      
08000832  4EB9 0800 1040          jsr       _printf
08000836  1258      
08000838  DEFC 000C 1041          add.w     #12,A7
                    1042   ; WritePageToChip();
0800083C  4EB9 0800 1043          jsr       _WritePageToChip
08000840  014A      
                    1044   ; ReadPageFromChip();
08000842  4EB9 0800 1045          jsr       _ReadPageFromChip
08000846  044E      
                    1046   ; SequentialBlockWrite(0x00000, 16384, sendByte);
08000848  4882      1047          ext.w     D2
0800084A  48C2      1048          ext.l     D2
0800084C  2F02      1049          move.l    D2,-(A7)
0800084E  4878 4000 1050          pea       16384
08000852  42A7      1051          clr.l     -(A7)
08000854  4EB9 0800 1052          jsr       _SequentialBlockWrite
08000858  0098      
0800085A  DEFC 000C 1053          add.w     #12,A7
                    1054   ; SequentialBlockRead(0x00000, 16384, sendByte);
0800085E  4882      1055          ext.w     D2
08000860  48C2      1056          ext.l     D2
08000862  2F02      1057          move.l    D2,-(A7)
08000864  4878 4000 1058          pea       16384
08000868  42A7      1059          clr.l     -(A7)
0800086A  4EB9 0800 1060          jsr       _SequentialBlockRead
0800086E  0366      
08000870  DEFC 000C 1061          add.w     #12,A7
                    1062   ; while(1);
                    1063   main_1:
08000874  60FE      1064          bra       main_1
                    1065   ; // programs should NOT exit as there is nothing to Exit TO !!!!!!
                    1066   ; // There is no OS - just press the reset button to end program and call debug
                    1067   ; }
                    1068   ULDIV:
08000876  4E56 0000 1069          link    A6,#0
0800087A  48E7 C000 1070          movem.l D0/D1,-(A7)
0800087E  222E 0008 1071          move.l  8(A6),D1
08000882  202E 000C 1072          move.l  12(A6),D0
08000886  6036      1073          bra.s   ldiv_3
                    1074   LDIV:
08000888  4E56 0000 1075          link    A6,#0
0800088C  48E7 C000 1076          movem.l D0/D1,-(A7)
08000890  222E 0008 1077          move.l  8(A6),D1
08000894  202E 000C 1078          move.l  12(A6),D0
08000898  4A80      1079          tst.l   D0
0800089A  6A0E      1080          bpl.s   ldiv_1
0800089C  4480      1081          neg.l   D0
0800089E  4A81      1082          tst.l   D1
080008A0  6A14      1083          bpl.s   ldiv_2
080008A2  4481      1084          neg.l   D1
080008A4  612A      1085          bsr.s   dodiv
080008A6  4481      1086          neg.l   D1
080008A8  6016      1087          bra.s   ldiv_4
                    1088   ldiv_1:
080008AA  4A81      1089          tst.l   D1
080008AC  6A10      1090          bpl.s   ldiv_3
080008AE  4481      1091          neg.l   D1
080008B0  611E      1092          bsr.s   dodiv
080008B2  4480      1093          neg.l   D0
080008B4  600A      1094          bra.s   ldiv_4
                    1095   ldiv_2:
080008B6  6118      1096          bsr.s   dodiv
080008B8  4480      1097          neg.l   D0
080008BA  4481      1098          neg.l   D1
080008BC  6002      1099          bra.s   ldiv_4
                    1100   ldiv_3:
080008BE  6110      1101          bsr.s   dodiv
                    1102   ldiv_4:
080008C0  2D40 0008 1103          move.l  D0,8(A6)
080008C4  2D41 000C 1104          move.l  D1,12(A6)
080008C8  4CDF 0003 1105          movem.l (A7)+,D0/D1
080008CC  4E5E      1106          unlk    A6
080008CE  4E75      1107          rts
                    1108   dodiv:
080008D0  0C81 0000 1109          cmpi.l  #$FFFF,D1
080008D4  FFFF      
080008D6  6236      1110          bhi.s   dodiv_2
080008D8  0C80 0000 1111          cmpi.l  #$FFFF,D0
080008DC  FFFF      
080008DE  6210      1112          bhi.s   dodiv_1
080008E0  80C1      1113          divu    D1,D0
080008E2  2200      1114          move.l  D0,D1
080008E4  4241      1115          clr.w   D1
080008E6  4841      1116          swap    D1
080008E8  0280 0000 1117          andi.l  #$FFFF,D0
080008EC  FFFF      
080008EE  4E75      1118          rts
                    1119   dodiv_1:
080008F0  48A7 A000 1120          movem.w D0/D2,-(A7)
080008F4  4240      1121          clr.w   D0
080008F6  4840      1122          swap    D0
080008F8  80C1      1123          divu    D1,D0
080008FA  3400      1124          move.w  D0,D2
080008FC  301F      1125          move.w  (A7)+,D0
080008FE  80C1      1126          divu    D1,D0
08000900  4840      1127          swap    D0
08000902  4281      1128          clr.l   D1
08000904  3200      1129          move.w  D0,D1
08000906  3002      1130          move.w  D2,D0
08000908  4840      1131          swap    D0
0800090A  341F      1132          move.w  (A7)+,D2
0800090C  4E75      1133          rts
                    1134   dodiv_2:
0800090E  48E7 3800 1135          movem.l D2/D3/D4,-(A7)
08000912  2401      1136          move.l  D1,D2
08000914  4242      1137          clr.w   D2
08000916  4842      1138          swap    D2
08000918  5282      1139          addq.l  #1,D2
0800091A  2600      1140          move.l  D0,D3
0800091C  2801      1141          move.l  D1,D4
0800091E  2202      1142          move.l  D2,D1
08000920  61CE      1143          bsr.s   dodiv_1
08000922  2204      1144          move.l  D4,D1
08000924  82C2      1145          divu    D2,D1
08000926  80C1      1146          divu    D1,D0
08000928  0280 0000 1147          andi.l  #$FFFF,D0
0800092C  FFFF      
                    1148   dodiv_3:
0800092E  2204      1149          move.l  D4,D1
08000930  2404      1150          move.l  D4,D2
08000932  4842      1151          swap    D2
08000934  C2C0      1152          mulu    D0,D1
08000936  C4C0      1153          mulu    D0,D2
08000938  4842      1154          swap    D2
0800093A  D282      1155          add.l   D2,D1
0800093C  9283      1156          sub.l   D3,D1
0800093E  620A      1157          bhi.s   dodiv_4
08000940  4481      1158          neg.l   D1
08000942  B881      1159          cmp.l   D1,D4
08000944  6208      1160          bhi.s   dodiv_5
08000946  5280      1161          addq.l  #1,D0
08000948  60E4      1162          bra.s   dodiv_3
                    1163   dodiv_4:
0800094A  5380      1164          subq.l  #1,D0
0800094C  60E0      1165          bra.s   dodiv_3
                    1166   dodiv_5:
0800094E  4CDF 001C 1167          movem.l (A7)+,D2/D3/D4
08000952  4E75      1168          rts
                    1169   @doscan_read:
08000954  4E56 FFFC 1170          link      A6,#-4
08000958  2F0A      1171          move.l    A2,-(A7)
0800095A  45F9 0800 1172          lea       @doscan_lpbuf.L,A2
0800095E  2000      
08000960  4AAE 0008 1173          tst.l     8(A6)
08000964  6700 0032 1174          beq       @doscan_read_1
08000968  206E 0008 1175          move.l    8(A6),A0
0800096C  58AE 0008 1176          addq.l    #4,8(A6)
08000970  2050      1177          move.l    (A0),A0
08000972  1010      1178          move.b    (A0),D0
08000974  4880      1179          ext.w     D0
08000976  48C0      1180          ext.l     D0
08000978  2D40 FFFC 1181          move.l    D0,-4(A6)
0800097C  4201      1182          clr.b     D1
0800097E  C2BC 0000 1183          and.l     #255,D1
08000982  00FF      
08000984  B081      1184          cmp.l     D1,D0
08000986  6706      1185          beq.s     @doscan_read_3
08000988  202E FFFC 1186          move.l    -4(A6),D0
0800098C  6006      1187          bra.s     @doscan_read_4
                    1188   @doscan_read_3:
0800098E  70FF      1189          moveq     #-1,D0
08000990  4880      1190          ext.w     D0
08000992  48C0      1191          ext.l     D0
                    1192   @doscan_read_4:
08000994  6000 0036 1193          bra       @doscan_read_5
                    1194   @doscan_read_1:
08000998  2052      1195          move.l    (A2),A0
0800099A  1010      1196          move.b    (A0),D0
0800099C  6624      1197          bne.s     @doscan_read_6
0800099E  4879 0800 1198          pea       @doscan_buf.L
080009A2  2004      
080009A4  4EB9 0800 1199          jsr       _gets
080009A8  1328      
080009AA  584F      1200          addq.w    #4,A7
080009AC  2480      1201          move.l    D0,(A2)
080009AE  4879 0800 1202          pea       @doscan_1.L
080009B2  1EE4      
080009B4  4879 0800 1203          pea       @doscan_buf.L
080009B8  2004      
080009BA  4EB9 0800 1204          jsr       _strcat
080009BE  13BA      
080009C0  504F      1205          addq.w    #8,A7
                    1206   @doscan_read_6:
080009C2  2052      1207          move.l    (A2),A0
080009C4  5292      1208          addq.l    #1,(A2)
080009C6  1010      1209          move.b    (A0),D0
080009C8  4880      1210          ext.w     D0
080009CA  48C0      1211          ext.l     D0
                    1212   @doscan_read_5:
080009CC  245F      1213          move.l    (A7)+,A2
080009CE  4E5E      1214          unlk      A6
080009D0  4E75      1215          rts
                    1216   @doscan_putback:
080009D2  4E56 0000 1217          link      A6,#0
080009D6  48E7 3000 1218          movem.l   D2/D3,-(A7)
080009DA  242E 000C 1219          move.l    12(A6),D2
080009DE  262E 0008 1220          move.l    8(A6),D3
080009E2  6718      1221          beq.s     @doscan_putback_1
080009E4  0C82 FFFF 1222          cmp.l     #-1,D2
080009E8  FFFF      
080009EA  670A      1223          beq.s     @doscan_putback_3
080009EC  5983      1224          subq.l    #4,D3
080009EE  2043      1225          move.l    D3,A0
080009F0  2050      1226          move.l    (A0),A0
080009F2  1082      1227          move.b    D2,(A0)
080009F4  6004      1228          bra.s     @doscan_putback_4
                    1229   @doscan_putback_3:
080009F6  2043      1230          move.l    D3,A0
080009F8  5390      1231          subq.l    #1,(A0)
                    1232   @doscan_putback_4:
080009FA  6030      1233          bra.s     @doscan_putback_6
                    1234   @doscan_putback_1:
080009FC  41F9 0800 1235          lea       @doscan_buf.L,A0
08000A00  2004      
08000A02  2008      1236          move.l    A0,D0
08000A04  B0B9 0800 1237          cmp.l     @doscan_lpbuf.L,D0
08000A08  2000      
08000A0A  6612      1238          bne.s     @doscan_putback_5
08000A0C  4239 0800 1239          clr.b     @doscan_buf.L
08000A10  2004      
08000A12  2F02      1240          move.l    D2,-(A7)
08000A14  4EB9 0800 1241          jsr       _ungetch
08000A18  13EC      
08000A1A  584F      1242          addq.w    #4,A7
08000A1C  600E      1243          bra.s     @doscan_putback_6
                    1244   @doscan_putback_5:
08000A1E  53B9 0800 1245          subq.l    #1,@doscan_lpbuf.L
08000A22  2000      
08000A24  2079 0800 1246          move.l    @doscan_lpbuf.L,A0
08000A28  2000      
08000A2A  1082      1247          move.b    D2,(A0)
                    1248   @doscan_putback_6:
08000A2C  2002      1249          move.l    D2,D0
08000A2E  4CDF 000C 1250          movem.l   (A7)+,D2/D3
08000A32  4E5E      1251          unlk      A6
08000A34  4E75      1252          rts
                    1253   @doscan_space:
08000A36  4E56 0000 1254          link      A6,#0
08000A3A  2F02      1255          move.l    D2,-(A7)
                    1256   @doscan_space_1:
08000A3C  2F2E 0008 1257          move.l    8(A6),-(A7)
08000A40  4EB9 0800 1258          jsr       @doscan_read
08000A44  0954      
08000A46  584F      1259          addq.w    #4,A7
08000A48  2400      1260          move.l    D0,D2
08000A4A  206E 000C 1261          move.l    12(A6),A0
08000A4E  5290      1262          addq.l    #1,(A0)
08000A50  2002      1263          move.l    D2,D0
08000A52  5280      1264          addq.l    #1,D0
08000A54  41F9 0800 1265          lea       __ctype.L,A0
08000A58  1EE6      
08000A5A  1030 0800 1266          move.b    0(A0,D0.L),D0
08000A5E  C03C 0010 1267          and.b     #16,D0
08000A62  66D8      1268          bne       @doscan_space_1
08000A64  2002      1269          move.l    D2,D0
08000A66  241F      1270          move.l    (A7)+,D2
08000A68  4E5E      1271          unlk      A6
08000A6A  4E75      1272          rts
                    1273   @doscan_select:
08000A6C  4E56 0000 1274          link      A6,#0
08000A70  48E7 3F20 1275          movem.l   D2/D3/D4/D5/D6/D7/A2,-(A7)
08000A74  262E 000C 1276          move.l    12(A6),D3
08000A78  2C2E 0018 1277          move.l    24(A6),D6
08000A7C  2E2E 0014 1278          move.l    20(A6),D7
08000A80  2043      1279          move.l    D3,A0
08000A82  1010      1280          move.b    (A0),D0
08000A84  0C00 005E 1281          cmp.b     #94,D0
08000A88  6608      1282          bne.s     @doscan_select_1
08000A8A  347C 0001 1283          move.w    #1,A2
08000A8E  5283      1284          addq.l    #1,D3
08000A90  6004      1285          bra.s     @doscan_select_2
                    1286   @doscan_select_1:
08000A92  347C 0000 1287          move.w    #0,A2
                    1288   @doscan_select_2:
08000A96  202E 0010 1289          move.l    16(A6),D0
08000A9A  53AE 0010 1290          subq.l    #1,16(A6)
08000A9E  4A80      1291          tst.l     D0
08000AA0  6700 00F6 1292          beq       @doscan_select_5
08000AA4  2F2E 0008 1293          move.l    8(A6),-(A7)
08000AA8  4EB9 0800 1294          jsr       @doscan_read
08000AAC  0954      
08000AAE  584F      1295          addq.w    #4,A7
08000AB0  2800      1296          move.l    D0,D4
08000AB2  0C84 FFFF 1297          cmp.l     #-1,D4
08000AB6  FFFF      
08000AB8  6604      1298          bne.s     @doscan_select_6
08000ABA  6000 00DC 1299          bra       @doscan_select_5
                    1300   @doscan_select_6:
08000ABE  206E 001C 1301          move.l    28(A6),A0
08000AC2  5290      1302          addq.l    #1,(A0)
08000AC4  4285      1303          clr.l     D5
08000AC6  4282      1304          clr.l     D2
                    1305   @doscan_select_8:
08000AC8  2043      1306          move.l    D3,A0
08000ACA  1030 2800 1307          move.b    0(A0,D2.L),D0
08000ACE  0C00 005D 1308          cmp.b     #93,D0
08000AD2  6700 0086 1309          beq       @doscan_select_10
08000AD6  4A82      1310          tst.l     D2
08000AD8  6710      1311          beq.s     @doscan_select_11
08000ADA  2043      1312          move.l    D3,A0
08000ADC  1030 2800 1313          move.b    0(A0,D2.L),D0
08000AE0  0C00 005D 1314          cmp.b     #93,D0
08000AE4  6604      1315          bne.s     @doscan_select_11
08000AE6  6000 0072 1316          bra       @doscan_select_10
                    1317   @doscan_select_11:
08000AEA  4A82      1318          tst.l     D2
08000AEC  6700 0056 1319          beq       @doscan_select_15
08000AF0  2043      1320          move.l    D3,A0
08000AF2  1030 2800 1321          move.b    0(A0,D2.L),D0
08000AF6  0C00 002D 1322          cmp.b     #45,D0
08000AFA  6600 0048 1323          bne       @doscan_select_15
08000AFE  2043      1324          move.l    D3,A0
08000B00  2002      1325          move.l    D2,D0
08000B02  5380      1326          subq.l    #1,D0
08000B04  2243      1327          move.l    D3,A1
08000B06  2202      1328          move.l    D2,D1
08000B08  5281      1329          addq.l    #1,D1
08000B0A  2F00      1330          move.l    D0,-(A7)
08000B0C  1030 0800 1331          move.b    0(A0,D0.L),D0
08000B10  B031 1800 1332          cmp.b     0(A1,D1.L),D0
08000B14  6C00 002E 1333          bge       @doscan_select_15
08000B18  201F      1334          move.l    (A7)+,D0
08000B1A  2043      1335          move.l    D3,A0
08000B1C  2002      1336          move.l    D2,D0
08000B1E  5380      1337          subq.l    #1,D0
08000B20  1030 0800 1338          move.b    0(A0,D0.L),D0
08000B24  4880      1339          ext.w     D0
08000B26  48C0      1340          ext.l     D0
08000B28  B880      1341          cmp.l     D0,D4
08000B2A  6D14      1342          blt.s     @doscan_select_17
08000B2C  2043      1343          move.l    D3,A0
08000B2E  2002      1344          move.l    D2,D0
08000B30  5280      1345          addq.l    #1,D0
08000B32  1030 0800 1346          move.b    0(A0,D0.L),D0
08000B36  4880      1347          ext.w     D0
08000B38  48C0      1348          ext.l     D0
08000B3A  B880      1349          cmp.l     D0,D4
08000B3C  6E02      1350          bgt.s     @doscan_select_17
08000B3E  601A      1351          bra.s     @doscan_select_10
                    1352   @doscan_select_17:
08000B40  5282      1353          addq.l    #1,D2
08000B42  6010      1354          bra.s     @doscan_select_19
                    1355   @doscan_select_15:
08000B44  2043      1356          move.l    D3,A0
08000B46  1030 2800 1357          move.b    0(A0,D2.L),D0
08000B4A  4880      1358          ext.w     D0
08000B4C  48C0      1359          ext.l     D0
08000B4E  B880      1360          cmp.l     D0,D4
08000B50  6602      1361          bne.s     @doscan_select_19
08000B52  6006      1362          bra.s     @doscan_select_10
                    1363   @doscan_select_19:
08000B54  5282      1364          addq.l    #1,D2
08000B56  6000 FF70 1365          bra       @doscan_select_8
                    1366   @doscan_select_10:
08000B5A  4A82      1367          tst.l     D2
08000B5C  670C      1368          beq.s     @doscan_select_23
08000B5E  2043      1369          move.l    D3,A0
08000B60  1030 2800 1370          move.b    0(A0,D2.L),D0
08000B64  0C00 005D 1371          cmp.b     #93,D0
08000B68  6702      1372          beq.s     @doscan_select_21
                    1373   @doscan_select_23:
08000B6A  7A01      1374          moveq     #1,D5
                    1375   @doscan_select_21:
08000B6C  200A      1376          move.l    A2,D0
08000B6E  6712      1377          beq.s     @doscan_select_24
08000B70  4A85      1378          tst.l     D5
08000B72  660C      1379          bne.s     @doscan_select_26
08000B74  4A87      1380          tst.l     D7
08000B76  6606      1381          bne.s     @doscan_select_28
08000B78  2046      1382          move.l    D6,A0
08000B7A  5286      1383          addq.l    #1,D6
08000B7C  1084      1384          move.b    D4,(A0)
                    1385   @doscan_select_28:
08000B7E  6014      1386          bra.s     @doscan_select_4
                    1387   @doscan_select_26:
08000B80  6016      1388          bra.s     @doscan_select_5
                    1389   @doscan_select_24:
08000B82  4A85      1390          tst.l     D5
08000B84  670C      1391          beq.s     @doscan_select_30
08000B86  4A87      1392          tst.l     D7
08000B88  6606      1393          bne.s     @doscan_select_32
08000B8A  2046      1394          move.l    D6,A0
08000B8C  5286      1395          addq.l    #1,D6
08000B8E  1084      1396          move.b    D4,(A0)
                    1397   @doscan_select_32:
08000B90  6002      1398          bra.s     @doscan_select_4
                    1399   @doscan_select_30:
08000B92  6004      1400          bra.s     @doscan_select_5
                    1401   @doscan_select_4:
08000B94  6000 FF00 1402          bra       @doscan_select_2
                    1403   @doscan_select_5:
08000B98  0C84 FFFF 1404          cmp.l     #-1,D4
08000B9C  FFFF      
08000B9E  6714      1405          beq.s     @doscan_select_34
08000BA0  2F04      1406          move.l    D4,-(A7)
08000BA2  2F2E 0008 1407          move.l    8(A6),-(A7)
08000BA6  4EB9 0800 1408          jsr       @doscan_putback
08000BAA  09D2      
08000BAC  504F      1409          addq.w    #8,A7
08000BAE  206E 001C 1410          move.l    28(A6),A0
08000BB2  5390      1411          subq.l    #1,(A0)
                    1412   @doscan_select_34:
08000BB4  4A87      1413          tst.l     D7
08000BB6  6604      1414          bne.s     @doscan_select_36
08000BB8  2046      1415          move.l    D6,A0
08000BBA  4210      1416          clr.b     (A0)
                    1417   @doscan_select_36:
08000BBC  5283      1418          addq.l    #1,D3
08000BBE  2043      1419          move.l    D3,A0
08000BC0  1010      1420          move.b    (A0),D0
08000BC2  0C00 005D 1421          cmp.b     #93,D0
08000BC6  6702      1422          beq.s     @doscan_select_40
08000BC8  60F2      1423          bra       @doscan_select_36
                    1424   @doscan_select_40:
08000BCA  5283      1425          addq.l    #1,D3
08000BCC  2003      1426          move.l    D3,D0
08000BCE  4CDF 04FC 1427          movem.l   (A7)+,D2/D3/D4/D5/D6/D7/A2
08000BD2  4E5E      1428          unlk      A6
08000BD4  4E75      1429          rts
                    1430   _scanflush:
08000BD6  41F9 0800 1431          lea       @doscan_buf.L,A0
08000BDA  2004      
08000BDC  23C8 0800 1432          move.l    A0,@doscan_lpbuf.L
08000BE0  2000      
08000BE2  4239 0800 1433          clr.b     @doscan_buf.L
08000BE6  2004      
08000BE8  4878 FFFF 1434          pea       -1
08000BEC  4EB9 0800 1435          jsr       _ungetch
08000BF0  13EC      
08000BF2  584F      1436          addq.w    #4,A7
08000BF4  4E75      1437          rts
                    1438   _doscan:
08000BF6  4E56 FF88 1439          link      A6,#-120
08000BFA  48E7 3F3C 1440          movem.l   D2/D3/D4/D5/D6/D7/A2/A3/A4/A5,-(A7)
08000BFE  47F9 0800 1441          lea       @doscan_read.L,A3
08000C02  0954      
08000C04  4AAE 0008 1442          tst.l     8(A6)
08000C08  6706      1443          beq.s     doscan_1
08000C0A  41EE 0008 1444          lea       8(A6),A0
08000C0E  6008      1445          bra.s     doscan_2
                    1446   doscan_1:
08000C10  4200      1447          clr.b     D0
08000C12  4880      1448          ext.w     D0
08000C14  48C0      1449          ext.l     D0
08000C16  2040      1450          move.l    D0,A0
                    1451   doscan_2:
08000C18  2A08      1452          move.l    A0,D5
08000C1A  42AE FFE4 1453          clr.l     -28(A6)
08000C1E  4284      1454          clr.l     D4
                    1455   doscan_3:
08000C20  206E 000C 1456          move.l    12(A6),A0
08000C24  52AE 000C 1457          addq.l    #1,12(A6)
08000C28  1010      1458          move.b    (A0),D0
08000C2A  4880      1459          ext.w     D0
08000C2C  48C0      1460          ext.l     D0
08000C2E  2600      1461          move.l    D0,D3
08000C30  4201      1462          clr.b     D1
08000C32  C2BC 0000 1463          and.l     #255,D1
08000C36  00FF      
08000C38  B081      1464          cmp.l     D1,D0
08000C3A  6700 0612 1465          beq       doscan_5
08000C3E  4286      1466          clr.l     D6
08000C40  387C 0000 1467          move.w    #0,A4
08000C44  0C83 0000 1468          cmp.l     #32,D3
08000C48  0020      
08000C4A  6712      1469          beq.s     doscan_8
08000C4C  0C83 0000 1470          cmp.l     #9,D3
08000C50  0009      
08000C52  670A      1471          beq.s     doscan_8
08000C54  0C83 0000 1472          cmp.l     #10,D3
08000C58  000A      
08000C5A  6600 0050 1473          bne       doscan_6
                    1474   doscan_8:
08000C5E  2F05      1475          move.l    D5,-(A7)
08000C60  4E93      1476          jsr       (A3)
08000C62  584F      1477          addq.w    #4,A7
08000C64  2400      1478          move.l    D0,D2
08000C66  52AE FFE4 1479          addq.l    #1,-28(A6)
08000C6A  0C82 FFFF 1480          cmp.l     #-1,D2
08000C6E  FFFF      
08000C70  6612      1481          bne.s     doscan_11
08000C72  4A84      1482          tst.l     D4
08000C74  6704      1483          beq.s     doscan_13
08000C76  2004      1484          move.l    D4,D0
08000C78  6006      1485          bra.s     doscan_14
                    1486   doscan_13:
08000C7A  70FF      1487          moveq     #-1,D0
08000C7C  4880      1488          ext.w     D0
08000C7E  48C0      1489          ext.l     D0
                    1490   doscan_14:
08000C80  6000 05CE 1491          bra       doscan_15
                    1492   doscan_11:
08000C84  2002      1493          move.l    D2,D0
08000C86  5280      1494          addq.l    #1,D0
08000C88  41F9 0800 1495          lea       __ctype.L,A0
08000C8C  1EE6      
08000C8E  1030 0800 1496          move.b    0(A0,D0.L),D0
08000C92  C03C 0010 1497          and.b     #16,D0
08000C96  66C6      1498          bne       doscan_8
08000C98  53AE FFE4 1499          subq.l    #1,-28(A6)
08000C9C  2F02      1500          move.l    D2,-(A7)
08000C9E  2F05      1501          move.l    D5,-(A7)
08000CA0  4EB9 0800 1502          jsr       @doscan_putback
08000CA4  09D2      
08000CA6  504F      1503          addq.w    #8,A7
08000CA8  6000 05A0 1504          bra       doscan_141
                    1505   doscan_6:
08000CAC  0C83 0000 1506          cmp.l     #37,D3
08000CB0  0025      
08000CB2  6600 055A 1507          bne       doscan_129
08000CB6  206E 000C 1508          move.l    12(A6),A0
08000CBA  52AE 000C 1509          addq.l    #1,12(A6)
08000CBE  1010      1510          move.b    (A0),D0
08000CC0  4880      1511          ext.w     D0
08000CC2  48C0      1512          ext.l     D0
08000CC4  2600      1513          move.l    D0,D3
08000CC6  42AE FFEC 1514          clr.l     -20(A6)
08000CCA  4286      1515          clr.l     D6
08000CCC  42AE FFE8 1516          clr.l     -24(A6)
08000CD0  347C 7FFF 1517          move.w    #32767,A2
08000CD4  0C83 0000 1518          cmp.l     #42,D3
08000CD8  002A      
08000CDA  6612      1519          bne.s     doscan_18
08000CDC  7C01      1520          moveq     #1,D6
08000CDE  206E 000C 1521          move.l    12(A6),A0
08000CE2  52AE 000C 1522          addq.l    #1,12(A6)
08000CE6  1010      1523          move.b    (A0),D0
08000CE8  4880      1524          ext.w     D0
08000CEA  48C0      1525          ext.l     D0
08000CEC  2600      1526          move.l    D0,D3
                    1527   doscan_18:
08000CEE  2003      1528          move.l    D3,D0
08000CF0  5280      1529          addq.l    #1,D0
08000CF2  41F9 0800 1530          lea       __ctype.L,A0
08000CF6  1EE6      
08000CF8  1030 0800 1531          move.b    0(A0,D0.L),D0
08000CFC  C03C 0004 1532          and.b     #4,D0
08000D00  6700 004C 1533          beq       doscan_24
08000D04  2003      1534          move.l    D3,D0
08000D06  0480 0000 1535          sub.l     #48,D0
08000D0A  0030      
08000D0C  2440      1536          move.l    D0,A2
                    1537   doscan_22:
08000D0E  206E 000C 1538          move.l    12(A6),A0
08000D12  52AE 000C 1539          addq.l    #1,12(A6)
08000D16  1010      1540          move.b    (A0),D0
08000D18  4880      1541          ext.w     D0
08000D1A  48C0      1542          ext.l     D0
08000D1C  2600      1543          move.l    D0,D3
08000D1E  5280      1544          addq.l    #1,D0
08000D20  41F9 0800 1545          lea       __ctype.L,A0
08000D24  1EE6      
08000D26  1030 0800 1546          move.b    0(A0,D0.L),D0
08000D2A  C03C 0004 1547          and.b     #4,D0
08000D2E  671E      1548          beq.s     doscan_24
08000D30  2F0A      1549          move.l    A2,-(A7)
08000D32  4878 000A 1550          pea       10
08000D36  4EB9 0800 1551          jsr       LMUL
08000D3A  129A      
08000D3C  2017      1552          move.l    (A7),D0
08000D3E  504F      1553          addq.w    #8,A7
08000D40  2203      1554          move.l    D3,D1
08000D42  0481 0000 1555          sub.l     #48,D1
08000D46  0030      
08000D48  D081      1556          add.l     D1,D0
08000D4A  2440      1557          move.l    D0,A2
08000D4C  60C0      1558          bra       doscan_22
                    1559   doscan_24:
08000D4E  0C83 0000 1560          cmp.l     #108,D3
08000D52  006C      
08000D54  6708      1561          beq.s     doscan_27
08000D56  0C83 0000 1562          cmp.l     #76,D3
08000D5A  004C      
08000D5C  661A      1563          bne.s     doscan_25
                    1564   doscan_27:
08000D5E  2D7C 0000 1565          move.l    #1,-24(A6)
08000D62  0001 FFE8 
08000D66  206E 000C 1566          move.l    12(A6),A0
08000D6A  52AE 000C 1567          addq.l    #1,12(A6)
08000D6E  1010      1568          move.b    (A0),D0
08000D70  4880      1569          ext.w     D0
08000D72  48C0      1570          ext.l     D0
08000D74  2600      1571          move.l    D0,D3
08000D76  6020      1572          bra.s     doscan_28
                    1573   doscan_25:
08000D78  0C83 0000 1574          cmp.l     #104,D3
08000D7C  0068      
08000D7E  6618      1575          bne.s     doscan_28
08000D80  2D7C 0000 1576          move.l    #1,-20(A6)
08000D84  0001 FFEC 
08000D88  206E 000C 1577          move.l    12(A6),A0
08000D8C  52AE 000C 1578          addq.l    #1,12(A6)
08000D90  1010      1579          move.b    (A0),D0
08000D92  4880      1580          ext.w     D0
08000D94  48C0      1581          ext.l     D0
08000D96  2600      1582          move.l    D0,D3
                    1583   doscan_28:
08000D98  0C83 0000 1584          cmp.l     #91,D3
08000D9C  005B      
08000D9E  6600 0038 1585          bne       doscan_30
08000DA2  4A86      1586          tst.l     D6
08000DA4  660A      1587          bne.s     doscan_32
08000DA6  206E 0010 1588          move.l    16(A6),A0
08000DAA  58AE 0010 1589          addq.l    #4,16(A6)
08000DAE  2E10      1590          move.l    (A0),D7
                    1591   doscan_32:
08000DB0  486E FFE4 1592          pea       -28(A6)
08000DB4  2F07      1593          move.l    D7,-(A7)
08000DB6  2F06      1594          move.l    D6,-(A7)
08000DB8  2F0A      1595          move.l    A2,-(A7)
08000DBA  2F2E 000C 1596          move.l    12(A6),-(A7)
08000DBE  2F05      1597          move.l    D5,-(A7)
08000DC0  4EB9 0800 1598          jsr       @doscan_select
08000DC4  0A6C      
08000DC6  DEFC 0018 1599          add.w     #24,A7
08000DCA  2D40 000C 1600          move.l    D0,12(A6)
08000DCE  4A86      1601          tst.l     D6
08000DD0  6602      1602          bne.s     doscan_34
08000DD2  5284      1603          addq.l    #1,D4
                    1604   doscan_34:
08000DD4  6000 0474 1605          bra       doscan_141
                    1606   doscan_30:
08000DD8  0C83 0000 1607          cmp.l     #110,D3
08000DDC  006E      
08000DDE  661A      1608          bne.s     doscan_36
08000DE0  4A86      1609          tst.l     D6
08000DE2  6612      1610          bne.s     doscan_38
08000DE4  206E 0010 1611          move.l    16(A6),A0
08000DE8  58AE 0010 1612          addq.l    #4,16(A6)
08000DEC  2E10      1613          move.l    (A0),D7
08000DEE  2047      1614          move.l    D7,A0
08000DF0  20AE FFE4 1615          move.l    -28(A6),(A0)
08000DF4  5284      1616          addq.l    #1,D4
                    1617   doscan_38:
08000DF6  6000 0452 1618          bra       doscan_141
                    1619   doscan_36:
08000DFA  0C83 0000 1620          cmp.l     #115,D3
08000DFE  0073      
08000E00  6600 00C4 1621          bne       doscan_40
08000E04  486E FFE4 1622          pea       -28(A6)
08000E08  2F05      1623          move.l    D5,-(A7)
08000E0A  4EB9 0800 1624          jsr       @doscan_space
08000E0E  0A36      
08000E10  504F      1625          addq.w    #8,A7
08000E12  2400      1626          move.l    D0,D2
08000E14  4A86      1627          tst.l     D6
08000E16  660A      1628          bne.s     doscan_42
08000E18  206E 0010 1629          move.l    16(A6),A0
08000E1C  58AE 0010 1630          addq.l    #4,16(A6)
08000E20  2E10      1631          move.l    (A0),D7
                    1632   doscan_42:
08000E22  52AE FFE4 1633          addq.l    #1,-28(A6)
                    1634   doscan_44:
08000E26  200A      1635          move.l    A2,D0
08000E28  534A      1636          subq.w    #1,A2
08000E2A  4A80      1637          tst.l     D0
08000E2C  6700 0048 1638          beq       doscan_46
08000E30  2002      1639          move.l    D2,D0
08000E32  5280      1640          addq.l    #1,D0
08000E34  41F9 0800 1641          lea       __ctype.L,A0
08000E38  1EE6      
08000E3A  1030 0800 1642          move.b    0(A0,D0.L),D0
08000E3E  C03C 0010 1643          and.b     #16,D0
08000E42  6604      1644          bne.s     doscan_47
08000E44  7001      1645          moveq     #1,D0
08000E46  6002      1646          bra.s     doscan_48
                    1647   doscan_47:
08000E48  4280      1648          clr.l     D0
                    1649   doscan_48:
08000E4A  C0BC 0000 1650          and.l     #255,D0
08000E4E  00FF      
08000E50  6724      1651          beq.s     doscan_46
08000E52  0C82 FFFF 1652          cmp.l     #-1,D2
08000E56  FFFF      
08000E58  671C      1653          beq.s     doscan_46
08000E5A  387C 0001 1654          move.w    #1,A4
08000E5E  4A86      1655          tst.l     D6
08000E60  6606      1656          bne.s     doscan_49
08000E62  2047      1657          move.l    D7,A0
08000E64  5287      1658          addq.l    #1,D7
08000E66  1082      1659          move.b    D2,(A0)
                    1660   doscan_49:
08000E68  2F05      1661          move.l    D5,-(A7)
08000E6A  4E93      1662          jsr       (A3)
08000E6C  584F      1663          addq.w    #4,A7
08000E6E  2400      1664          move.l    D0,D2
08000E70  52AE FFE4 1665          addq.l    #1,-28(A6)
08000E74  60B0      1666          bra       doscan_44
                    1667   doscan_46:
08000E76  4A86      1668          tst.l     D6
08000E78  660A      1669          bne.s     doscan_53
08000E7A  2047      1670          move.l    D7,A0
08000E7C  4210      1671          clr.b     (A0)
08000E7E  200C      1672          move.l    A4,D0
08000E80  6702      1673          beq.s     doscan_53
08000E82  5284      1674          addq.l    #1,D4
                    1675   doscan_53:
08000E84  0C82 FFFF 1676          cmp.l     #-1,D2
08000E88  FFFF      
08000E8A  6708      1677          beq.s     doscan_57
08000E8C  4A86      1678          tst.l     D6
08000E8E  6622      1679          bne.s     doscan_55
08000E90  200C      1680          move.l    A4,D0
08000E92  661E      1681          bne.s     doscan_55
                    1682   doscan_57:
08000E94  4A84      1683          tst.l     D4
08000E96  6704      1684          beq.s     doscan_58
08000E98  2004      1685          move.l    D4,D0
08000E9A  6012      1686          bra.s     doscan_61
                    1687   doscan_58:
08000E9C  0C82 FFFF 1688          cmp.l     #-1,D2
08000EA0  FFFF      
08000EA2  6608      1689          bne.s     doscan_60
08000EA4  70FF      1690          moveq     #-1,D0
08000EA6  4880      1691          ext.w     D0
08000EA8  48C0      1692          ext.l     D0
08000EAA  6002      1693          bra.s     doscan_61
                    1694   doscan_60:
08000EAC  2004      1695          move.l    D4,D0
                    1696   doscan_61:
08000EAE  6000 03A0 1697          bra       doscan_15
                    1698   doscan_55:
08000EB2  53AE FFE4 1699          subq.l    #1,-28(A6)
08000EB6  2F02      1700          move.l    D2,-(A7)
08000EB8  2F05      1701          move.l    D5,-(A7)
08000EBA  4EB9 0800 1702          jsr       @doscan_putback
08000EBE  09D2      
08000EC0  504F      1703          addq.w    #8,A7
08000EC2  6000 0386 1704          bra       doscan_141
                    1705   doscan_40:
08000EC6  0C83 0000 1706          cmp.l     #99,D3
08000ECA  0063      
08000ECC  6600 0094 1707          bne       doscan_62
08000ED0  4A86      1708          tst.l     D6
08000ED2  660A      1709          bne.s     doscan_64
08000ED4  206E 0010 1710          move.l    16(A6),A0
08000ED8  58AE 0010 1711          addq.l    #4,16(A6)
08000EDC  2E10      1712          move.l    (A0),D7
                    1713   doscan_64:
08000EDE  2F05      1714          move.l    D5,-(A7)
08000EE0  4E93      1715          jsr       (A3)
08000EE2  584F      1716          addq.w    #4,A7
08000EE4  2400      1717          move.l    D0,D2
08000EE6  52AE FFE4 1718          addq.l    #1,-28(A6)
08000EEA  200A      1719          move.l    A2,D0
08000EEC  0C80 0000 1720          cmp.l     #32767,D0
08000EF0  7FFF      
08000EF2  6604      1721          bne.s     doscan_66
08000EF4  347C 0001 1722          move.w    #1,A2
                    1723   doscan_66:
08000EF8  0C82 FFFF 1724          cmp.l     #-1,D2
08000EFC  FFFF      
08000EFE  6606      1725          bne.s     doscan_68
08000F00  4A86      1726          tst.l     D6
08000F02  6602      1727          bne.s     doscan_68
08000F04  5384      1728          subq.l    #1,D4
                    1729   doscan_68:
08000F06  200A      1730          move.l    A2,D0
08000F08  534A      1731          subq.w    #1,A2
08000F0A  4A80      1732          tst.l     D0
08000F0C  6720      1733          beq.s     doscan_72
08000F0E  0C82 FFFF 1734          cmp.l     #-1,D2
08000F12  FFFF      
08000F14  6718      1735          beq.s     doscan_72
08000F16  4A86      1736          tst.l     D6
08000F18  6606      1737          bne.s     doscan_73
08000F1A  2047      1738          move.l    D7,A0
08000F1C  5287      1739          addq.l    #1,D7
08000F1E  1082      1740          move.b    D2,(A0)
                    1741   doscan_73:
08000F20  2F05      1742          move.l    D5,-(A7)
08000F22  4E93      1743          jsr       (A3)
08000F24  584F      1744          addq.w    #4,A7
08000F26  2400      1745          move.l    D0,D2
08000F28  52AE FFE4 1746          addq.l    #1,-28(A6)
08000F2C  60D8      1747          bra       doscan_68
                    1748   doscan_72:
08000F2E  0C82 FFFF 1749          cmp.l     #-1,D2
08000F32  FFFF      
08000F34  6612      1750          bne.s     doscan_75
08000F36  4A84      1751          tst.l     D4
08000F38  6704      1752          beq.s     doscan_77
08000F3A  2004      1753          move.l    D4,D0
08000F3C  6006      1754          bra.s     doscan_78
                    1755   doscan_77:
08000F3E  70FF      1756          moveq     #-1,D0
08000F40  4880      1757          ext.w     D0
08000F42  48C0      1758          ext.l     D0
                    1759   doscan_78:
08000F44  6000 030A 1760          bra       doscan_15
                    1761   doscan_75:
08000F48  4A86      1762          tst.l     D6
08000F4A  6602      1763          bne.s     doscan_79
08000F4C  5284      1764          addq.l    #1,D4
                    1765   doscan_79:
08000F4E  53AE FFE4 1766          subq.l    #1,-28(A6)
08000F52  2F02      1767          move.l    D2,-(A7)
08000F54  2F05      1768          move.l    D5,-(A7)
08000F56  4EB9 0800 1769          jsr       @doscan_putback
08000F5A  09D2      
08000F5C  504F      1770          addq.w    #8,A7
08000F5E  6000 02EA 1771          bra       doscan_141
                    1772   doscan_62:
08000F62  0C83 0000 1773          cmp.l     #105,D3
08000F66  0069      
08000F68  6600 0068 1774          bne       doscan_84
08000F6C  486E FFE4 1775          pea       -28(A6)
08000F70  2F05      1776          move.l    D5,-(A7)
08000F72  4EB9 0800 1777          jsr       @doscan_space
08000F76  0A36      
08000F78  504F      1778          addq.w    #8,A7
08000F7A  2400      1779          move.l    D0,D2
08000F7C  0C82 0000 1780          cmp.l     #48,D2
08000F80  0030      
08000F82  6600 003C 1781          bne       doscan_83
08000F86  387C 0001 1782          move.w    #1,A4
08000F8A  2F05      1783          move.l    D5,-(A7)
08000F8C  4E93      1784          jsr       (A3)
08000F8E  584F      1785          addq.w    #4,A7
08000F90  2400      1786          move.l    D0,D2
08000F92  2F02      1787          move.l    D2,-(A7)
08000F94  4EB9 0800 1788          jsr       _tolower
08000F98  139E      
08000F9A  584F      1789          addq.w    #4,A7
08000F9C  0C80 0000 1790          cmp.l     #120,D0
08000FA0  0078      
08000FA2  6604      1791          bne.s     doscan_85
08000FA4  7678      1792          moveq     #120,D3
08000FA6  6012      1793          bra.s     doscan_86
                    1794   doscan_85:
08000FA8  53AE FFE4 1795          subq.l    #1,-28(A6)
08000FAC  2F02      1796          move.l    D2,-(A7)
08000FAE  2F05      1797          move.l    D5,-(A7)
08000FB0  4EB9 0800 1798          jsr       @doscan_putback
08000FB4  09D2      
08000FB6  504F      1799          addq.w    #8,A7
08000FB8  766F      1800          moveq     #111,D3
                    1801   doscan_86:
08000FBA  52AE FFE4 1802          addq.l    #1,-28(A6)
08000FBE  6012      1803          bra.s     doscan_84
                    1804   doscan_83:
08000FC0  53AE FFE4 1805          subq.l    #1,-28(A6)
08000FC4  2F02      1806          move.l    D2,-(A7)
08000FC6  2F05      1807          move.l    D5,-(A7)
08000FC8  4EB9 0800 1808          jsr       @doscan_putback
08000FCC  09D2      
08000FCE  504F      1809          addq.w    #8,A7
08000FD0  7664      1810          moveq     #100,D3
                    1811   doscan_84:
08000FD2  0C83 0000 1812          cmp.l     #100,D3
08000FD6  0064      
08000FD8  671A      1813          beq.s     doscan_89
08000FDA  0C83 0000 1814          cmp.l     #117,D3
08000FDE  0075      
08000FE0  6712      1815          beq.s     doscan_89
08000FE2  0C83 0000 1816          cmp.l     #120,D3
08000FE6  0078      
08000FE8  670A      1817          beq.s     doscan_89
08000FEA  0C83 0000 1818          cmp.l     #111,D3
08000FEE  006F      
08000FF0  6600 01CE 1819          bne       doscan_87
                    1820   doscan_89:
08000FF4  486E FFE4 1821          pea       -28(A6)
08000FF8  2F05      1822          move.l    D5,-(A7)
08000FFA  4EB9 0800 1823          jsr       @doscan_space
08000FFE  0A36      
08001000  504F      1824          addq.w    #8,A7
08001002  2400      1825          move.l    D0,D2
08001004  2D7C 0000 1826          move.l    #10,-4(A6)
08001008  000A FFFC 
0800100C  0C83 0000 1827          cmp.l     #120,D3
08001010  0078      
08001012  6608      1828          bne.s     doscan_90
08001014  2D7C 0000 1829          move.l    #16,-4(A6)
08001018  0010 FFFC 
                    1830   doscan_90:
0800101C  0C83 0000 1831          cmp.l     #111,D3
08001020  006F      
08001022  6608      1832          bne.s     doscan_92
08001024  2D7C 0000 1833          move.l    #8,-4(A6)
08001028  0008 FFFC 
                    1834   doscan_92:
0800102C  4A86      1835          tst.l     D6
0800102E  660A      1836          bne.s     doscan_94
08001030  206E 0010 1837          move.l    16(A6),A0
08001034  58AE 0010 1838          addq.l    #4,16(A6)
08001038  2E10      1839          move.l    (A0),D7
                    1840   doscan_94:
0800103A  42AE FFE0 1841          clr.l     -32(A6)
0800103E  52AE FFE4 1842          addq.l    #1,-28(A6)
08001042  0C83 0000 1843          cmp.l     #117,D3
08001046  0075      
08001048  6720      1844          beq.s     doscan_96
0800104A  0C82 0000 1845          cmp.l     #45,D2
0800104E  002D      
08001050  6618      1846          bne.s     doscan_96
08001052  2F05      1847          move.l    D5,-(A7)
08001054  4E93      1848          jsr       (A3)
08001056  584F      1849          addq.w    #4,A7
08001058  2400      1850          move.l    D0,D2
0800105A  52AE FFE4 1851          addq.l    #1,-28(A6)
0800105E  2D7C 0000 1852          move.l    #1,-32(A6)
08001062  0001 FFE0 
08001066  387C 0001 1853          move.w    #1,A4
                    1854   doscan_96:
0800106A  3A7C 0000 1855          move.w    #0,A5
0800106E  0C82 FFFF 1856          cmp.l     #-1,D2
08001072  FFFF      
08001074  6612      1857          bne.s     doscan_98
08001076  4A84      1858          tst.l     D4
08001078  6704      1859          beq.s     doscan_100
0800107A  2004      1860          move.l    D4,D0
0800107C  6006      1861          bra.s     doscan_101
                    1862   doscan_100:
0800107E  70FF      1863          moveq     #-1,D0
08001080  4880      1864          ext.w     D0
08001082  48C0      1865          ext.l     D0
                    1866   doscan_101:
08001084  6000 01CA 1867          bra       doscan_15
                    1868   doscan_98:
08001088  200A      1869          move.l    A2,D0
0800108A  534A      1870          subq.w    #1,A2
0800108C  4A80      1871          tst.l     D0
0800108E  6700 00AA 1872          beq       doscan_104
08001092  0C83 0000 1873          cmp.l     #120,D3
08001096  0078      
08001098  6624      1874          bne.s     doscan_106
0800109A  2F02      1875          move.l    D2,-(A7)
0800109C  4EB9 0800 1876          jsr       _toupper
080010A0  13D0      
080010A2  584F      1877          addq.w    #4,A7
080010A4  0C80 0000 1878          cmp.l     #65,D0
080010A8  0041      
080010AA  6D12      1879          blt.s     doscan_106
080010AC  2F02      1880          move.l    D2,-(A7)
080010AE  4EB9 0800 1881          jsr       _toupper
080010B2  13D0      
080010B4  584F      1882          addq.w    #4,A7
080010B6  0C80 0000 1883          cmp.l     #70,D0
080010BA  0046      
080010BC  6F1C      1884          ble.s     doscan_105
                    1885   doscan_106:
080010BE  2002      1886          move.l    D2,D0
080010C0  5280      1887          addq.l    #1,D0
080010C2  41F9 0800 1888          lea       __ctype.L,A0
080010C6  1EE6      
080010C8  1030 0800 1889          move.b    0(A0,D0.L),D0
080010CC  C03C 0004 1890          and.b     #4,D0
080010D0  C0BC 0000 1891          and.l     #255,D0
080010D4  00FF      
080010D6  6700 0062 1892          beq       doscan_104
                    1893   doscan_105:
080010DA  2002      1894          move.l    D2,D0
080010DC  5280      1895          addq.l    #1,D0
080010DE  41F9 0800 1896          lea       __ctype.L,A0
080010E2  1EE6      
080010E4  1030 0800 1897          move.b    0(A0,D0.L),D0
080010E8  C03C 0004 1898          and.b     #4,D0
080010EC  661E      1899          bne.s     doscan_107
080010EE  2F02      1900          move.l    D2,-(A7)
080010F0  4EB9 0800 1901          jsr       _toupper
080010F4  13D0      
080010F6  584F      1902          addq.w    #4,A7
080010F8  0480 0000 1903          sub.l     #65,D0
080010FC  0041      
080010FE  0680 0000 1904          add.l     #10,D0
08001102  000A      
08001104  0680 0000 1905          add.l     #48,D0
08001108  0030      
0800110A  2400      1906          move.l    D0,D2
                    1907   doscan_107:
0800110C  2F0D      1908          move.l    A5,-(A7)
0800110E  2F2E FFFC 1909          move.l    -4(A6),-(A7)
08001112  4EB9 0800 1910          jsr       LMUL
08001116  129A      
08001118  2017      1911          move.l    (A7),D0
0800111A  504F      1912          addq.w    #8,A7
0800111C  D082      1913          add.l     D2,D0
0800111E  0480 0000 1914          sub.l     #48,D0
08001122  0030      
08001124  2A40      1915          move.l    D0,A5
08001126  2F05      1916          move.l    D5,-(A7)
08001128  4E93      1917          jsr       (A3)
0800112A  584F      1918          addq.w    #4,A7
0800112C  2400      1919          move.l    D0,D2
0800112E  52AE FFE4 1920          addq.l    #1,-28(A6)
08001132  387C 0001 1921          move.w    #1,A4
08001136  6000 FF50 1922          bra       doscan_98
                    1923   doscan_104:
0800113A  0C82 FFFF 1924          cmp.l     #-1,D2
0800113E  FFFF      
08001140  671C      1925          beq.s     doscan_109
08001142  2F02      1926          move.l    D2,-(A7)
08001144  2F05      1927          move.l    D5,-(A7)
08001146  4EB9 0800 1928          jsr       @doscan_putback
0800114A  09D2      
0800114C  504F      1929          addq.w    #8,A7
0800114E  53AE FFE4 1930          subq.l    #1,-28(A6)
08001152  200C      1931          move.l    A4,D0
08001154  6606      1932          bne.s     doscan_111
08001156  2004      1933          move.l    D4,D0
08001158  6000 00F6 1934          bra       doscan_15
                    1935   doscan_111:
0800115C  6016      1936          bra.s     doscan_113
                    1937   doscan_109:
0800115E  200C      1938          move.l    A4,D0
08001160  6612      1939          bne.s     doscan_113
08001162  4A84      1940          tst.l     D4
08001164  6704      1941          beq.s     doscan_115
08001166  2004      1942          move.l    D4,D0
08001168  6006      1943          bra.s     doscan_116
                    1944   doscan_115:
0800116A  70FF      1945          moveq     #-1,D0
0800116C  4880      1946          ext.w     D0
0800116E  48C0      1947          ext.l     D0
                    1948   doscan_116:
08001170  6000 00DE 1949          bra       doscan_15
                    1950   doscan_113:
08001174  4AAE FFE0 1951          tst.l     -32(A6)
08001178  6706      1952          beq.s     doscan_117
0800117A  200D      1953          move.l    A5,D0
0800117C  4480      1954          neg.l     D0
0800117E  2A40      1955          move.l    D0,A5
                    1956   doscan_117:
08001180  4A86      1957          tst.l     D6
08001182  661E      1958          bne.s     doscan_119
08001184  4AAE FFE8 1959          tst.l     -24(A6)
08001188  6706      1960          beq.s     doscan_121
0800118A  2047      1961          move.l    D7,A0
0800118C  208D      1962          move.l    A5,(A0)
0800118E  6010      1963          bra.s     doscan_124
                    1964   doscan_121:
08001190  4AAE FFEC 1965          tst.l     -20(A6)
08001194  6706      1966          beq.s     doscan_123
08001196  2047      1967          move.l    D7,A0
08001198  308D      1968          move.w    A5,(A0)
0800119A  6004      1969          bra.s     doscan_124
                    1970   doscan_123:
0800119C  2047      1971          move.l    D7,A0
0800119E  208D      1972          move.l    A5,(A0)
                    1973   doscan_124:
080011A0  5284      1974          addq.l    #1,D4
                    1975   doscan_119:
080011A2  0C82 FFFF 1976          cmp.l     #-1,D2
080011A6  FFFF      
080011A8  6612      1977          bne.s     doscan_125
080011AA  4A84      1978          tst.l     D4
080011AC  6704      1979          beq.s     doscan_127
080011AE  2004      1980          move.l    D4,D0
080011B0  6006      1981          bra.s     doscan_128
                    1982   doscan_127:
080011B2  70FF      1983          moveq     #-1,D0
080011B4  4880      1984          ext.w     D0
080011B6  48C0      1985          ext.l     D0
                    1986   doscan_128:
080011B8  6000 0096 1987          bra       doscan_15
                    1988   doscan_125:
080011BC  6000 008C 1989          bra       doscan_141
                    1990   doscan_87:
080011C0  0C83 0000 1991          cmp.l     #37,D3
080011C4  0025      
080011C6  6600 0046 1992          bne       doscan_129
080011CA  2F05      1993          move.l    D5,-(A7)
080011CC  4E93      1994          jsr       (A3)
080011CE  584F      1995          addq.w    #4,A7
080011D0  2400      1996          move.l    D0,D2
080011D2  0C82 FFFF 1997          cmp.l     #-1,D2
080011D6  FFFF      
080011D8  6612      1998          bne.s     doscan_131
080011DA  4A84      1999          tst.l     D4
080011DC  6704      2000          beq.s     doscan_133
080011DE  2004      2001          move.l    D4,D0
080011E0  6006      2002          bra.s     doscan_134
                    2003   doscan_133:
080011E2  70FF      2004          moveq     #-1,D0
080011E4  4880      2005          ext.w     D0
080011E6  48C0      2006          ext.l     D0
                    2007   doscan_134:
080011E8  6000 0066 2008          bra       doscan_15
                    2009   doscan_131:
080011EC  52AE FFE4 2010          addq.l    #1,-28(A6)
080011F0  B483      2011          cmp.l     D3,D2
080011F2  6716      2012          beq.s     doscan_135
080011F4  2F02      2013          move.l    D2,-(A7)
080011F6  2F05      2014          move.l    D5,-(A7)
080011F8  4EB9 0800 2015          jsr       @doscan_putback
080011FC  09D2      
080011FE  504F      2016          addq.w    #8,A7
08001200  53AE FFE4 2017          subq.l    #1,-28(A6)
08001204  2004      2018          move.l    D4,D0
08001206  6000 0048 2019          bra       doscan_15
                    2020   doscan_135:
0800120A  6000 003E 2021          bra       doscan_141
                    2022   doscan_129:
0800120E  2F05      2023          move.l    D5,-(A7)
08001210  4E93      2024          jsr       (A3)
08001212  584F      2025          addq.w    #4,A7
08001214  2400      2026          move.l    D0,D2
08001216  52AE FFE4 2027          addq.l    #1,-28(A6)
0800121A  0C82 FFFF 2028          cmp.l     #-1,D2
0800121E  FFFF      
08001220  6610      2029          bne.s     doscan_137
08001222  4A84      2030          tst.l     D4
08001224  6704      2031          beq.s     doscan_139
08001226  2004      2032          move.l    D4,D0
08001228  6006      2033          bra.s     doscan_140
                    2034   doscan_139:
0800122A  70FF      2035          moveq     #-1,D0
0800122C  4880      2036          ext.w     D0
0800122E  48C0      2037          ext.l     D0
                    2038   doscan_140:
08001230  601E      2039          bra.s     doscan_15
                    2040   doscan_137:
08001232  B483      2041          cmp.l     D3,D2
08001234  6714      2042          beq.s     doscan_141
08001236  2F02      2043          move.l    D2,-(A7)
08001238  2F05      2044          move.l    D5,-(A7)
0800123A  4EB9 0800 2045          jsr       @doscan_putback
0800123E  09D2      
08001240  504F      2046          addq.w    #8,A7
08001242  53AE FFE4 2047          subq.l    #1,-28(A6)
08001246  2004      2048          move.l    D4,D0
08001248  6006      2049          bra.s     doscan_15
                    2050   doscan_141:
0800124A  6000 F9D4 2051          bra       doscan_3
                    2052   doscan_5:
0800124E  2004      2053          move.l    D4,D0
                    2054   doscan_15:
08001250  4CDF 3CFC 2055          movem.l   (A7)+,D2/D3/D4/D5/D6/D7/A2/A3/A4/A5
08001254  4E5E      2056          unlk      A6
08001256  4E75      2057          rts
                    2058   _printf:
08001258  4E56 FFFC 2059          link      A6,#-4
0800125C  2F02      2060          move.l    D2,-(A7)
0800125E  41EE 0008 2061          lea       8(A6),A0
08001262  5848      2062          addq.w    #4,A0
08001264  2408      2063          move.l    A0,D2
08001266  2F02      2064          move.l    D2,-(A7)
08001268  2F2E 0008 2065          move.l    8(A6),-(A7)
0800126C  42A7      2066          clr.l     -(A7)
0800126E  4EB9 0800 2067          jsr       _doprint
08001272  14A8      
08001274  DEFC 000C 2068          add.w     #12,A7
08001278  2D40 FFFC 2069          move.l    D0,-4(A6)
0800127C  4282      2070          clr.l     D2
0800127E  202E FFFC 2071          move.l    -4(A6),D0
08001282  241F      2072          move.l    (A7)+,D2
08001284  4E5E      2073          unlk      A6
08001286  4E75      2074          rts
                    2075   ULMUL:
08001288  4E56 0000 2076          link    A6,#0
0800128C  48E7 C000 2077          movem.l D0/D1,-(A7)
08001290  222E 0008 2078          move.l  8(A6),D1
08001294  202E 000C 2079          move.l  12(A6),D0
08001298  602C      2080          bra.s   lmul_3
                    2081   LMUL:
0800129A  4E56 0000 2082          link    A6,#0
0800129E  48E7 C000 2083          movem.l D0/D1,-(A7)
080012A2  222E 0008 2084          move.l  8(A6),D1
080012A6  202E 000C 2085          move.l  12(A6),D0
080012AA  4A80      2086          tst.l   D0
080012AC  6A0A      2087          bpl.s   lmul_1
080012AE  4480      2088          neg.l   D0
080012B0  4A81      2089          tst.l   D1
080012B2  6A0A      2090          bpl.s   lmul_2
080012B4  4481      2091          neg.l   D1
080012B6  600E      2092          bra.s   lmul_3
                    2093   lmul_1:
080012B8  4A81      2094          tst.l   D1
080012BA  6A0A      2095          bpl.s   lmul_3
080012BC  4481      2096          neg.l   D1
                    2097   lmul_2:
080012BE  6114      2098          bsr.s   domul
080012C0  4481      2099          neg.l   D1
080012C2  4080      2100          negx.l  D0
080012C4  6002      2101          bra.s   lmul_4
                    2102   lmul_3:
080012C6  610C      2103          bsr.s   domul
                    2104   lmul_4:
080012C8  2D41 0008 2105          move.l  D1,8(A6)
080012CC  4CDF 0003 2106          movem.l (A7)+,D0/D1
080012D0  4E5E      2107          unlk    A6
080012D2  4E75      2108          rts
                    2109   domul:
080012D4  0C81 0000 2110          cmpi.l  #$FFFF,D1
080012D8  FFFF      
080012DA  620C      2111          bhi.s   domul_1
080012DC  0C80 0000 2112          cmpi.l  #$FFFF,D0
080012E0  FFFF      
080012E2  620E      2113          bhi.s   domul_2
080012E4  C2C0      2114          mulu    D0,D1
080012E6  4E75      2115          rts
                    2116   domul_1:
080012E8  0C80 0000 2117          cmpi.l  #$FFFF,D0
080012EC  FFFF      
080012EE  6218      2118          bhi.s   domul_4
080012F0  6002      2119          bra.s   domul_3
                    2120   domul_2
080012F2  C141      2121          exg     D0,D1
                    2122   domul_3:
080012F4  2F02      2123          move.l  D2,-(A7)
080012F6  2401      2124          move.l  D1,D2
080012F8  4842      2125          swap    D2
080012FA  C2C0      2126          mulu    D0,D1
080012FC  C4C0      2127          mulu    D0,D2
080012FE  4842      2128          swap    D2
08001300  4242      2129          clr.w   D2
08001302  D282      2130          add.l   D2,D1
08001304  241F      2131          move.l  (A7)+,D2
08001306  4E75      2132          rts
                    2133   domul_4:
08001308  48E7 3000 2134          movem.l D2/D3,-(A7)
0800130C  2401      2135          move.l  D1,D2
0800130E  2601      2136          move.l  D1,D3
08001310  C2C0      2137          mulu    D0,D1
08001312  4842      2138          swap    D2
08001314  C4C0      2139          mulu    D0,D2
08001316  4840      2140          swap    D0
08001318  C6C0      2141          mulu    D0,D3
0800131A  D483      2142          add.l   D3,D2
0800131C  4842      2143          swap    D2
0800131E  4242      2144          clr.w   D2
08001320  D282      2145          add.l   D2,D1
08001322  4CDF 000C 2146          movem.l (A7)+,D2/D3
08001326  4E75      2147          rts
                    2148   _gets:
08001328  4E56 0000 2149          link      A6,#0
0800132C  48E7 3820 2150          movem.l   D2/D3/D4/A2,-(A7)
08001330  45F9 0800 2151          lea       _putch.L,A2
08001334  1AD8      
08001336  282E 0008 2152          move.l    8(A6),D4
0800133A  2404      2153          move.l    D4,D2
                    2154   gets_1:
0800133C  4EB9 0800 2155          jsr       _getch
08001340  1B08      
08001342  2600      2156          move.l    D0,D3
08001344  0C80 0000 2157          cmp.l     #10,D0
08001348  000A      
0800134A  6700 003C 2158          beq       gets_3
0800134E  0C83 0000 2159          cmp.l     #8,D3
08001352  0008      
08001354  6712      2160          beq.s     gets_4
08001356  2042      2161          move.l    D2,A0
08001358  5282      2162          addq.l    #1,D2
0800135A  1083      2163          move.b    D3,(A0)
0800135C  4883      2164          ext.w     D3
0800135E  48C3      2165          ext.l     D3
08001360  2F03      2166          move.l    D3,-(A7)
08001362  4E92      2167          jsr       (A2)
08001364  584F      2168          addq.w    #4,A7
08001366  601E      2169          bra.s     gets_6
                    2170   gets_4:
08001368  B484      2171          cmp.l     D4,D2
0800136A  631A      2172          bls.s     gets_6
0800136C  4878 0008 2173          pea       8
08001370  4E92      2174          jsr       (A2)
08001372  584F      2175          addq.w    #4,A7
08001374  4878 0020 2176          pea       32
08001378  4E92      2177          jsr       (A2)
0800137A  584F      2178          addq.w    #4,A7
0800137C  4878 0008 2179          pea       8
08001380  4E92      2180          jsr       (A2)
08001382  584F      2181          addq.w    #4,A7
08001384  5382      2182          subq.l    #1,D2
                    2183   gets_6:
08001386  60B4      2184          bra       gets_1
                    2185   gets_3:
08001388  4878 000A 2186          pea       10
0800138C  4E92      2187          jsr       (A2)
0800138E  584F      2188          addq.w    #4,A7
08001390  2042      2189          move.l    D2,A0
08001392  4210      2190          clr.b     (A0)
08001394  2004      2191          move.l    D4,D0
08001396  4CDF 041C 2192          movem.l   (A7)+,D2/D3/D4/A2
0800139A  4E5E      2193          unlk      A6
0800139C  4E75      2194          rts
                    2195   _tolower:
0800139E  202F 0004 2196          move.l    4(A7),D0
080013A2  0C80 0000 2197          cmp.l     #'A',D0
080013A6  0041      
080013A8  6D0E      2198          blt.s     tolower_1
080013AA  0C80 0000 2199          cmp.l     #'Z',D0
080013AE  005A      
080013B0  6E06      2200          bgt.s     tolower_1
080013B2  0680 0000 2201          add.l     #$20,D0
080013B6  0020      
                    2202   tolower_1:
080013B8  4E75      2203          rts
                    2204   _strcat:
080013BA  206F 0004 2205          move.l    (4,A7),A0
080013BE  226F 0008 2206          move.l    (8,A7),A1
080013C2  2008      2207          move.l    A0,D0
                    2208   strcat_1:
080013C4  4A18      2209          tst.b     (A0)+
080013C6  66FC      2210          bne.s     strcat_1
080013C8  5388      2211          subq.l    #1,A0
                    2212   strcat_2:
080013CA  10D9      2213          move.b    (A1)+,(A0)+
080013CC  66FC      2214          bne.s     strcat_2
080013CE  4E75      2215          rts
                    2216   _toupper:
080013D0  202F 0004 2217          move.l    4(A7),D0
080013D4  0C80 0000 2218          cmp.l     #'a',D0
080013D8  0061      
080013DA  6D0E      2219          blt.s     toupper_1
080013DC  0C80 0000 2220          cmp.l     #'z',D0
080013E0  007A      
080013E2  6E06      2221          bgt.s     toupper_1
080013E4  0480 0000 2222          sub.l     #$20,D0
080013E8  0020      
                    2223   toupper_1:
080013EA  4E75      2224          rts
                    2225   _ungetch:
080013EC  4E56 0000 2226          link      A6,#0
080013F0  23EE 0008 2227          move.l    8(A6),__ungetbuf.L
080013F4  0800 1FF4 
080013F8  202E 0008 2228          move.l    8(A6),D0
080013FC  4E5E      2229          unlk      A6
080013FE  4E75      2230          rts
                    2231   @doprint_copy:
08001400  4E56 0000 2232          link      A6,#0
08001404  206E 0008 2233          move.l    8(A6),A0
08001408  4A90      2234          tst.l     (A0)
0800140A  6710      2235          beq.s     @doprint_copy_1
0800140C  202E 000C 2236          move.l    12(A6),D0
08001410  206E 0008 2237          move.l    8(A6),A0
08001414  2250      2238          move.l    (A0),A1
08001416  5290      2239          addq.l    #1,(A0)
08001418  1280      2240          move.b    D0,(A1)
0800141A  600C      2241          bra.s     @doprint_copy_2
                    2242   @doprint_copy_1:
0800141C  2F2E 000C 2243          move.l    12(A6),-(A7)
08001420  4EB9 0800 2244          jsr       _putch
08001424  1AD8      
08001426  584F      2245          addq.w    #4,A7
                    2246   @doprint_copy_2:
08001428  4E5E      2247          unlk      A6
0800142A  4E75      2248          rts
                    2249   @doprint_getval:
0800142C  4E56 0000 2250          link      A6,#0
08001430  48E7 3000 2251          movem.l   D2/D3,-(A7)
08001434  262E 0008 2252          move.l    8(A6),D3
08001438  4282      2253          clr.l     D2
0800143A  2043      2254          move.l    D3,A0
0800143C  2050      2255          move.l    (A0),A0
0800143E  1010      2256          move.b    (A0),D0
08001440  0C00 002A 2257          cmp.b     #42,D0
08001444  6612      2258          bne.s     @doprint_getval_1
08001446  206E 000C 2259          move.l    12(A6),A0
0800144A  2250      2260          move.l    (A0),A1
0800144C  5890      2261          addq.l    #4,(A0)
0800144E  2411      2262          move.l    (A1),D2
08001450  2043      2263          move.l    D3,A0
08001452  5290      2264          addq.l    #1,(A0)
08001454  6000 0048 2265          bra       @doprint_getval_5
                    2266   @doprint_getval_1:
08001458  7001      2267          moveq     #1,D0
0800145A  2043      2268          move.l    D3,A0
0800145C  2050      2269          move.l    (A0),A0
0800145E  1210      2270          move.b    (A0),D1
08001460  4881      2271          ext.w     D1
08001462  48C1      2272          ext.l     D1
08001464  D081      2273          add.l     D1,D0
08001466  41F9 0800 2274          lea       __ctype.L,A0
0800146A  1EE6      
0800146C  1030 0800 2275          move.b    0(A0,D0.L),D0
08001470  C03C 0004 2276          and.b     #4,D0
08001474  6728      2277          beq.s     @doprint_getval_5
08001476  2F02      2278          move.l    D2,-(A7)
08001478  4878 000A 2279          pea       10
0800147C  4EB9 0800 2280          jsr       LMUL
08001480  129A      
08001482  2017      2281          move.l    (A7),D0
08001484  504F      2282          addq.w    #8,A7
08001486  2043      2283          move.l    D3,A0
08001488  2250      2284          move.l    (A0),A1
0800148A  5290      2285          addq.l    #1,(A0)
0800148C  1211      2286          move.b    (A1),D1
0800148E  4881      2287          ext.w     D1
08001490  48C1      2288          ext.l     D1
08001492  D081      2289          add.l     D1,D0
08001494  0480 0000 2290          sub.l     #48,D0
08001498  0030      
0800149A  2400      2291          move.l    D0,D2
0800149C  60BA      2292          bra       @doprint_getval_1
                    2293   @doprint_getval_5:
0800149E  2002      2294          move.l    D2,D0
080014A0  4CDF 000C 2295          movem.l   (A7)+,D2/D3
080014A4  4E5E      2296          unlk      A6
080014A6  4E75      2297          rts
                    2298   _doprint:
080014A8  4E56 FFCC 2299          link      A6,#-52
080014AC  48E7 3F3C 2300          movem.l   D2/D3/D4/D5/D6/D7/A2/A3/A4/A5,-(A7)
080014B0  45EE 0008 2301          lea       8(A6),A2
080014B4  47F9 0800 2302          lea       @doprint_copy.L,A3
080014B8  1400      
080014BA  49F9 0800 2303          lea       _ultoa.L,A4
080014BE  1C4C      
080014C0  4286      2304          clr.l     D6
                    2305   doprint_1:
080014C2  206E 000C 2306          move.l    12(A6),A0
080014C6  4A10      2307          tst.b     (A0)
080014C8  6700 05F0 2308          beq       doprint_3
080014CC  206E 000C 2309          move.l    12(A6),A0
080014D0  1010      2310          move.b    (A0),D0
080014D2  0C00 0025 2311          cmp.b     #37,D0
080014D6  671C      2312          beq.s     doprint_4
080014D8  206E 000C 2313          move.l    12(A6),A0
080014DC  52AE 000C 2314          addq.l    #1,12(A6)
080014E0  1210      2315          move.b    (A0),D1
080014E2  4881      2316          ext.w     D1
080014E4  48C1      2317          ext.l     D1
080014E6  2F01      2318          move.l    D1,-(A7)
080014E8  2F0A      2319          move.l    A2,-(A7)
080014EA  4E93      2320          jsr       (A3)
080014EC  504F      2321          addq.w    #8,A7
080014EE  5286      2322          addq.l    #1,D6
080014F0  6000 05C4 2323          bra       doprint_2
                    2324   doprint_4:
080014F4  52AE 000C 2325          addq.l    #1,12(A6)
080014F8  422E FFD3 2326          clr.b     -45(A6)
080014FC  422E FFD2 2327          clr.b     -46(A6)
08001500  422E FFD0 2328          clr.b     -48(A6)
08001504  422E FFCF 2329          clr.b     -49(A6)
08001508  422E FFCE 2330          clr.b     -50(A6)
0800150C  422E FFCD 2331          clr.b     -51(A6)
08001510  42AE FFFC 2332          clr.l     -4(A6)
08001514  7AFF      2333          moveq     #-1,D5
08001516  41EE FFDC 2334          lea       -36(A6),A0
0800151A  2608      2335          move.l    A0,D3
0800151C  2408      2336          move.l    A0,D2
                    2337   doprint_6:
0800151E  206E 000C 2338          move.l    12(A6),A0
08001522  1010      2339          move.b    (A0),D0
08001524  4880      2340          ext.w     D0
08001526  48C0      2341          ext.l     D0
08001528  0C80 0000 2342          cmp.l     #43,D0
0800152C  002B      
0800152E  6730      2343          beq.s     doprint_12
08001530  6E18      2344          bgt.s     doprint_15
08001532  0C80 0000 2345          cmp.l     #35,D0
08001536  0023      
08001538  6700 003E 2346          beq       doprint_14
0800153C  6E00 0046 2347          bgt       doprint_9
08001540  0C80 0000 2348          cmp.l     #32,D0
08001544  0020      
08001546  6724      2349          beq.s     doprint_13
08001548  603A      2350          bra.s     doprint_9
                    2351   doprint_15:
0800154A  0C80 0000 2352          cmp.l     #45,D0
0800154E  002D      
08001550  6702      2353          beq.s     doprint_11
08001552  6030      2354          bra.s     doprint_9
                    2355   doprint_11:
08001554  1D7C 0001 2356          move.b    #1,-51(A6)
08001558  FFCD      
0800155A  52AE 000C 2357          addq.l    #1,12(A6)
0800155E  6026      2358          bra.s     doprint_7
                    2359   doprint_12:
08001560  1D7C 0001 2360          move.b    #1,-50(A6)
08001564  FFCE      
08001566  52AE 000C 2361          addq.l    #1,12(A6)
0800156A  601A      2362          bra.s     doprint_7
                    2363   doprint_13:
0800156C  1D7C 0001 2364          move.b    #1,-49(A6)
08001570  FFCF      
08001572  52AE 000C 2365          addq.l    #1,12(A6)
08001576  600E      2366          bra.s     doprint_7
                    2367   doprint_14:
08001578  1D7C 0001 2368          move.b    #1,-48(A6)
0800157C  FFD0      
0800157E  52AE 000C 2369          addq.l    #1,12(A6)
08001582  6002      2370          bra.s     doprint_7
                    2371   doprint_9:
08001584  6002      2372          bra.s     doprint_8
                    2373   doprint_7:
08001586  6096      2374          bra       doprint_6
                    2375   doprint_8:
08001588  206E 000C 2376          move.l    12(A6),A0
0800158C  1010      2377          move.b    (A0),D0
0800158E  0C00 0030 2378          cmp.b     #48,D0
08001592  660A      2379          bne.s     doprint_16
08001594  52AE 000C 2380          addq.l    #1,12(A6)
08001598  1D7C 0001 2381          move.b    #1,-46(A6)
0800159C  FFD2      
                    2382   doprint_16:
0800159E  486E 0010 2383          pea       16(A6)
080015A2  486E 000C 2384          pea       12(A6)
080015A6  4EB9 0800 2385          jsr       @doprint_getval
080015AA  142C      
080015AC  504F      2386          addq.w    #8,A7
080015AE  2A40      2387          move.l    D0,A5
080015B0  206E 000C 2388          move.l    12(A6),A0
080015B4  1010      2389          move.b    (A0),D0
080015B6  0C00 002E 2390          cmp.b     #46,D0
080015BA  6616      2391          bne.s     doprint_18
080015BC  52AE 000C 2392          addq.l    #1,12(A6)
080015C0  486E 0010 2393          pea       16(A6)
080015C4  486E 000C 2394          pea       12(A6)
080015C8  4EB9 0800 2395          jsr       @doprint_getval
080015CC  142C      
080015CE  504F      2396          addq.w    #8,A7
080015D0  2A00      2397          move.l    D0,D5
                    2398   doprint_18:
080015D2  206E 000C 2399          move.l    12(A6),A0
080015D6  1010      2400          move.b    (A0),D0
080015D8  0C00 006C 2401          cmp.b     #108,D0
080015DC  660A      2402          bne.s     doprint_20
080015DE  52AE 000C 2403          addq.l    #1,12(A6)
080015E2  1D7C 0001 2404          move.b    #1,-45(A6)
080015E6  FFD3      
                    2405   doprint_20:
080015E8  206E 000C 2406          move.l    12(A6),A0
080015EC  1010      2407          move.b    (A0),D0
080015EE  4880      2408          ext.w     D0
080015F0  48C0      2409          ext.l     D0
080015F2  0C80 0000 2410          cmp.l     #111,D0
080015F6  006F      
080015F8  6700 00D8 2411          beq       doprint_27
080015FC  6E34      2412          bgt.s     doprint_33
080015FE  0C80 0000 2413          cmp.l     #100,D0
08001602  0064      
08001604  6700 0054 2414          beq       doprint_24
08001608  6E1C      2415          bgt.s     doprint_34
0800160A  0C80 0000 2416          cmp.l     #99,D0
0800160E  0063      
08001610  6700 0130 2417          beq       doprint_30
08001614  6E00 0174 2418          bgt       doprint_22
08001618  0C80 0000 2419          cmp.l     #88,D0
0800161C  0058      
0800161E  6700 00EA 2420          beq       doprint_28
08001622  6000 0166 2421          bra       doprint_22
                    2422   doprint_34:
08001626  0C80 0000 2423          cmp.l     #105,D0
0800162A  0069      
0800162C  672C      2424          beq.s     doprint_24
0800162E  6000 015A 2425          bra       doprint_22
                    2426   doprint_33:
08001632  0C80 0000 2427          cmp.l     #117,D0
08001636  0075      
08001638  6700 0060 2428          beq       doprint_26
0800163C  6E0E      2429          bgt.s     doprint_35
0800163E  0C80 0000 2430          cmp.l     #115,D0
08001642  0073      
08001644  6700 0124 2431          beq       doprint_31
08001648  6000 0140 2432          bra       doprint_22
                    2433   doprint_35:
0800164C  0C80 0000 2434          cmp.l     #120,D0
08001650  0078      
08001652  6700 00B6 2435          beq       doprint_28
08001656  6000 0132 2436          bra       doprint_22
                    2437   doprint_24:
0800165A  4A2E FFD3 2438          tst.b     -45(A6)
0800165E  671C      2439          beq.s     doprint_36
08001660  4878 000A 2440          pea       10
08001664  2F03      2441          move.l    D3,-(A7)
08001666  206E 0010 2442          move.l    16(A6),A0
0800166A  58AE 0010 2443          addq.l    #4,16(A6)
0800166E  2F10      2444          move.l    (A0),-(A7)
08001670  4EB9 0800 2445          jsr       _ltoa
08001674  1BC4      
08001676  DEFC 000C 2446          add.w     #12,A7
0800167A  601A      2447          bra.s     doprint_37
                    2448   doprint_36:
0800167C  4878 000A 2449          pea       10
08001680  2F03      2450          move.l    D3,-(A7)
08001682  206E 0010 2451          move.l    16(A6),A0
08001686  58AE 0010 2452          addq.l    #4,16(A6)
0800168A  2F10      2453          move.l    (A0),-(A7)
0800168C  4EB9 0800 2454          jsr       _ltoa
08001690  1BC4      
08001692  DEFC 000C 2455          add.w     #12,A7
                    2456   doprint_37:
08001696  6000 0100 2457          bra       doprint_23
                    2458   doprint_26:
0800169A  4A2E FFD3 2459          tst.b     -45(A6)
0800169E  6718      2460          beq.s     doprint_38
080016A0  4878 000A 2461          pea       10
080016A4  2F03      2462          move.l    D3,-(A7)
080016A6  206E 0010 2463          move.l    16(A6),A0
080016AA  58AE 0010 2464          addq.l    #4,16(A6)
080016AE  2F10      2465          move.l    (A0),-(A7)
080016B0  4E94      2466          jsr       (A4)
080016B2  DEFC 000C 2467          add.w     #12,A7
080016B6  6016      2468          bra.s     doprint_39
                    2469   doprint_38:
080016B8  4878 000A 2470          pea       10
080016BC  2F03      2471          move.l    D3,-(A7)
080016BE  206E 0010 2472          move.l    16(A6),A0
080016C2  58AE 0010 2473          addq.l    #4,16(A6)
080016C6  2F10      2474          move.l    (A0),-(A7)
080016C8  4E94      2475          jsr       (A4)
080016CA  DEFC 000C 2476          add.w     #12,A7
                    2477   doprint_39:
080016CE  6000 00C8 2478          bra       doprint_23
                    2479   doprint_27:
080016D2  4A2E FFD3 2480          tst.b     -45(A6)
080016D6  6718      2481          beq.s     doprint_40
080016D8  4878 0008 2482          pea       8
080016DC  2F03      2483          move.l    D3,-(A7)
080016DE  206E 0010 2484          move.l    16(A6),A0
080016E2  58AE 0010 2485          addq.l    #4,16(A6)
080016E6  2F10      2486          move.l    (A0),-(A7)
080016E8  4E94      2487          jsr       (A4)
080016EA  DEFC 000C 2488          add.w     #12,A7
080016EE  6016      2489          bra.s     doprint_41
                    2490   doprint_40:
080016F0  4878 0008 2491          pea       8
080016F4  2F03      2492          move.l    D3,-(A7)
080016F6  206E 0010 2493          move.l    16(A6),A0
080016FA  58AE 0010 2494          addq.l    #4,16(A6)
080016FE  2F10      2495          move.l    (A0),-(A7)
08001700  4E94      2496          jsr       (A4)
08001702  DEFC 000C 2497          add.w     #12,A7
                    2498   doprint_41:
08001706  6000 0090 2499          bra       doprint_23
                    2500   doprint_28:
0800170A  4A2E FFD3 2501          tst.b     -45(A6)
0800170E  6718      2502          beq.s     doprint_42
08001710  4878 0010 2503          pea       16
08001714  2F03      2504          move.l    D3,-(A7)
08001716  206E 0010 2505          move.l    16(A6),A0
0800171A  58AE 0010 2506          addq.l    #4,16(A6)
0800171E  2F10      2507          move.l    (A0),-(A7)
08001720  4E94      2508          jsr       (A4)
08001722  DEFC 000C 2509          add.w     #12,A7
08001726  6016      2510          bra.s     doprint_43
                    2511   doprint_42:
08001728  4878 0010 2512          pea       16
0800172C  2F03      2513          move.l    D3,-(A7)
0800172E  206E 0010 2514          move.l    16(A6),A0
08001732  58AE 0010 2515          addq.l    #4,16(A6)
08001736  2F10      2516          move.l    (A0),-(A7)
08001738  4E94      2517          jsr       (A4)
0800173A  DEFC 000C 2518          add.w     #12,A7
                    2519   doprint_43:
0800173E  6000 0058 2520          bra       doprint_23
                    2521   doprint_30:
08001742  206E 0010 2522          move.l    16(A6),A0
08001746  58AE 0010 2523          addq.l    #4,16(A6)
0800174A  2010      2524          move.l    (A0),D0
0800174C  2042      2525          move.l    D2,A0
0800174E  5282      2526          addq.l    #1,D2
08001750  1080      2527          move.b    D0,(A0)
08001752  2042      2528          move.l    D2,A0
08001754  4210      2529          clr.b     (A0)
08001756  200D      2530          move.l    A5,D0
08001758  6704      2531          beq.s     doprint_44
0800175A  200D      2532          move.l    A5,D0
0800175C  6006      2533          bra.s     doprint_45
                    2534   doprint_44:
0800175E  7001      2535          moveq     #1,D0
08001760  4880      2536          ext.w     D0
08001762  48C0      2537          ext.l     D0
                    2538   doprint_45:
08001764  2A00      2539          move.l    D0,D5
08001766  6000 0030 2540          bra       doprint_23
                    2541   doprint_31:
0800176A  206E 0010 2542          move.l    16(A6),A0
0800176E  58AE 0010 2543          addq.l    #4,16(A6)
08001772  2610      2544          move.l    (A0),D3
08001774  0C85 FFFF 2545          cmp.l     #-1,D5
08001778  FFFF      
0800177A  660C      2546          bne.s     doprint_46
0800177C  2F03      2547          move.l    D3,-(A7)
0800177E  4EB9 0800 2548          jsr       _strlen
08001782  1CB2      
08001784  584F      2549          addq.w    #4,A7
08001786  2A00      2550          move.l    D0,D5
                    2551   doprint_46:
08001788  600E      2552          bra.s     doprint_23
                    2553   doprint_22:
0800178A  206E 000C 2554          move.l    12(A6),A0
0800178E  2242      2555          move.l    D2,A1
08001790  5282      2556          addq.l    #1,D2
08001792  1290      2557          move.b    (A0),(A1)
08001794  2042      2558          move.l    D2,A0
08001796  4210      2559          clr.b     (A0)
                    2560   doprint_23:
08001798  2F03      2561          move.l    D3,-(A7)
0800179A  4EB9 0800 2562          jsr       _strlen
0800179E  1CB2      
080017A0  584F      2563          addq.w    #4,A7
080017A2  1800      2564          move.b    D0,D4
080017A4  206E 000C 2565          move.l    12(A6),A0
080017A8  1010      2566          move.b    (A0),D0
080017AA  0C00 0073 2567          cmp.b     #115,D0
080017AE  661C      2568          bne.s     doprint_48
080017B0  0C85 0000 2569          cmp.l     #0,D5
080017B4  0000      
080017B6  6D14      2570          blt.s     doprint_48
080017B8  4884      2571          ext.w     D4
080017BA  48C4      2572          ext.l     D4
080017BC  B885      2573          cmp.l     D5,D4
080017BE  6F04      2574          ble.s     doprint_50
080017C0  2005      2575          move.l    D5,D0
080017C2  6006      2576          bra.s     doprint_51
                    2577   doprint_50:
080017C4  1004      2578          move.b    D4,D0
080017C6  4880      2579          ext.w     D0
080017C8  48C0      2580          ext.l     D0
                    2581   doprint_51:
080017CA  1800      2582          move.b    D0,D4
                    2583   doprint_48:
080017CC  206E 000C 2584          move.l    12(A6),A0
080017D0  1010      2585          move.b    (A0),D0
080017D2  0C00 0058 2586          cmp.b     #88,D0
080017D6  6600 0028 2587          bne       doprint_56
080017DA  41EE FFDC 2588          lea       -36(A6),A0
080017DE  2408      2589          move.l    A0,D2
                    2590   doprint_54:
080017E0  2042      2591          move.l    D2,A0
080017E2  4A10      2592          tst.b     (A0)
080017E4  671A      2593          beq.s     doprint_56
080017E6  2042      2594          move.l    D2,A0
080017E8  1210      2595          move.b    (A0),D1
080017EA  4881      2596          ext.w     D1
080017EC  48C1      2597          ext.l     D1
080017EE  2F01      2598          move.l    D1,-(A7)
080017F0  4EB9 0800 2599          jsr       _toupper
080017F4  13D0      
080017F6  584F      2600          addq.w    #4,A7
080017F8  2042      2601          move.l    D2,A0
080017FA  1080      2602          move.b    D0,(A0)
080017FC  5282      2603          addq.l    #1,D2
080017FE  60E0      2604          bra       doprint_54
                    2605   doprint_56:
08001800  7E00      2606          moveq     #0,D7
08001802  41EE FFD4 2607          lea       -44(A6),A0
08001806  2408      2608          move.l    A0,D2
08001808  206E 000C 2609          move.l    12(A6),A0
0800180C  1010      2610          move.b    (A0),D0
0800180E  0C00 0064 2611          cmp.b     #100,D0
08001812  670E      2612          beq.s     doprint_59
08001814  206E 000C 2613          move.l    12(A6),A0
08001818  1010      2614          move.b    (A0),D0
0800181A  0C00 0069 2615          cmp.b     #105,D0
0800181E  6600 0068 2616          bne       doprint_65
                    2617   doprint_59:
08001822  102E FFCE 2618          move.b    -50(A6),D0
08001826  4880      2619          ext.w     D0
08001828  48C0      2620          ext.l     D0
0800182A  4A80      2621          tst.l     D0
0800182C  660C      2622          bne.s     doprint_62
0800182E  2043      2623          move.l    D3,A0
08001830  1010      2624          move.b    (A0),D0
08001832  0C00 002D 2625          cmp.b     #45,D0
08001836  6600 0028 2626          bne       doprint_60
                    2627   doprint_62:
0800183A  2043      2628          move.l    D3,A0
0800183C  1010      2629          move.b    (A0),D0
0800183E  0C00 002D 2630          cmp.b     #45,D0
08001842  660E      2631          bne.s     doprint_63
08001844  2043      2632          move.l    D3,A0
08001846  5283      2633          addq.l    #1,D3
08001848  2242      2634          move.l    D2,A1
0800184A  5282      2635          addq.l    #1,D2
0800184C  1290      2636          move.b    (A0),(A1)
0800184E  5304      2637          subq.b    #1,D4
08001850  6008      2638          bra.s     doprint_64
                    2639   doprint_63:
08001852  2042      2640          move.l    D2,A0
08001854  5282      2641          addq.l    #1,D2
08001856  10BC 002B 2642          move.b    #43,(A0)
                    2643   doprint_64:
0800185A  5287      2644          addq.l    #1,D7
0800185C  6000 002A 2645          bra       doprint_65
                    2646   doprint_60:
08001860  4A2E FFCF 2647          tst.b     -49(A6)
08001864  6722      2648          beq.s     doprint_65
08001866  2043      2649          move.l    D3,A0
08001868  1010      2650          move.b    (A0),D0
0800186A  0C00 002D 2651          cmp.b     #45,D0
0800186E  660E      2652          bne.s     doprint_67
08001870  2043      2653          move.l    D3,A0
08001872  5283      2654          addq.l    #1,D3
08001874  2242      2655          move.l    D2,A1
08001876  5282      2656          addq.l    #1,D2
08001878  1290      2657          move.b    (A0),(A1)
0800187A  5304      2658          subq.b    #1,D4
0800187C  6008      2659          bra.s     doprint_68
                    2660   doprint_67:
0800187E  2042      2661          move.l    D2,A0
08001880  5282      2662          addq.l    #1,D2
08001882  10BC 0020 2663          move.b    #32,(A0)
                    2664   doprint_68:
08001886  5287      2665          addq.l    #1,D7
                    2666   doprint_65:
08001888  4A2E FFD0 2667          tst.b     -48(A6)
0800188C  6700 005A 2668          beq       doprint_77
08001890  206E 000C 2669          move.l    12(A6),A0
08001894  1010      2670          move.b    (A0),D0
08001896  4880      2671          ext.w     D0
08001898  48C0      2672          ext.l     D0
0800189A  0C80 0000 2673          cmp.l     #111,D0
0800189E  006F      
080018A0  671A      2674          beq.s     doprint_73
080018A2  6E0C      2675          bgt.s     doprint_76
080018A4  0C80 0000 2676          cmp.l     #88,D0
080018A8  0058      
080018AA  6710      2677          beq.s     doprint_73
080018AC  6000 003A 2678          bra       doprint_77
                    2679   doprint_76:
080018B0  0C80 0000 2680          cmp.l     #120,D0
080018B4  0078      
080018B6  6704      2681          beq.s     doprint_73
080018B8  6000 002E 2682          bra       doprint_77
                    2683   doprint_73:
080018BC  2042      2684          move.l    D2,A0
080018BE  5282      2685          addq.l    #1,D2
080018C0  10BC 0030 2686          move.b    #48,(A0)
080018C4  5287      2687          addq.l    #1,D7
080018C6  206E 000C 2688          move.l    12(A6),A0
080018CA  1010      2689          move.b    (A0),D0
080018CC  0C00 0078 2690          cmp.b     #120,D0
080018D0  670C      2691          beq.s     doprint_79
080018D2  206E 000C 2692          move.l    12(A6),A0
080018D6  1010      2693          move.b    (A0),D0
080018D8  0C00 0058 2694          cmp.b     #88,D0
080018DC  660A      2695          bne.s     doprint_77
                    2696   doprint_79:
080018DE  2042      2697          move.l    D2,A0
080018E0  5282      2698          addq.l    #1,D2
080018E2  10BC 0078 2699          move.b    #120,(A0)
080018E6  5287      2700          addq.l    #1,D7
                    2701   doprint_77:
080018E8  2042      2702          move.l    D2,A0
080018EA  4210      2703          clr.b     (A0)
080018EC  206E 000C 2704          move.l    12(A6),A0
080018F0  1010      2705          move.b    (A0),D0
080018F2  4880      2706          ext.w     D0
080018F4  48C0      2707          ext.l     D0
080018F6  0C80 0000 2708          cmp.l     #105,D0
080018FA  0069      
080018FC  6700 0076 2709          beq       doprint_82
08001900  6E42      2710          bgt.s     doprint_93
08001902  0C80 0000 2711          cmp.l     #99,D0
08001906  0063      
08001908  6700 0084 2712          beq       doprint_96
0800190C  6E1C      2713          bgt.s     doprint_94
0800190E  0C80 0000 2714          cmp.l     #88,D0
08001912  0058      
08001914  6700 005E 2715          beq       doprint_82
08001918  6E00 0184 2716          bgt       doprint_80
0800191C  0C80 0000 2717          cmp.l     #69,D0
08001920  0045      
08001922  6700 0050 2718          beq       doprint_82
08001926  6000 0176 2719          bra       doprint_80
                    2720   doprint_94:
0800192A  0C80 0000 2721          cmp.l     #101,D0
0800192E  0065      
08001930  6700 0042 2722          beq       doprint_82
08001934  6E00 0168 2723          bgt       doprint_80
08001938  0C80 0000 2724          cmp.l     #100,D0
0800193C  0064      
0800193E  6734      2725          beq.s     doprint_82
08001940  6000 015C 2726          bra       doprint_80
                    2727   doprint_93:
08001944  0C80 0000 2728          cmp.l     #117,D0
08001948  0075      
0800194A  6728      2729          beq.s     doprint_82
0800194C  6E1A      2730          bgt.s     doprint_95
0800194E  0C80 0000 2731          cmp.l     #115,D0
08001952  0073      
08001954  6700 0038 2732          beq       doprint_96
08001958  6E00 0144 2733          bgt       doprint_80
0800195C  0C80 0000 2734          cmp.l     #111,D0
08001960  006F      
08001962  6710      2735          beq.s     doprint_82
08001964  6000 0138 2736          bra       doprint_80
                    2737   doprint_95:
08001968  0C80 0000 2738          cmp.l     #120,D0
0800196C  0078      
0800196E  6704      2739          beq.s     doprint_82
08001970  6000 012C 2740          bra       doprint_80
                    2741   doprint_82:
08001974  4A2E FFD2 2742          tst.b     -46(A6)
08001978  6714      2743          beq.s     doprint_96
0800197A  4A2E FFCD 2744          tst.b     -51(A6)
0800197E  660E      2745          bne.s     doprint_96
08001980  200D      2746          move.l    A5,D0
08001982  9087      2747          sub.l     D7,D0
08001984  4884      2748          ext.w     D4
08001986  48C4      2749          ext.l     D4
08001988  9084      2750          sub.l     D4,D0
0800198A  2D40 FFFC 2751          move.l    D0,-4(A6)
                    2752   doprint_96:
0800198E  202E FFFC 2753          move.l    -4(A6),D0
08001992  0C80 0000 2754          cmp.l     #0,D0
08001996  0000      
08001998  6C04      2755          bge.s     doprint_98
0800199A  42AE FFFC 2756          clr.l     -4(A6)
                    2757   doprint_98:
0800199E  4A2E FFCD 2758          tst.b     -51(A6)
080019A2  6600 0030 2759          bne       doprint_104
080019A6  1004      2760          move.b    D4,D0
080019A8  4880      2761          ext.w     D0
080019AA  48C0      2762          ext.l     D0
080019AC  D0AE FFFC 2763          add.l     -4(A6),D0
080019B0  D087      2764          add.l     D7,D0
080019B2  1D40 FFD1 2765          move.b    D0,-47(A6)
                    2766   doprint_102:
080019B6  102E FFD1 2767          move.b    -47(A6),D0
080019BA  4880      2768          ext.w     D0
080019BC  48C0      2769          ext.l     D0
080019BE  220D      2770          move.l    A5,D1
080019C0  534D      2771          subq.w    #1,A5
080019C2  B081      2772          cmp.l     D1,D0
080019C4  6C0E      2773          bge.s     doprint_104
080019C6  4878 0020 2774          pea       32
080019CA  2F0A      2775          move.l    A2,-(A7)
080019CC  4E93      2776          jsr       (A3)
080019CE  504F      2777          addq.w    #8,A7
080019D0  5286      2778          addq.l    #1,D6
080019D2  60E2      2779          bra       doprint_102
                    2780   doprint_104:
080019D4  41EE FFD4 2781          lea       -44(A6),A0
080019D8  2408      2782          move.l    A0,D2
                    2783   doprint_105:
080019DA  2042      2784          move.l    D2,A0
080019DC  4A10      2785          tst.b     (A0)
080019DE  6716      2786          beq.s     doprint_107
080019E0  2042      2787          move.l    D2,A0
080019E2  5282      2788          addq.l    #1,D2
080019E4  1210      2789          move.b    (A0),D1
080019E6  4881      2790          ext.w     D1
080019E8  48C1      2791          ext.l     D1
080019EA  2F01      2792          move.l    D1,-(A7)
080019EC  2F0A      2793          move.l    A2,-(A7)
080019EE  4E93      2794          jsr       (A3)
080019F0  504F      2795          addq.w    #8,A7
080019F2  5286      2796          addq.l    #1,D6
080019F4  60E4      2797          bra       doprint_105
                    2798   doprint_107:
080019F6  202E FFFC 2799          move.l    -4(A6),D0
080019FA  1D40 FFD1 2800          move.b    D0,-47(A6)
                    2801   doprint_108:
080019FE  102E FFD1 2802          move.b    -47(A6),D0
08001A02  532E FFD1 2803          subq.b    #1,-47(A6)
08001A06  4A00      2804          tst.b     D0
08001A08  670E      2805          beq.s     doprint_110
08001A0A  4878 0030 2806          pea       48
08001A0E  2F0A      2807          move.l    A2,-(A7)
08001A10  4E93      2808          jsr       (A3)
08001A12  504F      2809          addq.w    #8,A7
08001A14  5286      2810          addq.l    #1,D6
08001A16  60E6      2811          bra       doprint_108
                    2812   doprint_110:
08001A18  2043      2813          move.l    D3,A0
08001A1A  4A10      2814          tst.b     (A0)
08001A1C  6700 0048 2815          beq       doprint_113
08001A20  206E 000C 2816          move.l    12(A6),A0
08001A24  1010      2817          move.b    (A0),D0
08001A26  4880      2818          ext.w     D0
08001A28  48C0      2819          ext.l     D0
08001A2A  0C80 0000 2820          cmp.l     #115,D0
08001A2E  0073      
08001A30  670C      2821          beq.s     doprint_116
08001A32  6E18      2822          bgt.s     doprint_119
08001A34  0C80 0000 2823          cmp.l     #99,D0
08001A38  0063      
08001A3A  6702      2824          beq.s     doprint_116
08001A3C  600E      2825          bra.s     doprint_119
                    2826   doprint_116:
08001A3E  2005      2827          move.l    D5,D0
08001A40  5385      2828          subq.l    #1,D5
08001A42  0C80 0000 2829          cmp.l     #0,D0
08001A46  0000      
08001A48  6E02      2830          bgt.s     doprint_119
08001A4A  6016      2831          bra.s     doprint_115
                    2832   doprint_119:
08001A4C  2043      2833          move.l    D3,A0
08001A4E  5283      2834          addq.l    #1,D3
08001A50  1210      2835          move.b    (A0),D1
08001A52  4881      2836          ext.w     D1
08001A54  48C1      2837          ext.l     D1
08001A56  2F01      2838          move.l    D1,-(A7)
08001A58  2F0A      2839          move.l    A2,-(A7)
08001A5A  4E93      2840          jsr       (A3)
08001A5C  504F      2841          addq.w    #8,A7
08001A5E  5286      2842          addq.l    #1,D6
08001A60  6002      2843          bra.s     doprint_112
                    2844   doprint_115:
08001A62  6002      2845          bra.s     doprint_113
                    2846   doprint_112:
08001A64  60B2      2847          bra       doprint_110
                    2848   doprint_113:
08001A66  4A2E FFCD 2849          tst.b     -51(A6)
08001A6A  6700 0030 2850          beq       doprint_125
08001A6E  1004      2851          move.b    D4,D0
08001A70  4880      2852          ext.w     D0
08001A72  48C0      2853          ext.l     D0
08001A74  D0AE FFFC 2854          add.l     -4(A6),D0
08001A78  D087      2855          add.l     D7,D0
08001A7A  1D40 FFD1 2856          move.b    D0,-47(A6)
                    2857   doprint_123:
08001A7E  102E FFD1 2858          move.b    -47(A6),D0
08001A82  4880      2859          ext.w     D0
08001A84  48C0      2860          ext.l     D0
08001A86  220D      2861          move.l    A5,D1
08001A88  534D      2862          subq.w    #1,A5
08001A8A  B081      2863          cmp.l     D1,D0
08001A8C  6C0E      2864          bge.s     doprint_125
08001A8E  4878 0020 2865          pea       32
08001A92  2F0A      2866          move.l    A2,-(A7)
08001A94  4E93      2867          jsr       (A3)
08001A96  504F      2868          addq.w    #8,A7
08001A98  5386      2869          subq.l    #1,D6
08001A9A  60E2      2870          bra       doprint_123
                    2871   doprint_125:
08001A9C  6014      2872          bra.s     doprint_81
                    2873   doprint_80:
08001A9E  206E 000C 2874          move.l    12(A6),A0
08001AA2  1210      2875          move.b    (A0),D1
08001AA4  4881      2876          ext.w     D1
08001AA6  48C1      2877          ext.l     D1
08001AA8  2F01      2878          move.l    D1,-(A7)
08001AAA  2F0A      2879          move.l    A2,-(A7)
08001AAC  4E93      2880          jsr       (A3)
08001AAE  504F      2881          addq.w    #8,A7
08001AB0  5286      2882          addq.l    #1,D6
                    2883   doprint_81:
08001AB2  52AE 000C 2884          addq.l    #1,12(A6)
                    2885   doprint_2:
08001AB6  6000 FA0A 2886          bra       doprint_1
                    2887   doprint_3:
08001ABA  4A92      2888          tst.l     (A2)
08001ABC  6710      2889          beq.s     doprint_126
08001ABE  4201      2890          clr.b     D1
08001AC0  C2BC 0000 2891          and.l     #255,D1
08001AC4  00FF      
08001AC6  2F01      2892          move.l    D1,-(A7)
08001AC8  2F0A      2893          move.l    A2,-(A7)
08001ACA  4E93      2894          jsr       (A3)
08001ACC  504F      2895          addq.w    #8,A7
                    2896   doprint_126:
08001ACE  2006      2897          move.l    D6,D0
08001AD0  4CDF 3CFC 2898          movem.l   (A7)+,D2/D3/D4/D5/D6/D7/A2/A3/A4/A5
08001AD4  4E5E      2899          unlk      A6
08001AD6  4E75      2900          rts
                    2901   _putch:
08001AD8  4E56 0000 2902          link      A6,#0
08001ADC  2F02      2903          move.l    D2,-(A7)
08001ADE  242E 0008 2904          move.l    8(A6),D2
08001AE2  0C82 0000 2905          cmp.l     #10,D2
08001AE6  000A      
08001AE8  660C      2906          bne.s     putch_1
08001AEA  4878 000D 2907          pea       13
08001AEE  4EB9 0800 2908          jsr       __putch
08001AF2  006A      
08001AF4  584F      2909          addq.w    #4,A7
                    2910   putch_1:
08001AF6  2F02      2911          move.l    D2,-(A7)
08001AF8  4EB9 0800 2912          jsr       __putch
08001AFC  006A      
08001AFE  584F      2913          addq.w    #4,A7
08001B00  2002      2914          move.l    D2,D0
08001B02  241F      2915          move.l    (A7)+,D2
08001B04  4E5E      2916          unlk      A6
08001B06  4E75      2917          rts
                    2918   _getch:
08001B08  2F02      2919          move.l    D2,-(A7)
08001B0A  2439 0800 2920          move.l    __ungetbuf.L,D2
08001B0E  1FF4      
08001B10  2039 0800 2921          move.l    __ungetbuf.L,D0
08001B14  1FF4      
08001B16  0C80 FFFF 2922          cmp.l     #-1,D0
08001B1A  FFFF      
08001B1C  670C      2923          beq.s     getch_1
08001B1E  23FC FFFF 2924          move.l    #-1,__ungetbuf.L
08001B22  FFFF 0800 
08001B26  1FF4      
08001B28  6012      2925          bra.s     getch_3
                    2926   getch_1:
08001B2A  4EB9 0800 2927          jsr       __getch
08001B2E  003E      
08001B30  2400      2928          move.l    D0,D2
08001B32  0C80 0000 2929          cmp.l     #13,D0
08001B36  000D      
08001B38  6602      2930          bne.s     getch_3
08001B3A  740A      2931          moveq     #10,D2
                    2932   getch_3:
08001B3C  2002      2933          move.l    D2,D0
08001B3E  241F      2934          move.l    (A7)+,D2
08001B40  4E75      2935          rts
                    2936   @itoa_convert:
08001B42  4E56 0000 2937          link      A6,#0
08001B46  48E7 3C00 2938          movem.l   D2/D3/D4/D5,-(A7)
08001B4A  242E 0008 2939          move.l    8(A6),D2
08001B4E  262E 0010 2940          move.l    16(A6),D3
08001B52  2A2E 000C 2941          move.l    12(A6),D5
08001B56  2F05      2942          move.l    D5,-(A7)
08001B58  2F03      2943          move.l    D3,-(A7)
08001B5A  4EB9 0800 2944          jsr       ULDIV
08001B5E  0876      
08001B60  202F 0004 2945          move.l    4(A7),D0
08001B64  504F      2946          addq.w    #8,A7
08001B66  2800      2947          move.l    D0,D4
08001B68  BA83      2948          cmp.l     D3,D5
08001B6A  6520      2949          blo.s     @itoa_convert_1
08001B6C  2F03      2950          move.l    D3,-(A7)
08001B6E  2F05      2951          move.l    D5,-(A7)
08001B70  2F03      2952          move.l    D3,-(A7)
08001B72  4EB9 0800 2953          jsr       ULDIV
08001B76  0876      
08001B78  2217      2954          move.l    (A7),D1
08001B7A  504F      2955          addq.w    #8,A7
08001B7C  2F01      2956          move.l    D1,-(A7)
08001B7E  2F02      2957          move.l    D2,-(A7)
08001B80  4EB9 0800 2958          jsr       @itoa_convert
08001B84  1B42      
08001B86  DEFC 000C 2959          add.w     #12,A7
08001B8A  2400      2960          move.l    D0,D2
                    2961   @itoa_convert_1:
08001B8C  0C84 0000 2962          cmp.l     #9,D4
08001B90  0009      
08001B92  6E0E      2963          bgt.s     @itoa_convert_3
08001B94  2004      2964          move.l    D4,D0
08001B96  7230      2965          moveq     #48,D1
08001B98  C2BC 0000 2966          and.l     #255,D1
08001B9C  00FF      
08001B9E  D081      2967          add.l     D1,D0
08001BA0  6012      2968          bra.s     @itoa_convert_4
                    2969   @itoa_convert_3:
08001BA2  2004      2970          move.l    D4,D0
08001BA4  7261      2971          moveq     #97,D1
08001BA6  C2BC 0000 2972          and.l     #255,D1
08001BAA  00FF      
08001BAC  D081      2973          add.l     D1,D0
08001BAE  0480 0000 2974          sub.l     #10,D0
08001BB2  000A      
                    2975   @itoa_convert_4:
08001BB4  2042      2976          move.l    D2,A0
08001BB6  1080      2977          move.b    D0,(A0)
08001BB8  2002      2978          move.l    D2,D0
08001BBA  5280      2979          addq.l    #1,D0
08001BBC  4CDF 003C 2980          movem.l   (A7)+,D2/D3/D4/D5
08001BC0  4E5E      2981          unlk      A6
08001BC2  4E75      2982          rts
                    2983   _ltoa:
08001BC4  4E56 0000 2984          link      A6,#0
08001BC8  48E7 3C00 2985          movem.l   D2/D3/D4/D5,-(A7)
08001BCC  242E 0008 2986          move.l    8(A6),D2
08001BD0  262E 000C 2987          move.l    12(A6),D3
08001BD4  2A2E 0010 2988          move.l    16(A6),D5
08001BD8  2803      2989          move.l    D3,D4
08001BDA  0C85 0000 2990          cmp.l     #2,D5
08001BDE  0002      
08001BE0  6D08      2991          blt.s     ltoa_3
08001BE2  0C85 0000 2992          cmp.l     #36,D5
08001BE6  0024      
08001BE8  6F06      2993          ble.s     ltoa_1
                    2994   ltoa_3:
08001BEA  2003      2995          move.l    D3,D0
08001BEC  6000 0056 2996          bra       ltoa_4
                    2997   ltoa_1:
08001BF0  0C85 0000 2998          cmp.l     #10,D5
08001BF4  000A      
08001BF6  6600 0034 2999          bne       ltoa_5
08001BFA  0C82 0000 3000          cmp.l     #0,D2
08001BFE  0000      
08001C00  6C2A      3001          bge.s     ltoa_5
08001C02  2002      3002          move.l    D2,D0
08001C04  4480      3003          neg.l     D0
08001C06  2400      3004          move.l    D0,D2
08001C08  0C82 0000 3005          cmp.l     #0,D2
08001C0C  0000      
08001C0E  6C14      3006          bge.s     ltoa_7
08001C10  4879 0800 3007          pea       @itoa_1.L
08001C14  1FE8      
08001C16  2F03      3008          move.l    D3,-(A7)
08001C18  4EB9 0800 3009          jsr       _strcpy
08001C1C  1CC4      
08001C1E  504F      3010          addq.w    #8,A7
08001C20  2003      3011          move.l    D3,D0
08001C22  6020      3012          bra.s     ltoa_4
                    3013   ltoa_7:
08001C24  2044      3014          move.l    D4,A0
08001C26  5284      3015          addq.l    #1,D4
08001C28  10BC 002D 3016          move.b    #45,(A0)
                    3017   ltoa_5:
08001C2C  2F05      3018          move.l    D5,-(A7)
08001C2E  2F02      3019          move.l    D2,-(A7)
08001C30  2F04      3020          move.l    D4,-(A7)
08001C32  4EB9 0800 3021          jsr       @itoa_convert
08001C36  1B42      
08001C38  DEFC 000C 3022          add.w     #12,A7
08001C3C  2800      3023          move.l    D0,D4
08001C3E  2044      3024          move.l    D4,A0
08001C40  4210      3025          clr.b     (A0)
08001C42  2003      3026          move.l    D3,D0
                    3027   ltoa_4:
08001C44  4CDF 003C 3028          movem.l   (A7)+,D2/D3/D4/D5
08001C48  4E5E      3029          unlk      A6
08001C4A  4E75      3030          rts
                    3031   _ultoa:
08001C4C  4E56 0000 3032          link      A6,#0
08001C50  48E7 3800 3033          movem.l   D2/D3/D4,-(A7)
08001C54  262E 0010 3034          move.l    16(A6),D3
08001C58  282E 000C 3035          move.l    12(A6),D4
08001C5C  2404      3036          move.l    D4,D2
08001C5E  0C83 0000 3037          cmp.l     #2,D3
08001C62  0002      
08001C64  6D08      3038          blt.s     ultoa_3
08001C66  0C83 0000 3039          cmp.l     #36,D3
08001C6A  0024      
08001C6C  6F04      3040          ble.s     ultoa_1
                    3041   ultoa_3:
08001C6E  2004      3042          move.l    D4,D0
08001C70  601A      3043          bra.s     ultoa_4
                    3044   ultoa_1:
08001C72  2F03      3045          move.l    D3,-(A7)
08001C74  2F2E 0008 3046          move.l    8(A6),-(A7)
08001C78  2F02      3047          move.l    D2,-(A7)
08001C7A  4EB9 0800 3048          jsr       @itoa_convert
08001C7E  1B42      
08001C80  DEFC 000C 3049          add.w     #12,A7
08001C84  2400      3050          move.l    D0,D2
08001C86  2042      3051          move.l    D2,A0
08001C88  4210      3052          clr.b     (A0)
08001C8A  2004      3053          move.l    D4,D0
                    3054   ultoa_4:
08001C8C  4CDF 001C 3055          movem.l   (A7)+,D2/D3/D4
08001C90  4E5E      3056          unlk      A6
08001C92  4E75      3057          rts
                    3058   _itoa:
08001C94  4E56 0000 3059          link      A6,#0
08001C98  2F2E 0010 3060          move.l    16(A6),-(A7)
08001C9C  2F2E 000C 3061          move.l    12(A6),-(A7)
08001CA0  2F2E 0008 3062          move.l    8(A6),-(A7)
08001CA4  4EB9 0800 3063          jsr       _ltoa
08001CA8  1BC4      
08001CAA  DEFC 000C 3064          add.w     #12,A7
08001CAE  4E5E      3065          unlk      A6
08001CB0  4E75      3066          rts
                    3067   _strlen:
08001CB2  206F 0004 3068          move.l    (4,A7),A0
08001CB6  2248      3069          move.l    A0,A1
                    3070   strlen_1:
08001CB8  4A19      3071          tst.b     (A1)+
08001CBA  66FC      3072          bne       strlen_1
08001CBC  2009      3073          move.l    A1,D0
08001CBE  9088      3074          sub.l     A0,D0
08001CC0  5380      3075          subq.l    #1,D0
08001CC2  4E75      3076          rts
                    3077   _strcpy:
08001CC4  206F 0004 3078          move.l    (4,A7),A0
08001CC8  226F 0008 3079          move.l    (8,A7),A1
08001CCC  2008      3080          move.l    A0,D0
                    3081   strcpy_1:
08001CCE  10D9      3082          move.b    (A1)+,(A0)+
08001CD0  66FC      3083          bne.s     strcpy_1
08001CD2  4E75      3084          rts
                    3085          section   const
08001CD4            3086                   align
                    3087   
                    3088   
                    3089   @m68kus~1_1:
08001CD4  4E6F 7420 3090          dc.b      78,111,116,32,69,110,111,117,103,104,32,77,101
08001CD8  456E 6F75 
08001CDC  6768 204D 
08001CE0  65        
08001CE1  6D6F 7279 3091          dc.b      109,111,114,121,32,108,111,99,97,116,105,111
08001CE5  206C 6F63 
08001CE9  6174 696F 
08001CED  6E73 210D 3092          dc.b      110,115,33,13,10,0
08001CF1  0A00      
                    3093   @m68kus~1_2:
08001CF4  5772 6974 3094          dc.b      87,114,105,116,105,110,103,32,83,101,113,117
08001CF8  696E 6720 
08001CFC  5365 7175 
08001D00  656E 7469 3095          dc.b      101,110,116,105,97,108,32,66,108,111,99,107
08001D04  616C 2042 
08001D08  6C6F 636B 
08001D0C  206F 6620 3096          dc.b      32,111,102,32,68,97,116,97,32,116,111,32,69
08001D10  4461 7461 
08001D14  2074 6F20 
08001D18  45        
08001D19  4550 524F 3097          dc.b      69,80,82,79,77,13,10,0
08001D1D  4D0D 0A00 
                    3098   @m68kus~1_3:
08001D22  4E6F 2041 3099          dc.b      78,111,32,65,67,75,32,114,101,116,117,114,110
08001D26  434B 2072 
08001D2A  6574 7572 
08001D2E  6E        
08001D2F  6564 2066 3100          dc.b      101,100,32,102,111,114,32,98,121,116,101,32
08001D33  6F72 2062 
08001D37  7974 6520 
08001D3B  2325 6400 3101          dc.b      35,37,100,0
                    3102   @m68kus~1_4:
08001D40  5772 6974 3103          dc.b      87,114,105,116,105,110,103,32,80,97,103,101
08001D44  696E 6720 
08001D48  5061 6765 
08001D4C  2074 6F20 3104          dc.b      32,116,111,32,69,69,80,82,79,77,13,10,0
08001D50  4545 5052 
08001D54  4F4D 0D0A 
08001D58  00        
                    3105   @m68kus~1_5:
08001D5A  5772 6974 3106          dc.b      87,114,105,116,105,110,103,32,66,121,116,101
08001D5E  696E 6720 
08001D62  4279 7465 
08001D66  2074 6F20 3107          dc.b      32,116,111,32,69,69,80,82,79,77,13,10,0
08001D6A  4545 5052 
08001D6E  4F4D 0D0A 
08001D72  00        
                    3108   @m68kus~1_6:
08001D74  4E6F 2041 3109          dc.b      78,111,32,65,67,75,32,114,101,116,117,114,110
08001D78  434B 2072 
08001D7C  6574 7572 
08001D80  6E        
08001D81  6564 00   3110          dc.b      101,100,0
                    3111   @m68kus~1_7:
08001D84  5761 6974 3112          dc.b      87,97,105,116,105,110,103,32,102,111,114,32
08001D88  696E 6720 
08001D8C  666F 7220 
08001D90  496E 7465 3113          dc.b      73,110,116,101,114,110,97,108,32,87,114,105
08001D94  726E 616C 
08001D98  2057 7269 
08001D9C  7465 210D 3114          dc.b      116,101,33,13,10,0
08001DA0  0A00      
                    3115   @m68kus~1_8:
08001DA2  496E 7465 3116          dc.b      73,110,116,101,114,110,97,108,32,87,114,105
08001DA6  726E 616C 
08001DAA  2057 7269 
08001DAE  7465 2043 3117          dc.b      116,101,32,67,111,109,112,108,101,116,101,33
08001DB2  6F6D 706C 
08001DB6  6574 6521 
08001DBA  0D0A 00   3118          dc.b      13,10,0
                    3119   @m68kus~1_9:
08001DBE  4E6F 2041 3120          dc.b      78,111,32,65,67,75,32,114,101,116,117,114,110
08001DC2  434B 2072 
08001DC6  6574 7572 
08001DCA  6E        
08001DCB  6564 2066 3121          dc.b      101,100,32,102,111,114,32,114,101,97,100,32
08001DCF  6F72 2072 
08001DD3  6561 6420 
08001DD7  6174 2061 3122          dc.b      97,116,32,97,100,100,114,101,115,115,58,32,48
08001DDB  6464 7265 
08001DDF  7373 3A20 
08001DE3  30        
08001DE4  7825 5800 3123          dc.b      120,37,88,0
                    3124   @m68kus~1_10:
08001DE8  5365 7175 3125          dc.b      83,101,113,117,101,110,116,105,97,108,32,82
08001DEC  656E 7469 
08001DF0  616C 2052 
08001DF4  6561 6420 3126          dc.b      101,97,100,32,69,114,114,111,114,32,97,116,32
08001DF8  4572 726F 
08001DFC  7220 6174 
08001E00  20        
08001E01  6164 6472 3127          dc.b      97,100,100,114,101,115,115,58,32,48,120,37,88
08001E05  6573 733A 
08001E09  2030 7825 
08001E0D  58        
08001E0E  0D0A 00   3128          dc.b      13,10,0
                    3129   @m68kus~1_11:
08001E12  5365 7175 3130          dc.b      83,101,113,117,101,110,116,105,97,108,32,66
08001E16  656E 7469 
08001E1A  616C 2042 
08001E1E  6C6F 636B 3131          dc.b      108,111,99,107,32,82,101,97,100,32,83,117,99
08001E22  2052 6561 
08001E26  6420 5375 
08001E2A  63        
08001E2B  6365 7373 3132          dc.b      99,101,115,115,102,117,108,13,10,0
08001E2F  6675 6C0D 
08001E33  0A00      
                    3133   @m68kus~1_12:
08001E36  5265 6164 3134          dc.b      82,101,97,100,105,110,103,32,80,97,103,101,32
08001E3A  696E 6720 
08001E3E  5061 6765 
08001E42  20        
08001E43  6672 6F6D 3135          dc.b      102,114,111,109,32,69,69,80,82,79,77,32,13,10
08001E47  2045 4550 
08001E4B  524F 4D20 
08001E4F  0D0A      
08001E51  00        3136          dc.b      0
                    3137   @m68kus~1_13:
08001E52  5061 6765 3138          dc.b      80,97,103,101,32,82,101,97,100,32,70,97,105
08001E56  2052 6561 
08001E5A  6420 4661 
08001E5E  69        
08001E5F  6C65 6420 3139          dc.b      108,101,100,32,97,116,32,66,121,116,101,32,35
08001E63  6174 2042 
08001E67  7974 6520 
08001E6B  23        
08001E6C  2564 0D0A 3140          dc.b      37,100,13,10,0
08001E70  00        
                    3141   @m68kus~1_14:
08001E72  5061 6765 3142          dc.b      80,97,103,101,32,82,101,97,100,32,83,117,99
08001E76  2052 6561 
08001E7A  6420 5375 
08001E7E  63        
08001E7F  6365 7373 3143          dc.b      99,101,115,115,102,117,108,13,10,0
08001E83  6675 6C0D 
08001E87  0A00      
                    3144   @m68kus~1_15:
08001E8A  5265 6164 3145          dc.b      82,101,97,100,105,110,103,32,66,121,116,101
08001E8E  696E 6720 
08001E92  4279 7465 
08001E96  2066 726F 3146          dc.b      32,102,114,111,109,32,69,69,80,82,79,77,32,13
08001E9A  6D20 4545 
08001E9E  5052 4F4D 
08001EA2  200D      
08001EA4  0A00      3147          dc.b      10,0
                    3148   @m68kus~1_16:
08001EA6  0D0A 4865 3149          dc.b      13,10,72,101,108,108,111,32,73,73,67,32,76,97
08001EAA  6C6C 6F20 
08001EAE  4949 4320 
08001EB2  4C61      
08001EB4  620D 0A0D 3150          dc.b      98,13,10,13,10,0
08001EB8  0A00      
                    3151   @m68kus~1_17:
08001EBA  5365 6E74 3152          dc.b      83,101,110,116,32,66,121,116,101,58,32,48,120
08001EBE  2042 7974 
08001EC2  653A 2030 
08001EC6  78        
08001EC7  2558 2026 3153          dc.b      37,88,32,38,32,82,101,99,105,101,118,101,100
08001ECB  2052 6563 
08001ECF  6965 7665 
08001ED3  64        
08001ED4  2042 7974 3154          dc.b      32,66,121,116,101,58,32,48,120,37,88,13,10,13
08001ED8  653A 2030 
08001EDC  7825 580D 
08001EE0  0A0D      
08001EE2  0A00      3155          dc.b      10,0
                    3156   @doscan_1:
08001EE4  0A00      3157          dc.b      10,0
                    3158   __ctype:
08001EE6  0040 4040 3159          dc.b      0,64,64,64,64,64,64,64,64,64,80,80,80,80,80
08001EEA  4040 4040 
08001EEE  4040 5050 
08001EF2  5050 50   
08001EF5  4040 4040 3160          dc.b      64,64,64,64,64,64,64,64,64,64,64,64,64,64,64
08001EF9  4040 4040 
08001EFD  4040 4040 
08001F01  4040 40   
08001F04  4040 40D0 3161          dc.b      64,64,64,208,160,160,160,160,160,160,160,160
08001F08  A0A0 A0A0 
08001F0C  A0A0 A0A0 
08001F10  A0A0 A0A0 3162          dc.b      160,160,160,160,160,160,160,140,140,140,140
08001F14  A0A0 A08C 
08001F18  8C8C 8C   
08001F1B  8C8C 8C8C 3163          dc.b      140,140,140,140,140,140,160,160,160,160,160
08001F1F  8C8C A0A0 
08001F23  A0A0 A0   
08001F26  A0A0 8A8A 3164          dc.b      160,160,138,138,138,138,138,138,130,130,130
08001F2A  8A8A 8A8A 
08001F2E  8282 82   
08001F31  8282 8282 3165          dc.b      130,130,130,130,130,130,130,130,130,130,130
08001F35  8282 8282 
08001F39  8282 82   
08001F3C  8282 8282 3166          dc.b      130,130,130,130,130,130,160,160,160,160,160
08001F40  8282 A0A0 
08001F44  A0A0 A0   
08001F47  A089 8989 3167          dc.b      160,137,137,137,137,137,137,129,129,129,129
08001F4B  8989 8981 
08001F4F  8181 81   
08001F52  8181 8181 3168          dc.b      129,129,129,129,129,129,129,129,129,129,129
08001F56  8181 8181 
08001F5A  8181 81   
08001F5D  8181 8181 3169          dc.b      129,129,129,129,129,160,160,160,160,64,0,0,0
08001F61  81A0 A0A0 
08001F65  A040 0000 
08001F69  00        
08001F6A  0000 0000 3170          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001F6E  0000 0000 
08001F72  0000 0000 
08001F76  0000 0000 
08001F7A  0000 0000 
08001F7E  0000      
08001F80  0000 0000 3171          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001F84  0000 0000 
08001F88  0000 0000 
08001F8C  0000 0000 
08001F90  0000 0000 
08001F94  0000      
08001F96  0000 0000 3172          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001F9A  0000 0000 
08001F9E  0000 0000 
08001FA2  0000 0000 
08001FA6  0000 0000 
08001FAA  0000      
08001FAC  0000 0000 3173          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001FB0  0000 0000 
08001FB4  0000 0000 
08001FB8  0000 0000 
08001FBC  0000 0000 
08001FC0  0000      
08001FC2  0000 0000 3174          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001FC6  0000 0000 
08001FCA  0000 0000 
08001FCE  0000 0000 
08001FD2  0000 0000 
08001FD6  0000      
08001FD8  0000 0000 3175          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001FDC  0000 0000 
08001FE0  0000 0000 
08001FE4  0000 00   
                    3176   @itoa_1:
08001FE8  2D32 3134 3177          dc.b      45,50,49,52,55,52,56,51,54,52,56,0
08001FEC  3734 3833 
08001FF0  3634 3800 
                    3178          section   data
08001FF4            3179                   align
                    3180   
                    3181   *********************************************************************************************************************************************************
                    3182   * Section for Initialised Data (in theory should be copied to Ram at startup) but is part of program code as we copy whole program to ram at startup
                    3183   ********************************************************************************************************************************************************
                    3184   
          0800 1FF4 3185   DataStart       equ       *
08001FF4            3186   __ungetbuf:     ds.l      1                    ungetbuffer for stdio functions
08001FF8            3187   __allocp:       ds.l      1                    start of free memory block list
08001FFC            3188   __heap:         ds.l      1                    begin of free memory
                    3189   
                    3190   
                    3191   @doscan_lpbuf:
08002000  0800 2004 3192          dc.l      @doscan_buf
                    3193          section   bss
08002004            3194                   align
                    3195   
          0800 2004 3196   DataEnd         equ       *                    this label will equate to the address of the last byte of global variable in it
          0000 0010 3197   DataLength      equ       DataEnd-DataStart    length of data needed to copy to Ram on bootup
                    3198   
                    3199   *********************************************************************************************************
                    3200   * Section for uninitialised Data which is set to zero, i.e. we should set this space to zero at starup
                    3201   *********************************************************************************************************
          0800 2004 3202   BssStart       equ       *
                    3203   
                    3204   @doscan_buf:
08002004            3205          ds.b      80
                    3206          section   heap
08002054            3207                  align
                    3208   
          0800 2054 3209   BssEnd         equ       *
          0000 0050 3210   BssLength      equ       BssEnd-BssStart       length of zeroed data needed to copy to Ram on bootup
                    3211   
                    3212   *********************************************************************************************************
                    3213   * Section for Heap
                    3214   *********************************************************************************************************
                    3215   
          0800 2054 3216   heap           equ       *
08002054            3217                  align
          0800 0000

Assembly errors: 0
