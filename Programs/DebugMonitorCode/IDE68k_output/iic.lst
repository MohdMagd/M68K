680x0 MACRO ASSEMBLER   Version 5.00   (c) 1992-2005 Peter J. Fondse

Date: 25 Mar 2019      Time: 13:16:16          Source: C:\M68K\PROGRAMS\DEBUGMONITORCODE\IDE68K_OUTPUT\IIC.SRC

                       1          section   code
                       2   **********************************************************************************************************
                       3   * CSTART.ASM  -  C startup-code
                       4   *
                       5   *          Initialises the system prior to running the users main() program
                       6   *
                       7   *          1) Sets up the user program stack pointer
                       8   *          2) Switches to User mode in the 68000
                       9   *          3) Enables All Interrupts 1-7 on 68000
                      10   *          4) Copies all initialised C program variables from Rom to Ram prior to running main()
                      11   *
                      12   **********************************************************************************************************
00000000              13                   align
                      14   
                      15   
                      16   **********************************************************************************************************
                      17   * The Following ORG Statement marks the address of the start of the this CStart Program
                      18   *
                      19   * The debug Monitor and Flash Load and Program routines assume your program lives here
                      20   **********************************************************************************************************
08000000              21                   org       $08000000
08000000  46FC 2000   22   start:          move.w    #$2000,SR             clear interrupts to enable all, move to supervisor mode
                      23   
                      24   ******************************************************************************************
                      25   * Set unitialised global variables to 0 at startup
                      26   ******************************************************************************************
08000004  207C 0800   27   mainloop        movea.l   #BssStart,a0          point a0 to the start of the initialised data section held in ROM
08000008  1C68      
0800000A  203C 0000   28                   move.l    #BssLength,d0         figure out how many bytes of C program variables data to copy
0800000E  0050      
08000010  6700 0024   29                   beq       go_main               if no data to copy go straight to program
08000014  10FC 0000   30   Zeroinit        move.b    #0,(a0)+              copy the C program initialise variables from rom to ram
08000018  5380        31                   subq.l    #1,d0
0800001A  66F8        32                   bne       Zeroinit
                      33   
                      34   *******************************************************************************************
                      35   * last minute initialisation before calling main
                      36   *******************************************************************************************
                      37   
0800001C  23FC FFFF   38                   move.l    #-1,__ungetbuf         required for use of scanf() etc in C programs
08000020  FFFF 0800 
08000024  1C58      
08000026  42B9 0800   39                   clr.l     __allocp               used by malloc() in C
0800002A  1C5C      
0800002C  23FC 0800   40                   move.l    #heap,__heap           pointer to free memory
08000030  1CB8 0800 
08000034  1C60      
08000036  4EB9 0800   41   go_main         jsr       _main
0800003A  0514      
0800003C  60C2        42                   bra       start
                      43   
                      44   ; C:\M68K\PROGRAMS\DEBUGMONITORCODE\IIC EEPROM PROGRAM FILES\M68KUSERPROGRAM (DE1).C - Compiled by CC68K  Version 5.00 (c) 1991-2005  Peter J. Fondse
                      45   ; #include <stdio.h>
                      46   ; #include <time.h>
                      47   ; /*********************************************************************************************
                      48   ; **  RS232 port addresses
                      49   ; *********************************************************************************************/
                      50   ; #define RS232_Control     *(volatile unsigned char *)(0x00400040)
                      51   ; #define RS232_Status      *(volatile unsigned char *)(0x00400040)
                      52   ; #define RS232_TxData      *(volatile unsigned char *)(0x00400042)
                      53   ; #define RS232_RxData      *(volatile unsigned char *)(0x00400042)
                      54   ; #define RS232_Baud        *(volatile unsigned char *)(0x00400044)
                      55   ; /*********************************************************************************************
                      56   ; **  IIC registers
                      57   ; *********************************************************************************************/
                      58   ; #define PRERlo  (*(volatile unsigned char *)(0x00408000)) // Clock Prescale register lo-byte
                      59   ; #define PRERhi  (*(volatile unsigned char *)(0x00408002)) // Clock Prescale register hi-byte
                      60   ; #define CTR     (*(volatile unsigned char *)(0x00408004)) // Control Register
                      61   ; #define TXR     (*(volatile unsigned char *)(0x00408006)) // Transmit Register
                      62   ; #define RXR     (*(volatile unsigned char *)(0x00408006)) // Receive Register
                      63   ; #define CR      (*(volatile unsigned char *)(0x00408008)) // Command Register
                      64   ; #define SR      (*(volatile unsigned char *)(0x00408008)) // Status Register
                      65   ; // Sequence Start & Stop Register Commands
                      66   ; #define start           0x80    // Set STA bit              --> (1000 0000)
                      67   ; #define stop            0x40    // Set STO bit              --> (0100 0000)
                      68   ; // Write Command Register Commands
                      69   ; #define startWrite      0x90    // set STA, WR bit          --> (1001 0000)
                      70   ; #define Write           0x10    // set WR bit               --> (0001 0000)
                      71   ; #define ReadIACK        0x21    // Set RD, IACK bits        --> (0010 0001)
                      72   ; #define ReadNACKIACK    0x29    // Set RD, ACK, IACK bits   --> (0010 1001)
                      73   ; #define stopWrite       0x50    // set STO, WR bit          --> (0101 0000)
                      74   ; // Read Command Register Commands
                      75   ; #define startRead       0xA8    // set STA, RD, ACK bit     --> (1010 1000)
                      76   ; #define stopRead        0x41    // set STO, IACK bit        --> (0100 0001)
                      77   ; /*********************************************************************************************
                      78   ; **  Function protoTypes
                      79   ; *********************************************************************************************/
                      80   ; void WritePageToChip(char c);
                      81   ; void WriteByteToChip(char c);
                      82   ; void WaitForWriteCycle(void);
                      83   ; void ReadPageFromChip(char expectedByte);
                      84   ; char ReadByteFromChip(void);
                      85   ; void WaitForTXByte(void);
                      86   ; void WaitForReceivedByte(void);
                      87   ; int CheckForACK(void);
                      88   ; void IIC_Init(void);
                      89   ; int _getch( void )
                      90   ; {
                      91   __getch:
0800003E  4E56 FFFC   92          link      A6,#-4
                      93   ; char c ;
                      94   ; while((RS232_Status & (char)(0x01)) != (char)(0x01))    // wait for Rx bit in 6850 serial comms chip status register to be '1'
                      95   _getch_1:
08000042  1039 0040   96          move.b    4194368,D0
08000046  0040      
08000048  C03C 0001   97          and.b     #1,D0
0800004C  0C00 0001   98          cmp.b     #1,D0
08000050  6702        99          beq.s     _getch_3
08000052  60EE       100          bra       _getch_1
                     101   _getch_3:
                     102   ; ;
                     103   ; return (RS232_RxData & (char)(0x7f));                   // read received character, mask off top bit and return as 7 bit ASCII character
08000054  1039 0040  104          move.b    4194370,D0
08000058  0042      
0800005A  C0BC 0000  105          and.l     #255,D0
0800005E  00FF      
08000060  C0BC 0000  106          and.l     #127,D0
08000064  007F      
08000066  4E5E       107          unlk      A6
08000068  4E75       108          rts
                     109   ; }
                     110   ; int _putch( int c)
                     111   ; {
                     112   __putch:
0800006A  4E56 0000  113          link      A6,#0
                     114   ; while((RS232_Status & (char)(0x02)) != (char)(0x02))    // wait for Tx bit in status register or 6850 serial comms chip to be '1'
                     115   _putch_1:
0800006E  1039 0040  116          move.b    4194368,D0
08000072  0040      
08000074  C03C 0002  117          and.b     #2,D0
08000078  0C00 0002  118          cmp.b     #2,D0
0800007C  6702       119          beq.s     _putch_3
0800007E  60EE       120          bra       _putch_1
                     121   _putch_3:
                     122   ; ;
                     123   ; RS232_TxData = (c & (char)(0x7f));                      // write to the data register to output the character (mask off bit 8 to keep it 7 bit ASCII)
08000080  202E 0008  124          move.l    8(A6),D0
08000084  C0BC 0000  125          and.l     #127,D0
08000088  007F      
0800008A  13C0 0040  126          move.b    D0,4194370
0800008E  0042      
                     127   ; return c ;                                              // putchar() expects the character to be returned
08000090  202E 0008  128          move.l    8(A6),D0
08000094  4E5E       129          unlk      A6
08000096  4E75       130          rts
                     131   ; }
                     132   ; /*********************************************************************************************
                     133   ; **  Write Page to EEPROM Chip
                     134   ; *********************************************************************************************/
                     135   ; void WritePageToChip(char c){
                     136   _WritePageToChip:
08000098  4E56 0000  137          link      A6,#0
0800009C  48E7 2038  138          movem.l   D2/A2/A3/A4,-(A7)
080000A0  45F9 0800  139          lea       _WaitForTXByte.L,A2
080000A4  04B2      
080000A6  47F9 0800  140          lea       _printf.L,A3
080000AA  0E98      
080000AC  49F9 0800  141          lea       _CheckForACK.L,A4
080000B0  04D8      
                     142   ; int i = 0;
080000B2  4282       143          clr.l     D2
                     144   ; printf("Writing Page to EEPROM\r\n");
080000B4  4879 0800  145          pea       @m68kus~1_1.L
080000B8  19F2      
080000BA  4E93       146          jsr       (A3)
080000BC  584F       147          addq.w    #4,A7
                     148   ; // Ensure TX is ready before sending control byte
                     149   ; WaitForTXByte();
080000BE  4E92       150          jsr       (A2)
                     151   ; TXR = 0xA0;         // Write Control Byte (1010 0000)
080000C0  13FC 00A0  152          move.b    #160,4227078
080000C4  0040 8006 
                     153   ; CR = startWrite;    // Set STA bit, set WR bit
080000C8  13FC 0090  154          move.b    #144,4227080
080000CC  0040 8008 
                     155   ; WaitForTXByte();
080000D0  4E92       156          jsr       (A2)
                     157   ; printf("ACK = %d\r\n", CheckForACK());
080000D2  2F00       158          move.l    D0,-(A7)
080000D4  4E94       159          jsr       (A4)
080000D6  2200       160          move.l    D0,D1
080000D8  201F       161          move.l    (A7)+,D0
080000DA  2F01       162          move.l    D1,-(A7)
080000DC  4879 0800  163          pea       @m68kus~1_2.L
080000E0  1A0C      
080000E2  4E93       164          jsr       (A3)
080000E4  504F       165          addq.w    #8,A7
                     166   ; TXR = 0x20;         // Address Byte 1
080000E6  13FC 0020  167          move.b    #32,4227078
080000EA  0040 8006 
                     168   ; CR = Write;         // Set WR bit
080000EE  13FC 0010  169          move.b    #16,4227080
080000F2  0040 8008 
                     170   ; WaitForTXByte();
080000F6  4E92       171          jsr       (A2)
                     172   ; printf("ACK = %d\r\n", CheckForACK());
080000F8  2F00       173          move.l    D0,-(A7)
080000FA  4E94       174          jsr       (A4)
080000FC  2200       175          move.l    D0,D1
080000FE  201F       176          move.l    (A7)+,D0
08000100  2F01       177          move.l    D1,-(A7)
08000102  4879 0800  178          pea       @m68kus~1_2.L
08000106  1A0C      
08000108  4E93       179          jsr       (A3)
0800010A  504F       180          addq.w    #8,A7
                     181   ; TXR = 0x00;         // Address Byte 2
0800010C  4239 0040  182          clr.b     4227078
08000110  8006      
                     183   ; CR = Write;         // Set WR bit
08000112  13FC 0010  184          move.b    #16,4227080
08000116  0040 8008 
                     185   ; WaitForTXByte();
0800011A  4E92       186          jsr       (A2)
                     187   ; printf("ACK = %d\r\n", CheckForACK());
0800011C  2F00       188          move.l    D0,-(A7)
0800011E  4E94       189          jsr       (A4)
08000120  2200       190          move.l    D0,D1
08000122  201F       191          move.l    (A7)+,D0
08000124  2F01       192          move.l    D1,-(A7)
08000126  4879 0800  193          pea       @m68kus~1_2.L
0800012A  1A0C      
0800012C  4E93       194          jsr       (A3)
0800012E  504F       195          addq.w    #8,A7
                     196   ; for(i=0; i<128; i++){
08000130  4282       197          clr.l     D2
                     198   WritePageToChip_1:
08000132  0C82 0000  199          cmp.l     #128,D2
08000136  0080      
08000138  6C28       200          bge.s     WritePageToChip_3
                     201   ; TXR = c;            // send 1 byte of data
0800013A  13EE 000B  202          move.b    11(A6),4227078
0800013E  0040 8006 
                     203   ; CR = Write;
08000142  13FC 0010  204          move.b    #16,4227080
08000146  0040 8008 
                     205   ; WaitForTXByte();
0800014A  4E92       206          jsr       (A2)
                     207   ; if(!CheckForACK())
0800014C  4E94       208          jsr       (A4)
0800014E  4A80       209          tst.l     D0
08000150  660C       210          bne.s     WritePageToChip_4
                     211   ; printf("No ACK returned for byte #%d", i);
08000152  2F02       212          move.l    D2,-(A7)
08000154  4879 0800  213          pea       @m68kus~1_3.L
08000158  1A18      
0800015A  4E93       214          jsr       (A3)
0800015C  504F       215          addq.w    #8,A7
                     216   WritePageToChip_4:
0800015E  5282       217          addq.l    #1,D2
08000160  60D0       218          bra       WritePageToChip_1
                     219   WritePageToChip_3:
                     220   ; }
                     221   ; CR = stop;
08000162  13FC 0040  222          move.b    #64,4227080
08000166  0040 8008 
                     223   ; WaitForWriteCycle();
0800016A  4EB9 0800  224          jsr       _WaitForWriteCycle
0800016E  024A      
08000170  4CDF 1C04  225          movem.l   (A7)+,D2/A2/A3/A4
08000174  4E5E       226          unlk      A6
08000176  4E75       227          rts
                     228   ; }
                     229   ; /*********************************************************************************************
                     230   ; **  Write Byte to EEPROM Chip
                     231   ; *********************************************************************************************/
                     232   ; void WriteByteToChip(char c){
                     233   _WriteByteToChip:
08000178  4E56 0000  234          link      A6,#0
0800017C  48E7 0038  235          movem.l   A2/A3/A4,-(A7)
08000180  45F9 0800  236          lea       _WaitForTXByte.L,A2
08000184  04B2      
08000186  47F9 0800  237          lea       _printf.L,A3
0800018A  0E98      
0800018C  49F9 0800  238          lea       _CheckForACK.L,A4
08000190  04D8      
                     239   ; printf("Writing Byte to EEPROM\r\n");
08000192  4879 0800  240          pea       @m68kus~1_4.L
08000196  1A36      
08000198  4E93       241          jsr       (A3)
0800019A  584F       242          addq.w    #4,A7
                     243   ; // Ensure TX is ready before sending control byte
                     244   ; WaitForTXByte();
0800019C  4E92       245          jsr       (A2)
                     246   ; TXR = 0xA0;         // Write Control Byte (1010 0000)
0800019E  13FC 00A0  247          move.b    #160,4227078
080001A2  0040 8006 
                     248   ; CR = startWrite;    // Set STA bit, set WR bit
080001A6  13FC 0090  249          move.b    #144,4227080
080001AA  0040 8008 
                     250   ; WaitForTXByte();
080001AE  4E92       251          jsr       (A2)
                     252   ; printf("ACK = %d\r\n", CheckForACK());
080001B0  2F00       253          move.l    D0,-(A7)
080001B2  4E94       254          jsr       (A4)
080001B4  2200       255          move.l    D0,D1
080001B6  201F       256          move.l    (A7)+,D0
080001B8  2F01       257          move.l    D1,-(A7)
080001BA  4879 0800  258          pea       @m68kus~1_2.L
080001BE  1A0C      
080001C0  4E93       259          jsr       (A3)
080001C2  504F       260          addq.w    #8,A7
                     261   ; TXR = 0x20;         // Address Byte 1
080001C4  13FC 0020  262          move.b    #32,4227078
080001C8  0040 8006 
                     263   ; CR = Write;         // Set WR bit
080001CC  13FC 0010  264          move.b    #16,4227080
080001D0  0040 8008 
                     265   ; WaitForTXByte();
080001D4  4E92       266          jsr       (A2)
                     267   ; printf("ACK = %d\r\n", CheckForACK());
080001D6  2F00       268          move.l    D0,-(A7)
080001D8  4E94       269          jsr       (A4)
080001DA  2200       270          move.l    D0,D1
080001DC  201F       271          move.l    (A7)+,D0
080001DE  2F01       272          move.l    D1,-(A7)
080001E0  4879 0800  273          pea       @m68kus~1_2.L
080001E4  1A0C      
080001E6  4E93       274          jsr       (A3)
080001E8  504F       275          addq.w    #8,A7
                     276   ; TXR = 0x00;         // Address Byte 2
080001EA  4239 0040  277          clr.b     4227078
080001EE  8006      
                     278   ; CR = Write;         // Set WR bit
080001F0  13FC 0010  279          move.b    #16,4227080
080001F4  0040 8008 
                     280   ; WaitForTXByte();
080001F8  4E92       281          jsr       (A2)
                     282   ; printf("ACK = %d\r\n", CheckForACK());
080001FA  2F00       283          move.l    D0,-(A7)
080001FC  4E94       284          jsr       (A4)
080001FE  2200       285          move.l    D0,D1
08000200  201F       286          move.l    (A7)+,D0
08000202  2F01       287          move.l    D1,-(A7)
08000204  4879 0800  288          pea       @m68kus~1_2.L
08000208  1A0C      
0800020A  4E93       289          jsr       (A3)
0800020C  504F       290          addq.w    #8,A7
                     291   ; TXR = c;            // send 1 byte of data
0800020E  13EE 000B  292          move.b    11(A6),4227078
08000212  0040 8006 
                     293   ; CR = Write;
08000216  13FC 0010  294          move.b    #16,4227080
0800021A  0040 8008 
                     295   ; WaitForTXByte();
0800021E  4E92       296          jsr       (A2)
                     297   ; printf("ACK = %d\r\n", CheckForACK());
08000220  2F00       298          move.l    D0,-(A7)
08000222  4E94       299          jsr       (A4)
08000224  2200       300          move.l    D0,D1
08000226  201F       301          move.l    (A7)+,D0
08000228  2F01       302          move.l    D1,-(A7)
0800022A  4879 0800  303          pea       @m68kus~1_2.L
0800022E  1A0C      
08000230  4E93       304          jsr       (A3)
08000232  504F       305          addq.w    #8,A7
                     306   ; CR = stop;
08000234  13FC 0040  307          move.b    #64,4227080
08000238  0040 8008 
                     308   ; WaitForWriteCycle();
0800023C  4EB9 0800  309          jsr       _WaitForWriteCycle
08000240  024A      
08000242  4CDF 1C00  310          movem.l   (A7)+,A2/A3/A4
08000246  4E5E       311          unlk      A6
08000248  4E75       312          rts
                     313   ; }
                     314   ; /*********************************************************************************************
                     315   ; ** Wait For EEPROM to complete internal Write Cycle
                     316   ; *********************************************************************************************/
                     317   ; void WaitForWriteCycle(void){
                     318   _WaitForWriteCycle:
                     319   ; do
                     320   ; {
                     321   WaitForWriteCycle_1:
                     322   ; TXR = 0xA0; // Write Control Byte (1010 0000)
0800024A  13FC 00A0  323          move.b    #160,4227078
0800024E  0040 8006 
                     324   ; CR = start;
08000252  13FC 0080  325          move.b    #128,4227080
08000256  0040 8008 
                     326   ; printf("Waiting for Internal Write!\r\n");
0800025A  4879 0800  327          pea       @m68kus~1_5.L
0800025E  1A50      
08000260  4EB9 0800  328          jsr       _printf
08000264  0E98      
08000266  584F       329          addq.w    #4,A7
08000268  41F9 0800  330          lea       _CheckForACK.L,A0
0800026C  04D8      
0800026E  2008       331          move.l    A0,D0
08000270  67D8       332          beq       WaitForWriteCycle_1
                     333   ; } while (!CheckForACK);
                     334   ; printf("Internal Write Complete!\r\n");
08000272  4879 0800  335          pea       @m68kus~1_6.L
08000276  1A6E      
08000278  4EB9 0800  336          jsr       _printf
0800027C  0E98      
0800027E  584F       337          addq.w    #4,A7
                     338   ; return;
08000280  4E75       339          rts
                     340   ; }
                     341   ; /*********************************************************************************************
                     342   ; **  Read Byte from EEPROM flash
                     343   ; *********************************************************************************************/
                     344   ; void ReadPageFromChip(char expectedByte){
                     345   _ReadPageFromChip:
08000282  4E56 FFFC  346          link      A6,#-4
08000286  48E7 2038  347          movem.l   D2/A2/A3/A4,-(A7)
0800028A  45F9 0800  348          lea       _printf.L,A2
0800028E  0E98      
08000290  47F9 0800  349          lea       _CheckForACK.L,A3
08000294  04D8      
08000296  49F9 0800  350          lea       _WaitForTXByte.L,A4
0800029A  04B2      
                     351   ; int i = 0;
0800029C  4282       352          clr.l     D2
                     353   ; char receivedByte;
                     354   ; printf("Reading Page from EEPROM \r\n");
0800029E  4879 0800  355          pea       @m68kus~1_7.L
080002A2  1A8A      
080002A4  4E92       356          jsr       (A2)
080002A6  584F       357          addq.w    #4,A7
                     358   ; // Ensure TX is ready before sending control byte
                     359   ; WaitForTXByte();
080002A8  4E94       360          jsr       (A4)
                     361   ; TXR = 0xA0;         // Write Control Byte (1010 0000)
080002AA  13FC 00A0  362          move.b    #160,4227078
080002AE  0040 8006 
                     363   ; CR = startWrite;    // set STA bit
080002B2  13FC 0090  364          move.b    #144,4227080
080002B6  0040 8008 
                     365   ; WaitForTXByte();
080002BA  4E94       366          jsr       (A4)
                     367   ; printf("ACK = %d\r\n", CheckForACK());
080002BC  2F00       368          move.l    D0,-(A7)
080002BE  4E93       369          jsr       (A3)
080002C0  2200       370          move.l    D0,D1
080002C2  201F       371          move.l    (A7)+,D0
080002C4  2F01       372          move.l    D1,-(A7)
080002C6  4879 0800  373          pea       @m68kus~1_2.L
080002CA  1A0C      
080002CC  4E92       374          jsr       (A2)
080002CE  504F       375          addq.w    #8,A7
                     376   ; TXR = 0x20;         // Address Byte 1
080002D0  13FC 0020  377          move.b    #32,4227078
080002D4  0040 8006 
                     378   ; CR = Write;         // set WR bit
080002D8  13FC 0010  379          move.b    #16,4227080
080002DC  0040 8008 
                     380   ; WaitForTXByte();
080002E0  4E94       381          jsr       (A4)
                     382   ; printf("ACK = %d\r\n", CheckForACK());
080002E2  2F00       383          move.l    D0,-(A7)
080002E4  4E93       384          jsr       (A3)
080002E6  2200       385          move.l    D0,D1
080002E8  201F       386          move.l    (A7)+,D0
080002EA  2F01       387          move.l    D1,-(A7)
080002EC  4879 0800  388          pea       @m68kus~1_2.L
080002F0  1A0C      
080002F2  4E92       389          jsr       (A2)
080002F4  504F       390          addq.w    #8,A7
                     391   ; TXR = 0x00;         // Address Byte 2
080002F6  4239 0040  392          clr.b     4227078
080002FA  8006      
                     393   ; CR = Write;         // set WR bit
080002FC  13FC 0010  394          move.b    #16,4227080
08000300  0040 8008 
                     395   ; WaitForTXByte();
08000304  4E94       396          jsr       (A4)
                     397   ; printf("ACK = %d\r\n", CheckForACK());
08000306  2F00       398          move.l    D0,-(A7)
08000308  4E93       399          jsr       (A3)
0800030A  2200       400          move.l    D0,D1
0800030C  201F       401          move.l    (A7)+,D0
0800030E  2F01       402          move.l    D1,-(A7)
08000310  4879 0800  403          pea       @m68kus~1_2.L
08000314  1A0C      
08000316  4E92       404          jsr       (A2)
08000318  504F       405          addq.w    #8,A7
                     406   ; TXR = 0xA1;         // Read Control Byte (1010 0001)
0800031A  13FC 00A1  407          move.b    #161,4227078
0800031E  0040 8006 
                     408   ; CR = startWrite;    // Set STA bit, WR bit
08000322  13FC 0090  409          move.b    #144,4227080
08000326  0040 8008 
                     410   ; WaitForTXByte();
0800032A  4E94       411          jsr       (A4)
                     412   ; printf("ACK = %d\r\n", CheckForACK());
0800032C  2F00       413          move.l    D0,-(A7)
0800032E  4E93       414          jsr       (A3)
08000330  2200       415          move.l    D0,D1
08000332  201F       416          move.l    (A7)+,D0
08000334  2F01       417          move.l    D1,-(A7)
08000336  4879 0800  418          pea       @m68kus~1_2.L
0800033A  1A0C      
0800033C  4E92       419          jsr       (A2)
0800033E  504F       420          addq.w    #8,A7
                     421   ; for (i=0; i<128; i++){
08000340  4282       422          clr.l     D2
                     423   ReadPageFromChip_1:
08000342  0C82 0000  424          cmp.l     #128,D2
08000346  0080      
08000348  6C00 0068  425          bge       ReadPageFromChip_3
                     426   ; if (i != 127)
0800034C  0C82 0000  427          cmp.l     #127,D2
08000350  007F      
08000352  670A       428          beq.s     ReadPageFromChip_4
                     429   ; CR = ReadIACK;
08000354  13FC 0021  430          move.b    #33,4227080
08000358  0040 8008 
0800035C  6008       431          bra.s     ReadPageFromChip_5
                     432   ReadPageFromChip_4:
                     433   ; else  CR = ReadNACKIACK;
0800035E  13FC 0029  434          move.b    #41,4227080
08000362  0040 8008 
                     435   ReadPageFromChip_5:
                     436   ; WaitForReceivedByte();
08000366  4EB9 0800  437          jsr       _WaitForReceivedByte
0800036A  04C8      
                     438   ; receivedByte = RXR;
0800036C  1D79 0040  439          move.b    4227078,-1(A6)
08000370  8006 FFFF 
                     440   ; if (i != 127 && !CheckForACK())
08000374  0C82 0000  441          cmp.l     #127,D2
08000378  007F      
0800037A  6712       442          beq.s     ReadPageFromChip_6
0800037C  4E93       443          jsr       (A3)
0800037E  4A80       444          tst.l     D0
08000380  660C       445          bne.s     ReadPageFromChip_6
                     446   ; printf("No ACK returned for byte #%d", i);
08000382  2F02       447          move.l    D2,-(A7)
08000384  4879 0800  448          pea       @m68kus~1_3.L
08000388  1A18      
0800038A  4E92       449          jsr       (A2)
0800038C  504F       450          addq.w    #8,A7
                     451   ReadPageFromChip_6:
                     452   ; if (receivedByte != expectedByte){
0800038E  102E FFFF  453          move.b    -1(A6),D0
08000392  B02E 000B  454          cmp.b     11(A6),D0
08000396  6716       455          beq.s     ReadPageFromChip_8
                     456   ; printf("Page Read Failed at Byte #%d\r\n", i);
08000398  2F02       457          move.l    D2,-(A7)
0800039A  4879 0800  458          pea       @m68kus~1_8.L
0800039E  1AA6      
080003A0  4E92       459          jsr       (A2)
080003A2  504F       460          addq.w    #8,A7
                     461   ; CR = stop;
080003A4  13FC 0040  462          move.b    #64,4227080
080003A8  0040 8008 
                     463   ; return;
080003AC  6016       464          bra.s     ReadPageFromChip_10
                     465   ReadPageFromChip_8:
080003AE  5282       466          addq.l    #1,D2
080003B0  6090       467          bra       ReadPageFromChip_1
                     468   ReadPageFromChip_3:
                     469   ; }
                     470   ; }
                     471   ; CR = stop;
080003B2  13FC 0040  472          move.b    #64,4227080
080003B6  0040 8008 
                     473   ; printf("Page Read Successful\r\n");
080003BA  4879 0800  474          pea       @m68kus~1_9.L
080003BE  1AC6      
080003C0  4E92       475          jsr       (A2)
080003C2  584F       476          addq.w    #4,A7
                     477   ReadPageFromChip_10:
080003C4  4CDF 1C04  478          movem.l   (A7)+,D2/A2/A3/A4
080003C8  4E5E       479          unlk      A6
080003CA  4E75       480          rts
                     481   ; }
                     482   ; /*********************************************************************************************
                     483   ; **  Read Byte from EEPROM flash
                     484   ; *********************************************************************************************/
                     485   ; char ReadByteFromChip(void){
                     486   _ReadByteFromChip:
080003CC  4E56 FFFC  487          link      A6,#-4
080003D0  48E7 0038  488          movem.l   A2/A3/A4,-(A7)
080003D4  45F9 0800  489          lea       _WaitForTXByte.L,A2
080003D8  04B2      
080003DA  47F9 0800  490          lea       _printf.L,A3
080003DE  0E98      
080003E0  49F9 0800  491          lea       _CheckForACK.L,A4
080003E4  04D8      
                     492   ; char receivedByte;
                     493   ; printf("Reading Byte from EEPROM \r\n");
080003E6  4879 0800  494          pea       @m68kus~1_10.L
080003EA  1ADE      
080003EC  4E93       495          jsr       (A3)
080003EE  584F       496          addq.w    #4,A7
                     497   ; // Ensure TX is ready before sending control byte
                     498   ; WaitForTXByte();
080003F0  4E92       499          jsr       (A2)
                     500   ; TXR = 0xA0;         // Write Control Byte (1010 0000)
080003F2  13FC 00A0  501          move.b    #160,4227078
080003F6  0040 8006 
                     502   ; CR = startWrite;    // set STA bit
080003FA  13FC 0090  503          move.b    #144,4227080
080003FE  0040 8008 
                     504   ; WaitForTXByte();
08000402  4E92       505          jsr       (A2)
                     506   ; printf("ACK = %d\r\n", CheckForACK());
08000404  2F00       507          move.l    D0,-(A7)
08000406  4E94       508          jsr       (A4)
08000408  2200       509          move.l    D0,D1
0800040A  201F       510          move.l    (A7)+,D0
0800040C  2F01       511          move.l    D1,-(A7)
0800040E  4879 0800  512          pea       @m68kus~1_2.L
08000412  1A0C      
08000414  4E93       513          jsr       (A3)
08000416  504F       514          addq.w    #8,A7
                     515   ; TXR = 0x20;         // Address Byte 1
08000418  13FC 0020  516          move.b    #32,4227078
0800041C  0040 8006 
                     517   ; CR = Write;         // set WR bit
08000420  13FC 0010  518          move.b    #16,4227080
08000424  0040 8008 
                     519   ; WaitForTXByte();
08000428  4E92       520          jsr       (A2)
                     521   ; printf("ACK = %d\r\n", CheckForACK());
0800042A  2F00       522          move.l    D0,-(A7)
0800042C  4E94       523          jsr       (A4)
0800042E  2200       524          move.l    D0,D1
08000430  201F       525          move.l    (A7)+,D0
08000432  2F01       526          move.l    D1,-(A7)
08000434  4879 0800  527          pea       @m68kus~1_2.L
08000438  1A0C      
0800043A  4E93       528          jsr       (A3)
0800043C  504F       529          addq.w    #8,A7
                     530   ; TXR = 0x00;         // Address Byte 2
0800043E  4239 0040  531          clr.b     4227078
08000442  8006      
                     532   ; CR = Write;         // set WR bit
08000444  13FC 0010  533          move.b    #16,4227080
08000448  0040 8008 
                     534   ; WaitForTXByte();
0800044C  4E92       535          jsr       (A2)
                     536   ; printf("ACK = %d\r\n", CheckForACK());
0800044E  2F00       537          move.l    D0,-(A7)
08000450  4E94       538          jsr       (A4)
08000452  2200       539          move.l    D0,D1
08000454  201F       540          move.l    (A7)+,D0
08000456  2F01       541          move.l    D1,-(A7)
08000458  4879 0800  542          pea       @m68kus~1_2.L
0800045C  1A0C      
0800045E  4E93       543          jsr       (A3)
08000460  504F       544          addq.w    #8,A7
                     545   ; TXR = 0xA1;         // Read Control Byte (1010 0001)
08000462  13FC 00A1  546          move.b    #161,4227078
08000466  0040 8006 
                     547   ; CR = startWrite;    // Set STA bit, WR bit
0800046A  13FC 0090  548          move.b    #144,4227080
0800046E  0040 8008 
                     549   ; WaitForTXByte();
08000472  4E92       550          jsr       (A2)
                     551   ; printf("ACK = %d\r\n", CheckForACK());
08000474  2F00       552          move.l    D0,-(A7)
08000476  4E94       553          jsr       (A4)
08000478  2200       554          move.l    D0,D1
0800047A  201F       555          move.l    (A7)+,D0
0800047C  2F01       556          move.l    D1,-(A7)
0800047E  4879 0800  557          pea       @m68kus~1_2.L
08000482  1A0C      
08000484  4E93       558          jsr       (A3)
08000486  504F       559          addq.w    #8,A7
                     560   ; CR = ReadNACKIACK;
08000488  13FC 0029  561          move.b    #41,4227080
0800048C  0040 8008 
                     562   ; WaitForReceivedByte();
08000490  4EB9 0800  563          jsr       _WaitForReceivedByte
08000494  04C8      
                     564   ; receivedByte = RXR;
08000496  1D79 0040  565          move.b    4227078,-1(A6)
0800049A  8006 FFFF 
                     566   ; CR = stop;
0800049E  13FC 0040  567          move.b    #64,4227080
080004A2  0040 8008 
                     568   ; return receivedByte;
080004A6  102E FFFF  569          move.b    -1(A6),D0
080004AA  4CDF 1C00  570          movem.l   (A7)+,A2/A3/A4
080004AE  4E5E       571          unlk      A6
080004B0  4E75       572          rts
                     573   ; }
                     574   ; /*********************************************************************************************
                     575   ; ** Probe SR register to check if TIP bit is clear
                     576   ; *********************************************************************************************/
                     577   ; void WaitForTXByte(void){
                     578   _WaitForTXByte:
                     579   ; while ((SR & 0x02) >> 1 == 1);
                     580   WaitForTXByte_1:
080004B2  1039 0040  581          move.b    4227080,D0
080004B6  8008      
080004B8  C03C 0002  582          and.b     #2,D0
080004BC  E208       583          lsr.b     #1,D0
080004BE  0C00 0001  584          cmp.b     #1,D0
080004C2  6602       585          bne.s     WaitForTXByte_3
080004C4  60EC       586          bra       WaitForTXByte_1
                     587   WaitForTXByte_3:
080004C6  4E75       588          rts
                     589   ; }
                     590   ; /*********************************************************************************************
                     591   ; ** Probe RX register to check if it has received data from slave
                     592   ; *********************************************************************************************/
                     593   ; void WaitForReceivedByte(void){
                     594   _WaitForReceivedByte:
                     595   ; while ((SR & 0x01) == 0);
                     596   WaitForReceivedByte_1:
080004C8  1039 0040  597          move.b    4227080,D0
080004CC  8008      
080004CE  C03C 0001  598          and.b     #1,D0
080004D2  6602       599          bne.s     WaitForReceivedByte_3
080004D4  60F2       600          bra       WaitForReceivedByte_1
                     601   WaitForReceivedByte_3:
080004D6  4E75       602          rts
                     603   ; }
                     604   ; /*********************************************************************************************
                     605   ; ** Probe Status Register to check if slave has ACKed
                     606   ; Returns 0 of not ACKed and 1 if ACKed
                     607   ; *********************************************************************************************/
                     608   ; int CheckForACK(void){
                     609   _CheckForACK:
                     610   ; if ((SR & 0x80)>> 7 == 1)
080004D8  1039 0040  611          move.b    4227080,D0
080004DC  8008      
080004DE  C07C 00FF  612          and.w     #255,D0
080004E2  C07C 0080  613          and.w     #128,D0
080004E6  EE40       614          asr.w     #7,D0
080004E8  0C40 0001  615          cmp.w     #1,D0
080004EC  6604       616          bne.s     CheckForACK_1
                     617   ; return 0;
080004EE  4280       618          clr.l     D0
080004F0  6002       619          bra.s     CheckForACK_3
                     620   CheckForACK_1:
                     621   ; else return 1;
080004F2  7001       622          moveq     #1,D0
                     623   CheckForACK_3:
080004F4  4E75       624          rts
                     625   ; }
                     626   ; /*********************************************************************************************
                     627   ; ** Initialize IIC Communication
                     628   ; *********************************************************************************************/
                     629   ; void IIC_Init(void){
                     630   _IIC_Init:
                     631   ; // Set Clock Frequency to 100kHz as per page 7 of in IIC controller Document
                     632   ; CTR = 0x00; // Clear EN bit to set clock value first
080004F6  4239 0040  633          clr.b     4227076
080004FA  8004      
                     634   ; PRERlo = 0x31;
080004FC  13FC 0031  635          move.b    #49,4227072
08000500  0040 8000 
                     636   ; PRERhi = 0x00;
08000504  4239 0040  637          clr.b     4227074
08000508  8002      
                     638   ; // Enable EN bit (core is disable) & Disable IEN bit (interrupts disable)
                     639   ; CTR = 0x80;
0800050A  13FC 0080  640          move.b    #128,4227076
0800050E  0040 8004 
08000512  4E75       641          rts
                     642   ; }
                     643   ; void main(void)
                     644   ; {
                     645   _main:
08000514  4E56 FFFC  646          link      A6,#-4
08000518  48E7 2020  647          movem.l   D2/A2,-(A7)
0800051C  45F9 0800  648          lea       _printf.L,A2
08000520  0E98      
                     649   ; char sendByte = 75;
08000522  744B       650          moveq     #75,D2
                     651   ; char recievedByte;
                     652   ; scanflush() ;                       // flush any text that may have been typed ahead
08000524  4EB9 0800  653          jsr       _scanflush
08000528  0816      
                     654   ; printf("\r\nHello IIC Lab\r\n");
0800052A  4879 0800  655          pea       @m68kus~1_11.L
0800052E  1AFA      
08000530  4E92       656          jsr       (A2)
08000532  584F       657          addq.w    #4,A7
                     658   ; IIC_Init();
08000534  4EB9 0800  659          jsr       _IIC_Init
08000538  04F6      
                     660   ; WriteByteToChip(sendByte);
0800053A  4882       661          ext.w     D2
0800053C  48C2       662          ext.l     D2
0800053E  2F02       663          move.l    D2,-(A7)
08000540  4EB9 0800  664          jsr       _WriteByteToChip
08000544  0178      
08000546  584F       665          addq.w    #4,A7
                     666   ; recievedByte = ReadByteFromChip();
08000548  4EB9 0800  667          jsr       _ReadByteFromChip
0800054C  03CC      
0800054E  1D40 FFFF  668          move.b    D0,-1(A6)
                     669   ; printf("This is the sent Byte: %u\r\n", sendByte);
08000552  4882       670          ext.w     D2
08000554  48C2       671          ext.l     D2
08000556  2F02       672          move.l    D2,-(A7)
08000558  4879 0800  673          pea       @m68kus~1_12.L
0800055C  1B0C      
0800055E  4E92       674          jsr       (A2)
08000560  504F       675          addq.w    #8,A7
                     676   ; printf("This is the received Byte: %u\r\n", recievedByte);
08000562  122E FFFF  677          move.b    -1(A6),D1
08000566  4881       678          ext.w     D1
08000568  48C1       679          ext.l     D1
0800056A  2F01       680          move.l    D1,-(A7)
0800056C  4879 0800  681          pea       @m68kus~1_13.L
08000570  1B28      
08000572  4E92       682          jsr       (A2)
08000574  504F       683          addq.w    #8,A7
                     684   ; WritePageToChip(sendByte);
08000576  4882       685          ext.w     D2
08000578  48C2       686          ext.l     D2
0800057A  2F02       687          move.l    D2,-(A7)
0800057C  4EB9 0800  688          jsr       _WritePageToChip
08000580  0098      
08000582  584F       689          addq.w    #4,A7
                     690   ; ReadPageFromChip(sendByte);
08000584  4882       691          ext.w     D2
08000586  48C2       692          ext.l     D2
08000588  2F02       693          move.l    D2,-(A7)
0800058A  4EB9 0800  694          jsr       _ReadPageFromChip
0800058E  0282      
08000590  584F       695          addq.w    #4,A7
                     696   ; while(1);
                     697   main_1:
08000592  60FE       698          bra       main_1
                     699   ; // programs should NOT exit as there is nothing to Exit TO !!!!!!
                     700   ; // There is no OS - just press the reset button to end program and call debug
                     701   ; }
                     702   @doscan_read:
08000594  4E56 FFFC  703          link      A6,#-4
08000598  2F0A       704          move.l    A2,-(A7)
0800059A  45F9 0800  705          lea       @doscan_lpbuf.L,A2
0800059E  1C64      
080005A0  4AAE 0008  706          tst.l     8(A6)
080005A4  6700 0032  707          beq       @doscan_read_1
080005A8  206E 0008  708          move.l    8(A6),A0
080005AC  58AE 0008  709          addq.l    #4,8(A6)
080005B0  2050       710          move.l    (A0),A0
080005B2  1010       711          move.b    (A0),D0
080005B4  4880       712          ext.w     D0
080005B6  48C0       713          ext.l     D0
080005B8  2D40 FFFC  714          move.l    D0,-4(A6)
080005BC  4201       715          clr.b     D1
080005BE  C2BC 0000  716          and.l     #255,D1
080005C2  00FF      
080005C4  B081       717          cmp.l     D1,D0
080005C6  6706       718          beq.s     @doscan_read_3
080005C8  202E FFFC  719          move.l    -4(A6),D0
080005CC  6006       720          bra.s     @doscan_read_4
                     721   @doscan_read_3:
080005CE  70FF       722          moveq     #-1,D0
080005D0  4880       723          ext.w     D0
080005D2  48C0       724          ext.l     D0
                     725   @doscan_read_4:
080005D4  6000 0036  726          bra       @doscan_read_5
                     727   @doscan_read_1:
080005D8  2052       728          move.l    (A2),A0
080005DA  1010       729          move.b    (A0),D0
080005DC  6624       730          bne.s     @doscan_read_6
080005DE  4879 0800  731          pea       @doscan_buf.L
080005E2  1C68      
080005E4  4EB9 0800  732          jsr       _gets
080005E8  0F68      
080005EA  584F       733          addq.w    #4,A7
080005EC  2480       734          move.l    D0,(A2)
080005EE  4879 0800  735          pea       @doscan_1.L
080005F2  1B48      
080005F4  4879 0800  736          pea       @doscan_buf.L
080005F8  1C68      
080005FA  4EB9 0800  737          jsr       _strcat
080005FE  0FFA      
08000600  504F       738          addq.w    #8,A7
                     739   @doscan_read_6:
08000602  2052       740          move.l    (A2),A0
08000604  5292       741          addq.l    #1,(A2)
08000606  1010       742          move.b    (A0),D0
08000608  4880       743          ext.w     D0
0800060A  48C0       744          ext.l     D0
                     745   @doscan_read_5:
0800060C  245F       746          move.l    (A7)+,A2
0800060E  4E5E       747          unlk      A6
08000610  4E75       748          rts
                     749   @doscan_putback:
08000612  4E56 0000  750          link      A6,#0
08000616  48E7 3000  751          movem.l   D2/D3,-(A7)
0800061A  242E 000C  752          move.l    12(A6),D2
0800061E  262E 0008  753          move.l    8(A6),D3
08000622  6718       754          beq.s     @doscan_putback_1
08000624  0C82 FFFF  755          cmp.l     #-1,D2
08000628  FFFF      
0800062A  670A       756          beq.s     @doscan_putback_3
0800062C  5983       757          subq.l    #4,D3
0800062E  2043       758          move.l    D3,A0
08000630  2050       759          move.l    (A0),A0
08000632  1082       760          move.b    D2,(A0)
08000634  6004       761          bra.s     @doscan_putback_4
                     762   @doscan_putback_3:
08000636  2043       763          move.l    D3,A0
08000638  5390       764          subq.l    #1,(A0)
                     765   @doscan_putback_4:
0800063A  6030       766          bra.s     @doscan_putback_6
                     767   @doscan_putback_1:
0800063C  41F9 0800  768          lea       @doscan_buf.L,A0
08000640  1C68      
08000642  2008       769          move.l    A0,D0
08000644  B0B9 0800  770          cmp.l     @doscan_lpbuf.L,D0
08000648  1C64      
0800064A  6612       771          bne.s     @doscan_putback_5
0800064C  4239 0800  772          clr.b     @doscan_buf.L
08000650  1C68      
08000652  2F02       773          move.l    D2,-(A7)
08000654  4EB9 0800  774          jsr       _ungetch
08000658  102C      
0800065A  584F       775          addq.w    #4,A7
0800065C  600E       776          bra.s     @doscan_putback_6
                     777   @doscan_putback_5:
0800065E  53B9 0800  778          subq.l    #1,@doscan_lpbuf.L
08000662  1C64      
08000664  2079 0800  779          move.l    @doscan_lpbuf.L,A0
08000668  1C64      
0800066A  1082       780          move.b    D2,(A0)
                     781   @doscan_putback_6:
0800066C  2002       782          move.l    D2,D0
0800066E  4CDF 000C  783          movem.l   (A7)+,D2/D3
08000672  4E5E       784          unlk      A6
08000674  4E75       785          rts
                     786   @doscan_space:
08000676  4E56 0000  787          link      A6,#0
0800067A  2F02       788          move.l    D2,-(A7)
                     789   @doscan_space_1:
0800067C  2F2E 0008  790          move.l    8(A6),-(A7)
08000680  4EB9 0800  791          jsr       @doscan_read
08000684  0594      
08000686  584F       792          addq.w    #4,A7
08000688  2400       793          move.l    D0,D2
0800068A  206E 000C  794          move.l    12(A6),A0
0800068E  5290       795          addq.l    #1,(A0)
08000690  2002       796          move.l    D2,D0
08000692  5280       797          addq.l    #1,D0
08000694  41F9 0800  798          lea       __ctype.L,A0
08000698  1B4A      
0800069A  1030 0800  799          move.b    0(A0,D0.L),D0
0800069E  C03C 0010  800          and.b     #16,D0
080006A2  66D8       801          bne       @doscan_space_1
080006A4  2002       802          move.l    D2,D0
080006A6  241F       803          move.l    (A7)+,D2
080006A8  4E5E       804          unlk      A6
080006AA  4E75       805          rts
                     806   @doscan_select:
080006AC  4E56 0000  807          link      A6,#0
080006B0  48E7 3F20  808          movem.l   D2/D3/D4/D5/D6/D7/A2,-(A7)
080006B4  262E 000C  809          move.l    12(A6),D3
080006B8  2C2E 0018  810          move.l    24(A6),D6
080006BC  2E2E 0014  811          move.l    20(A6),D7
080006C0  2043       812          move.l    D3,A0
080006C2  1010       813          move.b    (A0),D0
080006C4  0C00 005E  814          cmp.b     #94,D0
080006C8  6608       815          bne.s     @doscan_select_1
080006CA  347C 0001  816          move.w    #1,A2
080006CE  5283       817          addq.l    #1,D3
080006D0  6004       818          bra.s     @doscan_select_2
                     819   @doscan_select_1:
080006D2  347C 0000  820          move.w    #0,A2
                     821   @doscan_select_2:
080006D6  202E 0010  822          move.l    16(A6),D0
080006DA  53AE 0010  823          subq.l    #1,16(A6)
080006DE  4A80       824          tst.l     D0
080006E0  6700 00F6  825          beq       @doscan_select_5
080006E4  2F2E 0008  826          move.l    8(A6),-(A7)
080006E8  4EB9 0800  827          jsr       @doscan_read
080006EC  0594      
080006EE  584F       828          addq.w    #4,A7
080006F0  2800       829          move.l    D0,D4
080006F2  0C84 FFFF  830          cmp.l     #-1,D4
080006F6  FFFF      
080006F8  6604       831          bne.s     @doscan_select_6
080006FA  6000 00DC  832          bra       @doscan_select_5
                     833   @doscan_select_6:
080006FE  206E 001C  834          move.l    28(A6),A0
08000702  5290       835          addq.l    #1,(A0)
08000704  4285       836          clr.l     D5
08000706  4282       837          clr.l     D2
                     838   @doscan_select_8:
08000708  2043       839          move.l    D3,A0
0800070A  1030 2800  840          move.b    0(A0,D2.L),D0
0800070E  0C00 005D  841          cmp.b     #93,D0
08000712  6700 0086  842          beq       @doscan_select_10
08000716  4A82       843          tst.l     D2
08000718  6710       844          beq.s     @doscan_select_11
0800071A  2043       845          move.l    D3,A0
0800071C  1030 2800  846          move.b    0(A0,D2.L),D0
08000720  0C00 005D  847          cmp.b     #93,D0
08000724  6604       848          bne.s     @doscan_select_11
08000726  6000 0072  849          bra       @doscan_select_10
                     850   @doscan_select_11:
0800072A  4A82       851          tst.l     D2
0800072C  6700 0056  852          beq       @doscan_select_15
08000730  2043       853          move.l    D3,A0
08000732  1030 2800  854          move.b    0(A0,D2.L),D0
08000736  0C00 002D  855          cmp.b     #45,D0
0800073A  6600 0048  856          bne       @doscan_select_15
0800073E  2043       857          move.l    D3,A0
08000740  2002       858          move.l    D2,D0
08000742  5380       859          subq.l    #1,D0
08000744  2243       860          move.l    D3,A1
08000746  2202       861          move.l    D2,D1
08000748  5281       862          addq.l    #1,D1
0800074A  2F00       863          move.l    D0,-(A7)
0800074C  1030 0800  864          move.b    0(A0,D0.L),D0
08000750  B031 1800  865          cmp.b     0(A1,D1.L),D0
08000754  6C00 002E  866          bge       @doscan_select_15
08000758  201F       867          move.l    (A7)+,D0
0800075A  2043       868          move.l    D3,A0
0800075C  2002       869          move.l    D2,D0
0800075E  5380       870          subq.l    #1,D0
08000760  1030 0800  871          move.b    0(A0,D0.L),D0
08000764  4880       872          ext.w     D0
08000766  48C0       873          ext.l     D0
08000768  B880       874          cmp.l     D0,D4
0800076A  6D14       875          blt.s     @doscan_select_17
0800076C  2043       876          move.l    D3,A0
0800076E  2002       877          move.l    D2,D0
08000770  5280       878          addq.l    #1,D0
08000772  1030 0800  879          move.b    0(A0,D0.L),D0
08000776  4880       880          ext.w     D0
08000778  48C0       881          ext.l     D0
0800077A  B880       882          cmp.l     D0,D4
0800077C  6E02       883          bgt.s     @doscan_select_17
0800077E  601A       884          bra.s     @doscan_select_10
                     885   @doscan_select_17:
08000780  5282       886          addq.l    #1,D2
08000782  6010       887          bra.s     @doscan_select_19
                     888   @doscan_select_15:
08000784  2043       889          move.l    D3,A0
08000786  1030 2800  890          move.b    0(A0,D2.L),D0
0800078A  4880       891          ext.w     D0
0800078C  48C0       892          ext.l     D0
0800078E  B880       893          cmp.l     D0,D4
08000790  6602       894          bne.s     @doscan_select_19
08000792  6006       895          bra.s     @doscan_select_10
                     896   @doscan_select_19:
08000794  5282       897          addq.l    #1,D2
08000796  6000 FF70  898          bra       @doscan_select_8
                     899   @doscan_select_10:
0800079A  4A82       900          tst.l     D2
0800079C  670C       901          beq.s     @doscan_select_23
0800079E  2043       902          move.l    D3,A0
080007A0  1030 2800  903          move.b    0(A0,D2.L),D0
080007A4  0C00 005D  904          cmp.b     #93,D0
080007A8  6702       905          beq.s     @doscan_select_21
                     906   @doscan_select_23:
080007AA  7A01       907          moveq     #1,D5
                     908   @doscan_select_21:
080007AC  200A       909          move.l    A2,D0
080007AE  6712       910          beq.s     @doscan_select_24
080007B0  4A85       911          tst.l     D5
080007B2  660C       912          bne.s     @doscan_select_26
080007B4  4A87       913          tst.l     D7
080007B6  6606       914          bne.s     @doscan_select_28
080007B8  2046       915          move.l    D6,A0
080007BA  5286       916          addq.l    #1,D6
080007BC  1084       917          move.b    D4,(A0)
                     918   @doscan_select_28:
080007BE  6014       919          bra.s     @doscan_select_4
                     920   @doscan_select_26:
080007C0  6016       921          bra.s     @doscan_select_5
                     922   @doscan_select_24:
080007C2  4A85       923          tst.l     D5
080007C4  670C       924          beq.s     @doscan_select_30
080007C6  4A87       925          tst.l     D7
080007C8  6606       926          bne.s     @doscan_select_32
080007CA  2046       927          move.l    D6,A0
080007CC  5286       928          addq.l    #1,D6
080007CE  1084       929          move.b    D4,(A0)
                     930   @doscan_select_32:
080007D0  6002       931          bra.s     @doscan_select_4
                     932   @doscan_select_30:
080007D2  6004       933          bra.s     @doscan_select_5
                     934   @doscan_select_4:
080007D4  6000 FF00  935          bra       @doscan_select_2
                     936   @doscan_select_5:
080007D8  0C84 FFFF  937          cmp.l     #-1,D4
080007DC  FFFF      
080007DE  6714       938          beq.s     @doscan_select_34
080007E0  2F04       939          move.l    D4,-(A7)
080007E2  2F2E 0008  940          move.l    8(A6),-(A7)
080007E6  4EB9 0800  941          jsr       @doscan_putback
080007EA  0612      
080007EC  504F       942          addq.w    #8,A7
080007EE  206E 001C  943          move.l    28(A6),A0
080007F2  5390       944          subq.l    #1,(A0)
                     945   @doscan_select_34:
080007F4  4A87       946          tst.l     D7
080007F6  6604       947          bne.s     @doscan_select_36
080007F8  2046       948          move.l    D6,A0
080007FA  4210       949          clr.b     (A0)
                     950   @doscan_select_36:
080007FC  5283       951          addq.l    #1,D3
080007FE  2043       952          move.l    D3,A0
08000800  1010       953          move.b    (A0),D0
08000802  0C00 005D  954          cmp.b     #93,D0
08000806  6702       955          beq.s     @doscan_select_40
08000808  60F2       956          bra       @doscan_select_36
                     957   @doscan_select_40:
0800080A  5283       958          addq.l    #1,D3
0800080C  2003       959          move.l    D3,D0
0800080E  4CDF 04FC  960          movem.l   (A7)+,D2/D3/D4/D5/D6/D7/A2
08000812  4E5E       961          unlk      A6
08000814  4E75       962          rts
                     963   _scanflush:
08000816  41F9 0800  964          lea       @doscan_buf.L,A0
0800081A  1C68      
0800081C  23C8 0800  965          move.l    A0,@doscan_lpbuf.L
08000820  1C64      
08000822  4239 0800  966          clr.b     @doscan_buf.L
08000826  1C68      
08000828  4878 FFFF  967          pea       -1
0800082C  4EB9 0800  968          jsr       _ungetch
08000830  102C      
08000832  584F       969          addq.w    #4,A7
08000834  4E75       970          rts
                     971   _doscan:
08000836  4E56 FF88  972          link      A6,#-120
0800083A  48E7 3F3C  973          movem.l   D2/D3/D4/D5/D6/D7/A2/A3/A4/A5,-(A7)
0800083E  47F9 0800  974          lea       @doscan_read.L,A3
08000842  0594      
08000844  4AAE 0008  975          tst.l     8(A6)
08000848  6706       976          beq.s     doscan_1
0800084A  41EE 0008  977          lea       8(A6),A0
0800084E  6008       978          bra.s     doscan_2
                     979   doscan_1:
08000850  4200       980          clr.b     D0
08000852  4880       981          ext.w     D0
08000854  48C0       982          ext.l     D0
08000856  2040       983          move.l    D0,A0
                     984   doscan_2:
08000858  2A08       985          move.l    A0,D5
0800085A  42AE FFE4  986          clr.l     -28(A6)
0800085E  4284       987          clr.l     D4
                     988   doscan_3:
08000860  206E 000C  989          move.l    12(A6),A0
08000864  52AE 000C  990          addq.l    #1,12(A6)
08000868  1010       991          move.b    (A0),D0
0800086A  4880       992          ext.w     D0
0800086C  48C0       993          ext.l     D0
0800086E  2600       994          move.l    D0,D3
08000870  4201       995          clr.b     D1
08000872  C2BC 0000  996          and.l     #255,D1
08000876  00FF      
08000878  B081       997          cmp.l     D1,D0
0800087A  6700 0612  998          beq       doscan_5
0800087E  4286       999          clr.l     D6
08000880  387C 0000 1000          move.w    #0,A4
08000884  0C83 0000 1001          cmp.l     #32,D3
08000888  0020      
0800088A  6712      1002          beq.s     doscan_8
0800088C  0C83 0000 1003          cmp.l     #9,D3
08000890  0009      
08000892  670A      1004          beq.s     doscan_8
08000894  0C83 0000 1005          cmp.l     #10,D3
08000898  000A      
0800089A  6600 0050 1006          bne       doscan_6
                    1007   doscan_8:
0800089E  2F05      1008          move.l    D5,-(A7)
080008A0  4E93      1009          jsr       (A3)
080008A2  584F      1010          addq.w    #4,A7
080008A4  2400      1011          move.l    D0,D2
080008A6  52AE FFE4 1012          addq.l    #1,-28(A6)
080008AA  0C82 FFFF 1013          cmp.l     #-1,D2
080008AE  FFFF      
080008B0  6612      1014          bne.s     doscan_11
080008B2  4A84      1015          tst.l     D4
080008B4  6704      1016          beq.s     doscan_13
080008B6  2004      1017          move.l    D4,D0
080008B8  6006      1018          bra.s     doscan_14
                    1019   doscan_13:
080008BA  70FF      1020          moveq     #-1,D0
080008BC  4880      1021          ext.w     D0
080008BE  48C0      1022          ext.l     D0
                    1023   doscan_14:
080008C0  6000 05CE 1024          bra       doscan_15
                    1025   doscan_11:
080008C4  2002      1026          move.l    D2,D0
080008C6  5280      1027          addq.l    #1,D0
080008C8  41F9 0800 1028          lea       __ctype.L,A0
080008CC  1B4A      
080008CE  1030 0800 1029          move.b    0(A0,D0.L),D0
080008D2  C03C 0010 1030          and.b     #16,D0
080008D6  66C6      1031          bne       doscan_8
080008D8  53AE FFE4 1032          subq.l    #1,-28(A6)
080008DC  2F02      1033          move.l    D2,-(A7)
080008DE  2F05      1034          move.l    D5,-(A7)
080008E0  4EB9 0800 1035          jsr       @doscan_putback
080008E4  0612      
080008E6  504F      1036          addq.w    #8,A7
080008E8  6000 05A0 1037          bra       doscan_141
                    1038   doscan_6:
080008EC  0C83 0000 1039          cmp.l     #37,D3
080008F0  0025      
080008F2  6600 055A 1040          bne       doscan_129
080008F6  206E 000C 1041          move.l    12(A6),A0
080008FA  52AE 000C 1042          addq.l    #1,12(A6)
080008FE  1010      1043          move.b    (A0),D0
08000900  4880      1044          ext.w     D0
08000902  48C0      1045          ext.l     D0
08000904  2600      1046          move.l    D0,D3
08000906  42AE FFEC 1047          clr.l     -20(A6)
0800090A  4286      1048          clr.l     D6
0800090C  42AE FFE8 1049          clr.l     -24(A6)
08000910  347C 7FFF 1050          move.w    #32767,A2
08000914  0C83 0000 1051          cmp.l     #42,D3
08000918  002A      
0800091A  6612      1052          bne.s     doscan_18
0800091C  7C01      1053          moveq     #1,D6
0800091E  206E 000C 1054          move.l    12(A6),A0
08000922  52AE 000C 1055          addq.l    #1,12(A6)
08000926  1010      1056          move.b    (A0),D0
08000928  4880      1057          ext.w     D0
0800092A  48C0      1058          ext.l     D0
0800092C  2600      1059          move.l    D0,D3
                    1060   doscan_18:
0800092E  2003      1061          move.l    D3,D0
08000930  5280      1062          addq.l    #1,D0
08000932  41F9 0800 1063          lea       __ctype.L,A0
08000936  1B4A      
08000938  1030 0800 1064          move.b    0(A0,D0.L),D0
0800093C  C03C 0004 1065          and.b     #4,D0
08000940  6700 004C 1066          beq       doscan_24
08000944  2003      1067          move.l    D3,D0
08000946  0480 0000 1068          sub.l     #48,D0
0800094A  0030      
0800094C  2440      1069          move.l    D0,A2
                    1070   doscan_22:
0800094E  206E 000C 1071          move.l    12(A6),A0
08000952  52AE 000C 1072          addq.l    #1,12(A6)
08000956  1010      1073          move.b    (A0),D0
08000958  4880      1074          ext.w     D0
0800095A  48C0      1075          ext.l     D0
0800095C  2600      1076          move.l    D0,D3
0800095E  5280      1077          addq.l    #1,D0
08000960  41F9 0800 1078          lea       __ctype.L,A0
08000964  1B4A      
08000966  1030 0800 1079          move.b    0(A0,D0.L),D0
0800096A  C03C 0004 1080          and.b     #4,D0
0800096E  671E      1081          beq.s     doscan_24
08000970  2F0A      1082          move.l    A2,-(A7)
08000972  4878 000A 1083          pea       10
08000976  4EB9 0800 1084          jsr       LMUL
0800097A  0EDA      
0800097C  2017      1085          move.l    (A7),D0
0800097E  504F      1086          addq.w    #8,A7
08000980  2203      1087          move.l    D3,D1
08000982  0481 0000 1088          sub.l     #48,D1
08000986  0030      
08000988  D081      1089          add.l     D1,D0
0800098A  2440      1090          move.l    D0,A2
0800098C  60C0      1091          bra       doscan_22
                    1092   doscan_24:
0800098E  0C83 0000 1093          cmp.l     #108,D3
08000992  006C      
08000994  6708      1094          beq.s     doscan_27
08000996  0C83 0000 1095          cmp.l     #76,D3
0800099A  004C      
0800099C  661A      1096          bne.s     doscan_25
                    1097   doscan_27:
0800099E  2D7C 0000 1098          move.l    #1,-24(A6)
080009A2  0001 FFE8 
080009A6  206E 000C 1099          move.l    12(A6),A0
080009AA  52AE 000C 1100          addq.l    #1,12(A6)
080009AE  1010      1101          move.b    (A0),D0
080009B0  4880      1102          ext.w     D0
080009B2  48C0      1103          ext.l     D0
080009B4  2600      1104          move.l    D0,D3
080009B6  6020      1105          bra.s     doscan_28
                    1106   doscan_25:
080009B8  0C83 0000 1107          cmp.l     #104,D3
080009BC  0068      
080009BE  6618      1108          bne.s     doscan_28
080009C0  2D7C 0000 1109          move.l    #1,-20(A6)
080009C4  0001 FFEC 
080009C8  206E 000C 1110          move.l    12(A6),A0
080009CC  52AE 000C 1111          addq.l    #1,12(A6)
080009D0  1010      1112          move.b    (A0),D0
080009D2  4880      1113          ext.w     D0
080009D4  48C0      1114          ext.l     D0
080009D6  2600      1115          move.l    D0,D3
                    1116   doscan_28:
080009D8  0C83 0000 1117          cmp.l     #91,D3
080009DC  005B      
080009DE  6600 0038 1118          bne       doscan_30
080009E2  4A86      1119          tst.l     D6
080009E4  660A      1120          bne.s     doscan_32
080009E6  206E 0010 1121          move.l    16(A6),A0
080009EA  58AE 0010 1122          addq.l    #4,16(A6)
080009EE  2E10      1123          move.l    (A0),D7
                    1124   doscan_32:
080009F0  486E FFE4 1125          pea       -28(A6)
080009F4  2F07      1126          move.l    D7,-(A7)
080009F6  2F06      1127          move.l    D6,-(A7)
080009F8  2F0A      1128          move.l    A2,-(A7)
080009FA  2F2E 000C 1129          move.l    12(A6),-(A7)
080009FE  2F05      1130          move.l    D5,-(A7)
08000A00  4EB9 0800 1131          jsr       @doscan_select
08000A04  06AC      
08000A06  DEFC 0018 1132          add.w     #24,A7
08000A0A  2D40 000C 1133          move.l    D0,12(A6)
08000A0E  4A86      1134          tst.l     D6
08000A10  6602      1135          bne.s     doscan_34
08000A12  5284      1136          addq.l    #1,D4
                    1137   doscan_34:
08000A14  6000 0474 1138          bra       doscan_141
                    1139   doscan_30:
08000A18  0C83 0000 1140          cmp.l     #110,D3
08000A1C  006E      
08000A1E  661A      1141          bne.s     doscan_36
08000A20  4A86      1142          tst.l     D6
08000A22  6612      1143          bne.s     doscan_38
08000A24  206E 0010 1144          move.l    16(A6),A0
08000A28  58AE 0010 1145          addq.l    #4,16(A6)
08000A2C  2E10      1146          move.l    (A0),D7
08000A2E  2047      1147          move.l    D7,A0
08000A30  20AE FFE4 1148          move.l    -28(A6),(A0)
08000A34  5284      1149          addq.l    #1,D4
                    1150   doscan_38:
08000A36  6000 0452 1151          bra       doscan_141
                    1152   doscan_36:
08000A3A  0C83 0000 1153          cmp.l     #115,D3
08000A3E  0073      
08000A40  6600 00C4 1154          bne       doscan_40
08000A44  486E FFE4 1155          pea       -28(A6)
08000A48  2F05      1156          move.l    D5,-(A7)
08000A4A  4EB9 0800 1157          jsr       @doscan_space
08000A4E  0676      
08000A50  504F      1158          addq.w    #8,A7
08000A52  2400      1159          move.l    D0,D2
08000A54  4A86      1160          tst.l     D6
08000A56  660A      1161          bne.s     doscan_42
08000A58  206E 0010 1162          move.l    16(A6),A0
08000A5C  58AE 0010 1163          addq.l    #4,16(A6)
08000A60  2E10      1164          move.l    (A0),D7
                    1165   doscan_42:
08000A62  52AE FFE4 1166          addq.l    #1,-28(A6)
                    1167   doscan_44:
08000A66  200A      1168          move.l    A2,D0
08000A68  534A      1169          subq.w    #1,A2
08000A6A  4A80      1170          tst.l     D0
08000A6C  6700 0048 1171          beq       doscan_46
08000A70  2002      1172          move.l    D2,D0
08000A72  5280      1173          addq.l    #1,D0
08000A74  41F9 0800 1174          lea       __ctype.L,A0
08000A78  1B4A      
08000A7A  1030 0800 1175          move.b    0(A0,D0.L),D0
08000A7E  C03C 0010 1176          and.b     #16,D0
08000A82  6604      1177          bne.s     doscan_47
08000A84  7001      1178          moveq     #1,D0
08000A86  6002      1179          bra.s     doscan_48
                    1180   doscan_47:
08000A88  4280      1181          clr.l     D0
                    1182   doscan_48:
08000A8A  C0BC 0000 1183          and.l     #255,D0
08000A8E  00FF      
08000A90  6724      1184          beq.s     doscan_46
08000A92  0C82 FFFF 1185          cmp.l     #-1,D2
08000A96  FFFF      
08000A98  671C      1186          beq.s     doscan_46
08000A9A  387C 0001 1187          move.w    #1,A4
08000A9E  4A86      1188          tst.l     D6
08000AA0  6606      1189          bne.s     doscan_49
08000AA2  2047      1190          move.l    D7,A0
08000AA4  5287      1191          addq.l    #1,D7
08000AA6  1082      1192          move.b    D2,(A0)
                    1193   doscan_49:
08000AA8  2F05      1194          move.l    D5,-(A7)
08000AAA  4E93      1195          jsr       (A3)
08000AAC  584F      1196          addq.w    #4,A7
08000AAE  2400      1197          move.l    D0,D2
08000AB0  52AE FFE4 1198          addq.l    #1,-28(A6)
08000AB4  60B0      1199          bra       doscan_44
                    1200   doscan_46:
08000AB6  4A86      1201          tst.l     D6
08000AB8  660A      1202          bne.s     doscan_53
08000ABA  2047      1203          move.l    D7,A0
08000ABC  4210      1204          clr.b     (A0)
08000ABE  200C      1205          move.l    A4,D0
08000AC0  6702      1206          beq.s     doscan_53
08000AC2  5284      1207          addq.l    #1,D4
                    1208   doscan_53:
08000AC4  0C82 FFFF 1209          cmp.l     #-1,D2
08000AC8  FFFF      
08000ACA  6708      1210          beq.s     doscan_57
08000ACC  4A86      1211          tst.l     D6
08000ACE  6622      1212          bne.s     doscan_55
08000AD0  200C      1213          move.l    A4,D0
08000AD2  661E      1214          bne.s     doscan_55
                    1215   doscan_57:
08000AD4  4A84      1216          tst.l     D4
08000AD6  6704      1217          beq.s     doscan_58
08000AD8  2004      1218          move.l    D4,D0
08000ADA  6012      1219          bra.s     doscan_61
                    1220   doscan_58:
08000ADC  0C82 FFFF 1221          cmp.l     #-1,D2
08000AE0  FFFF      
08000AE2  6608      1222          bne.s     doscan_60
08000AE4  70FF      1223          moveq     #-1,D0
08000AE6  4880      1224          ext.w     D0
08000AE8  48C0      1225          ext.l     D0
08000AEA  6002      1226          bra.s     doscan_61
                    1227   doscan_60:
08000AEC  2004      1228          move.l    D4,D0
                    1229   doscan_61:
08000AEE  6000 03A0 1230          bra       doscan_15
                    1231   doscan_55:
08000AF2  53AE FFE4 1232          subq.l    #1,-28(A6)
08000AF6  2F02      1233          move.l    D2,-(A7)
08000AF8  2F05      1234          move.l    D5,-(A7)
08000AFA  4EB9 0800 1235          jsr       @doscan_putback
08000AFE  0612      
08000B00  504F      1236          addq.w    #8,A7
08000B02  6000 0386 1237          bra       doscan_141
                    1238   doscan_40:
08000B06  0C83 0000 1239          cmp.l     #99,D3
08000B0A  0063      
08000B0C  6600 0094 1240          bne       doscan_62
08000B10  4A86      1241          tst.l     D6
08000B12  660A      1242          bne.s     doscan_64
08000B14  206E 0010 1243          move.l    16(A6),A0
08000B18  58AE 0010 1244          addq.l    #4,16(A6)
08000B1C  2E10      1245          move.l    (A0),D7
                    1246   doscan_64:
08000B1E  2F05      1247          move.l    D5,-(A7)
08000B20  4E93      1248          jsr       (A3)
08000B22  584F      1249          addq.w    #4,A7
08000B24  2400      1250          move.l    D0,D2
08000B26  52AE FFE4 1251          addq.l    #1,-28(A6)
08000B2A  200A      1252          move.l    A2,D0
08000B2C  0C80 0000 1253          cmp.l     #32767,D0
08000B30  7FFF      
08000B32  6604      1254          bne.s     doscan_66
08000B34  347C 0001 1255          move.w    #1,A2
                    1256   doscan_66:
08000B38  0C82 FFFF 1257          cmp.l     #-1,D2
08000B3C  FFFF      
08000B3E  6606      1258          bne.s     doscan_68
08000B40  4A86      1259          tst.l     D6
08000B42  6602      1260          bne.s     doscan_68
08000B44  5384      1261          subq.l    #1,D4
                    1262   doscan_68:
08000B46  200A      1263          move.l    A2,D0
08000B48  534A      1264          subq.w    #1,A2
08000B4A  4A80      1265          tst.l     D0
08000B4C  6720      1266          beq.s     doscan_72
08000B4E  0C82 FFFF 1267          cmp.l     #-1,D2
08000B52  FFFF      
08000B54  6718      1268          beq.s     doscan_72
08000B56  4A86      1269          tst.l     D6
08000B58  6606      1270          bne.s     doscan_73
08000B5A  2047      1271          move.l    D7,A0
08000B5C  5287      1272          addq.l    #1,D7
08000B5E  1082      1273          move.b    D2,(A0)
                    1274   doscan_73:
08000B60  2F05      1275          move.l    D5,-(A7)
08000B62  4E93      1276          jsr       (A3)
08000B64  584F      1277          addq.w    #4,A7
08000B66  2400      1278          move.l    D0,D2
08000B68  52AE FFE4 1279          addq.l    #1,-28(A6)
08000B6C  60D8      1280          bra       doscan_68
                    1281   doscan_72:
08000B6E  0C82 FFFF 1282          cmp.l     #-1,D2
08000B72  FFFF      
08000B74  6612      1283          bne.s     doscan_75
08000B76  4A84      1284          tst.l     D4
08000B78  6704      1285          beq.s     doscan_77
08000B7A  2004      1286          move.l    D4,D0
08000B7C  6006      1287          bra.s     doscan_78
                    1288   doscan_77:
08000B7E  70FF      1289          moveq     #-1,D0
08000B80  4880      1290          ext.w     D0
08000B82  48C0      1291          ext.l     D0
                    1292   doscan_78:
08000B84  6000 030A 1293          bra       doscan_15
                    1294   doscan_75:
08000B88  4A86      1295          tst.l     D6
08000B8A  6602      1296          bne.s     doscan_79
08000B8C  5284      1297          addq.l    #1,D4
                    1298   doscan_79:
08000B8E  53AE FFE4 1299          subq.l    #1,-28(A6)
08000B92  2F02      1300          move.l    D2,-(A7)
08000B94  2F05      1301          move.l    D5,-(A7)
08000B96  4EB9 0800 1302          jsr       @doscan_putback
08000B9A  0612      
08000B9C  504F      1303          addq.w    #8,A7
08000B9E  6000 02EA 1304          bra       doscan_141
                    1305   doscan_62:
08000BA2  0C83 0000 1306          cmp.l     #105,D3
08000BA6  0069      
08000BA8  6600 0068 1307          bne       doscan_84
08000BAC  486E FFE4 1308          pea       -28(A6)
08000BB0  2F05      1309          move.l    D5,-(A7)
08000BB2  4EB9 0800 1310          jsr       @doscan_space
08000BB6  0676      
08000BB8  504F      1311          addq.w    #8,A7
08000BBA  2400      1312          move.l    D0,D2
08000BBC  0C82 0000 1313          cmp.l     #48,D2
08000BC0  0030      
08000BC2  6600 003C 1314          bne       doscan_83
08000BC6  387C 0001 1315          move.w    #1,A4
08000BCA  2F05      1316          move.l    D5,-(A7)
08000BCC  4E93      1317          jsr       (A3)
08000BCE  584F      1318          addq.w    #4,A7
08000BD0  2400      1319          move.l    D0,D2
08000BD2  2F02      1320          move.l    D2,-(A7)
08000BD4  4EB9 0800 1321          jsr       _tolower
08000BD8  0FDE      
08000BDA  584F      1322          addq.w    #4,A7
08000BDC  0C80 0000 1323          cmp.l     #120,D0
08000BE0  0078      
08000BE2  6604      1324          bne.s     doscan_85
08000BE4  7678      1325          moveq     #120,D3
08000BE6  6012      1326          bra.s     doscan_86
                    1327   doscan_85:
08000BE8  53AE FFE4 1328          subq.l    #1,-28(A6)
08000BEC  2F02      1329          move.l    D2,-(A7)
08000BEE  2F05      1330          move.l    D5,-(A7)
08000BF0  4EB9 0800 1331          jsr       @doscan_putback
08000BF4  0612      
08000BF6  504F      1332          addq.w    #8,A7
08000BF8  766F      1333          moveq     #111,D3
                    1334   doscan_86:
08000BFA  52AE FFE4 1335          addq.l    #1,-28(A6)
08000BFE  6012      1336          bra.s     doscan_84
                    1337   doscan_83:
08000C00  53AE FFE4 1338          subq.l    #1,-28(A6)
08000C04  2F02      1339          move.l    D2,-(A7)
08000C06  2F05      1340          move.l    D5,-(A7)
08000C08  4EB9 0800 1341          jsr       @doscan_putback
08000C0C  0612      
08000C0E  504F      1342          addq.w    #8,A7
08000C10  7664      1343          moveq     #100,D3
                    1344   doscan_84:
08000C12  0C83 0000 1345          cmp.l     #100,D3
08000C16  0064      
08000C18  671A      1346          beq.s     doscan_89
08000C1A  0C83 0000 1347          cmp.l     #117,D3
08000C1E  0075      
08000C20  6712      1348          beq.s     doscan_89
08000C22  0C83 0000 1349          cmp.l     #120,D3
08000C26  0078      
08000C28  670A      1350          beq.s     doscan_89
08000C2A  0C83 0000 1351          cmp.l     #111,D3
08000C2E  006F      
08000C30  6600 01CE 1352          bne       doscan_87
                    1353   doscan_89:
08000C34  486E FFE4 1354          pea       -28(A6)
08000C38  2F05      1355          move.l    D5,-(A7)
08000C3A  4EB9 0800 1356          jsr       @doscan_space
08000C3E  0676      
08000C40  504F      1357          addq.w    #8,A7
08000C42  2400      1358          move.l    D0,D2
08000C44  2D7C 0000 1359          move.l    #10,-4(A6)
08000C48  000A FFFC 
08000C4C  0C83 0000 1360          cmp.l     #120,D3
08000C50  0078      
08000C52  6608      1361          bne.s     doscan_90
08000C54  2D7C 0000 1362          move.l    #16,-4(A6)
08000C58  0010 FFFC 
                    1363   doscan_90:
08000C5C  0C83 0000 1364          cmp.l     #111,D3
08000C60  006F      
08000C62  6608      1365          bne.s     doscan_92
08000C64  2D7C 0000 1366          move.l    #8,-4(A6)
08000C68  0008 FFFC 
                    1367   doscan_92:
08000C6C  4A86      1368          tst.l     D6
08000C6E  660A      1369          bne.s     doscan_94
08000C70  206E 0010 1370          move.l    16(A6),A0
08000C74  58AE 0010 1371          addq.l    #4,16(A6)
08000C78  2E10      1372          move.l    (A0),D7
                    1373   doscan_94:
08000C7A  42AE FFE0 1374          clr.l     -32(A6)
08000C7E  52AE FFE4 1375          addq.l    #1,-28(A6)
08000C82  0C83 0000 1376          cmp.l     #117,D3
08000C86  0075      
08000C88  6720      1377          beq.s     doscan_96
08000C8A  0C82 0000 1378          cmp.l     #45,D2
08000C8E  002D      
08000C90  6618      1379          bne.s     doscan_96
08000C92  2F05      1380          move.l    D5,-(A7)
08000C94  4E93      1381          jsr       (A3)
08000C96  584F      1382          addq.w    #4,A7
08000C98  2400      1383          move.l    D0,D2
08000C9A  52AE FFE4 1384          addq.l    #1,-28(A6)
08000C9E  2D7C 0000 1385          move.l    #1,-32(A6)
08000CA2  0001 FFE0 
08000CA6  387C 0001 1386          move.w    #1,A4
                    1387   doscan_96:
08000CAA  3A7C 0000 1388          move.w    #0,A5
08000CAE  0C82 FFFF 1389          cmp.l     #-1,D2
08000CB2  FFFF      
08000CB4  6612      1390          bne.s     doscan_98
08000CB6  4A84      1391          tst.l     D4
08000CB8  6704      1392          beq.s     doscan_100
08000CBA  2004      1393          move.l    D4,D0
08000CBC  6006      1394          bra.s     doscan_101
                    1395   doscan_100:
08000CBE  70FF      1396          moveq     #-1,D0
08000CC0  4880      1397          ext.w     D0
08000CC2  48C0      1398          ext.l     D0
                    1399   doscan_101:
08000CC4  6000 01CA 1400          bra       doscan_15
                    1401   doscan_98:
08000CC8  200A      1402          move.l    A2,D0
08000CCA  534A      1403          subq.w    #1,A2
08000CCC  4A80      1404          tst.l     D0
08000CCE  6700 00AA 1405          beq       doscan_104
08000CD2  0C83 0000 1406          cmp.l     #120,D3
08000CD6  0078      
08000CD8  6624      1407          bne.s     doscan_106
08000CDA  2F02      1408          move.l    D2,-(A7)
08000CDC  4EB9 0800 1409          jsr       _toupper
08000CE0  1010      
08000CE2  584F      1410          addq.w    #4,A7
08000CE4  0C80 0000 1411          cmp.l     #65,D0
08000CE8  0041      
08000CEA  6D12      1412          blt.s     doscan_106
08000CEC  2F02      1413          move.l    D2,-(A7)
08000CEE  4EB9 0800 1414          jsr       _toupper
08000CF2  1010      
08000CF4  584F      1415          addq.w    #4,A7
08000CF6  0C80 0000 1416          cmp.l     #70,D0
08000CFA  0046      
08000CFC  6F1C      1417          ble.s     doscan_105
                    1418   doscan_106:
08000CFE  2002      1419          move.l    D2,D0
08000D00  5280      1420          addq.l    #1,D0
08000D02  41F9 0800 1421          lea       __ctype.L,A0
08000D06  1B4A      
08000D08  1030 0800 1422          move.b    0(A0,D0.L),D0
08000D0C  C03C 0004 1423          and.b     #4,D0
08000D10  C0BC 0000 1424          and.l     #255,D0
08000D14  00FF      
08000D16  6700 0062 1425          beq       doscan_104
                    1426   doscan_105:
08000D1A  2002      1427          move.l    D2,D0
08000D1C  5280      1428          addq.l    #1,D0
08000D1E  41F9 0800 1429          lea       __ctype.L,A0
08000D22  1B4A      
08000D24  1030 0800 1430          move.b    0(A0,D0.L),D0
08000D28  C03C 0004 1431          and.b     #4,D0
08000D2C  661E      1432          bne.s     doscan_107
08000D2E  2F02      1433          move.l    D2,-(A7)
08000D30  4EB9 0800 1434          jsr       _toupper
08000D34  1010      
08000D36  584F      1435          addq.w    #4,A7
08000D38  0480 0000 1436          sub.l     #65,D0
08000D3C  0041      
08000D3E  0680 0000 1437          add.l     #10,D0
08000D42  000A      
08000D44  0680 0000 1438          add.l     #48,D0
08000D48  0030      
08000D4A  2400      1439          move.l    D0,D2
                    1440   doscan_107:
08000D4C  2F0D      1441          move.l    A5,-(A7)
08000D4E  2F2E FFFC 1442          move.l    -4(A6),-(A7)
08000D52  4EB9 0800 1443          jsr       LMUL
08000D56  0EDA      
08000D58  2017      1444          move.l    (A7),D0
08000D5A  504F      1445          addq.w    #8,A7
08000D5C  D082      1446          add.l     D2,D0
08000D5E  0480 0000 1447          sub.l     #48,D0
08000D62  0030      
08000D64  2A40      1448          move.l    D0,A5
08000D66  2F05      1449          move.l    D5,-(A7)
08000D68  4E93      1450          jsr       (A3)
08000D6A  584F      1451          addq.w    #4,A7
08000D6C  2400      1452          move.l    D0,D2
08000D6E  52AE FFE4 1453          addq.l    #1,-28(A6)
08000D72  387C 0001 1454          move.w    #1,A4
08000D76  6000 FF50 1455          bra       doscan_98
                    1456   doscan_104:
08000D7A  0C82 FFFF 1457          cmp.l     #-1,D2
08000D7E  FFFF      
08000D80  671C      1458          beq.s     doscan_109
08000D82  2F02      1459          move.l    D2,-(A7)
08000D84  2F05      1460          move.l    D5,-(A7)
08000D86  4EB9 0800 1461          jsr       @doscan_putback
08000D8A  0612      
08000D8C  504F      1462          addq.w    #8,A7
08000D8E  53AE FFE4 1463          subq.l    #1,-28(A6)
08000D92  200C      1464          move.l    A4,D0
08000D94  6606      1465          bne.s     doscan_111
08000D96  2004      1466          move.l    D4,D0
08000D98  6000 00F6 1467          bra       doscan_15
                    1468   doscan_111:
08000D9C  6016      1469          bra.s     doscan_113
                    1470   doscan_109:
08000D9E  200C      1471          move.l    A4,D0
08000DA0  6612      1472          bne.s     doscan_113
08000DA2  4A84      1473          tst.l     D4
08000DA4  6704      1474          beq.s     doscan_115
08000DA6  2004      1475          move.l    D4,D0
08000DA8  6006      1476          bra.s     doscan_116
                    1477   doscan_115:
08000DAA  70FF      1478          moveq     #-1,D0
08000DAC  4880      1479          ext.w     D0
08000DAE  48C0      1480          ext.l     D0
                    1481   doscan_116:
08000DB0  6000 00DE 1482          bra       doscan_15
                    1483   doscan_113:
08000DB4  4AAE FFE0 1484          tst.l     -32(A6)
08000DB8  6706      1485          beq.s     doscan_117
08000DBA  200D      1486          move.l    A5,D0
08000DBC  4480      1487          neg.l     D0
08000DBE  2A40      1488          move.l    D0,A5
                    1489   doscan_117:
08000DC0  4A86      1490          tst.l     D6
08000DC2  661E      1491          bne.s     doscan_119
08000DC4  4AAE FFE8 1492          tst.l     -24(A6)
08000DC8  6706      1493          beq.s     doscan_121
08000DCA  2047      1494          move.l    D7,A0
08000DCC  208D      1495          move.l    A5,(A0)
08000DCE  6010      1496          bra.s     doscan_124
                    1497   doscan_121:
08000DD0  4AAE FFEC 1498          tst.l     -20(A6)
08000DD4  6706      1499          beq.s     doscan_123
08000DD6  2047      1500          move.l    D7,A0
08000DD8  308D      1501          move.w    A5,(A0)
08000DDA  6004      1502          bra.s     doscan_124
                    1503   doscan_123:
08000DDC  2047      1504          move.l    D7,A0
08000DDE  208D      1505          move.l    A5,(A0)
                    1506   doscan_124:
08000DE0  5284      1507          addq.l    #1,D4
                    1508   doscan_119:
08000DE2  0C82 FFFF 1509          cmp.l     #-1,D2
08000DE6  FFFF      
08000DE8  6612      1510          bne.s     doscan_125
08000DEA  4A84      1511          tst.l     D4
08000DEC  6704      1512          beq.s     doscan_127
08000DEE  2004      1513          move.l    D4,D0
08000DF0  6006      1514          bra.s     doscan_128
                    1515   doscan_127:
08000DF2  70FF      1516          moveq     #-1,D0
08000DF4  4880      1517          ext.w     D0
08000DF6  48C0      1518          ext.l     D0
                    1519   doscan_128:
08000DF8  6000 0096 1520          bra       doscan_15
                    1521   doscan_125:
08000DFC  6000 008C 1522          bra       doscan_141
                    1523   doscan_87:
08000E00  0C83 0000 1524          cmp.l     #37,D3
08000E04  0025      
08000E06  6600 0046 1525          bne       doscan_129
08000E0A  2F05      1526          move.l    D5,-(A7)
08000E0C  4E93      1527          jsr       (A3)
08000E0E  584F      1528          addq.w    #4,A7
08000E10  2400      1529          move.l    D0,D2
08000E12  0C82 FFFF 1530          cmp.l     #-1,D2
08000E16  FFFF      
08000E18  6612      1531          bne.s     doscan_131
08000E1A  4A84      1532          tst.l     D4
08000E1C  6704      1533          beq.s     doscan_133
08000E1E  2004      1534          move.l    D4,D0
08000E20  6006      1535          bra.s     doscan_134
                    1536   doscan_133:
08000E22  70FF      1537          moveq     #-1,D0
08000E24  4880      1538          ext.w     D0
08000E26  48C0      1539          ext.l     D0
                    1540   doscan_134:
08000E28  6000 0066 1541          bra       doscan_15
                    1542   doscan_131:
08000E2C  52AE FFE4 1543          addq.l    #1,-28(A6)
08000E30  B483      1544          cmp.l     D3,D2
08000E32  6716      1545          beq.s     doscan_135
08000E34  2F02      1546          move.l    D2,-(A7)
08000E36  2F05      1547          move.l    D5,-(A7)
08000E38  4EB9 0800 1548          jsr       @doscan_putback
08000E3C  0612      
08000E3E  504F      1549          addq.w    #8,A7
08000E40  53AE FFE4 1550          subq.l    #1,-28(A6)
08000E44  2004      1551          move.l    D4,D0
08000E46  6000 0048 1552          bra       doscan_15
                    1553   doscan_135:
08000E4A  6000 003E 1554          bra       doscan_141
                    1555   doscan_129:
08000E4E  2F05      1556          move.l    D5,-(A7)
08000E50  4E93      1557          jsr       (A3)
08000E52  584F      1558          addq.w    #4,A7
08000E54  2400      1559          move.l    D0,D2
08000E56  52AE FFE4 1560          addq.l    #1,-28(A6)
08000E5A  0C82 FFFF 1561          cmp.l     #-1,D2
08000E5E  FFFF      
08000E60  6610      1562          bne.s     doscan_137
08000E62  4A84      1563          tst.l     D4
08000E64  6704      1564          beq.s     doscan_139
08000E66  2004      1565          move.l    D4,D0
08000E68  6006      1566          bra.s     doscan_140
                    1567   doscan_139:
08000E6A  70FF      1568          moveq     #-1,D0
08000E6C  4880      1569          ext.w     D0
08000E6E  48C0      1570          ext.l     D0
                    1571   doscan_140:
08000E70  601E      1572          bra.s     doscan_15
                    1573   doscan_137:
08000E72  B483      1574          cmp.l     D3,D2
08000E74  6714      1575          beq.s     doscan_141
08000E76  2F02      1576          move.l    D2,-(A7)
08000E78  2F05      1577          move.l    D5,-(A7)
08000E7A  4EB9 0800 1578          jsr       @doscan_putback
08000E7E  0612      
08000E80  504F      1579          addq.w    #8,A7
08000E82  53AE FFE4 1580          subq.l    #1,-28(A6)
08000E86  2004      1581          move.l    D4,D0
08000E88  6006      1582          bra.s     doscan_15
                    1583   doscan_141:
08000E8A  6000 F9D4 1584          bra       doscan_3
                    1585   doscan_5:
08000E8E  2004      1586          move.l    D4,D0
                    1587   doscan_15:
08000E90  4CDF 3CFC 1588          movem.l   (A7)+,D2/D3/D4/D5/D6/D7/A2/A3/A4/A5
08000E94  4E5E      1589          unlk      A6
08000E96  4E75      1590          rts
                    1591   _printf:
08000E98  4E56 FFFC 1592          link      A6,#-4
08000E9C  2F02      1593          move.l    D2,-(A7)
08000E9E  41EE 0008 1594          lea       8(A6),A0
08000EA2  5848      1595          addq.w    #4,A0
08000EA4  2408      1596          move.l    A0,D2
08000EA6  2F02      1597          move.l    D2,-(A7)
08000EA8  2F2E 0008 1598          move.l    8(A6),-(A7)
08000EAC  42A7      1599          clr.l     -(A7)
08000EAE  4EB9 0800 1600          jsr       _doprint
08000EB2  10E8      
08000EB4  DEFC 000C 1601          add.w     #12,A7
08000EB8  2D40 FFFC 1602          move.l    D0,-4(A6)
08000EBC  4282      1603          clr.l     D2
08000EBE  202E FFFC 1604          move.l    -4(A6),D0
08000EC2  241F      1605          move.l    (A7)+,D2
08000EC4  4E5E      1606          unlk      A6
08000EC6  4E75      1607          rts
                    1608   ULMUL:
08000EC8  4E56 0000 1609          link    A6,#0
08000ECC  48E7 C000 1610          movem.l D0/D1,-(A7)
08000ED0  222E 0008 1611          move.l  8(A6),D1
08000ED4  202E 000C 1612          move.l  12(A6),D0
08000ED8  602C      1613          bra.s   lmul_3
                    1614   LMUL:
08000EDA  4E56 0000 1615          link    A6,#0
08000EDE  48E7 C000 1616          movem.l D0/D1,-(A7)
08000EE2  222E 0008 1617          move.l  8(A6),D1
08000EE6  202E 000C 1618          move.l  12(A6),D0
08000EEA  4A80      1619          tst.l   D0
08000EEC  6A0A      1620          bpl.s   lmul_1
08000EEE  4480      1621          neg.l   D0
08000EF0  4A81      1622          tst.l   D1
08000EF2  6A0A      1623          bpl.s   lmul_2
08000EF4  4481      1624          neg.l   D1
08000EF6  600E      1625          bra.s   lmul_3
                    1626   lmul_1:
08000EF8  4A81      1627          tst.l   D1
08000EFA  6A0A      1628          bpl.s   lmul_3
08000EFC  4481      1629          neg.l   D1
                    1630   lmul_2:
08000EFE  6114      1631          bsr.s   domul
08000F00  4481      1632          neg.l   D1
08000F02  4080      1633          negx.l  D0
08000F04  6002      1634          bra.s   lmul_4
                    1635   lmul_3:
08000F06  610C      1636          bsr.s   domul
                    1637   lmul_4:
08000F08  2D41 0008 1638          move.l  D1,8(A6)
08000F0C  4CDF 0003 1639          movem.l (A7)+,D0/D1
08000F10  4E5E      1640          unlk    A6
08000F12  4E75      1641          rts
                    1642   domul:
08000F14  0C81 0000 1643          cmpi.l  #$FFFF,D1
08000F18  FFFF      
08000F1A  620C      1644          bhi.s   domul_1
08000F1C  0C80 0000 1645          cmpi.l  #$FFFF,D0
08000F20  FFFF      
08000F22  620E      1646          bhi.s   domul_2
08000F24  C2C0      1647          mulu    D0,D1
08000F26  4E75      1648          rts
                    1649   domul_1:
08000F28  0C80 0000 1650          cmpi.l  #$FFFF,D0
08000F2C  FFFF      
08000F2E  6218      1651          bhi.s   domul_4
08000F30  6002      1652          bra.s   domul_3
                    1653   domul_2
08000F32  C141      1654          exg     D0,D1
                    1655   domul_3:
08000F34  2F02      1656          move.l  D2,-(A7)
08000F36  2401      1657          move.l  D1,D2
08000F38  4842      1658          swap    D2
08000F3A  C2C0      1659          mulu    D0,D1
08000F3C  C4C0      1660          mulu    D0,D2
08000F3E  4842      1661          swap    D2
08000F40  4242      1662          clr.w   D2
08000F42  D282      1663          add.l   D2,D1
08000F44  241F      1664          move.l  (A7)+,D2
08000F46  4E75      1665          rts
                    1666   domul_4:
08000F48  48E7 3000 1667          movem.l D2/D3,-(A7)
08000F4C  2401      1668          move.l  D1,D2
08000F4E  2601      1669          move.l  D1,D3
08000F50  C2C0      1670          mulu    D0,D1
08000F52  4842      1671          swap    D2
08000F54  C4C0      1672          mulu    D0,D2
08000F56  4840      1673          swap    D0
08000F58  C6C0      1674          mulu    D0,D3
08000F5A  D483      1675          add.l   D3,D2
08000F5C  4842      1676          swap    D2
08000F5E  4242      1677          clr.w   D2
08000F60  D282      1678          add.l   D2,D1
08000F62  4CDF 000C 1679          movem.l (A7)+,D2/D3
08000F66  4E75      1680          rts
                    1681   _gets:
08000F68  4E56 0000 1682          link      A6,#0
08000F6C  48E7 3820 1683          movem.l   D2/D3/D4/A2,-(A7)
08000F70  45F9 0800 1684          lea       _putch.L,A2
08000F74  1718      
08000F76  282E 0008 1685          move.l    8(A6),D4
08000F7A  2404      1686          move.l    D4,D2
                    1687   gets_1:
08000F7C  4EB9 0800 1688          jsr       _getch
08000F80  1748      
08000F82  2600      1689          move.l    D0,D3
08000F84  0C80 0000 1690          cmp.l     #10,D0
08000F88  000A      
08000F8A  6700 003C 1691          beq       gets_3
08000F8E  0C83 0000 1692          cmp.l     #8,D3
08000F92  0008      
08000F94  6712      1693          beq.s     gets_4
08000F96  2042      1694          move.l    D2,A0
08000F98  5282      1695          addq.l    #1,D2
08000F9A  1083      1696          move.b    D3,(A0)
08000F9C  4883      1697          ext.w     D3
08000F9E  48C3      1698          ext.l     D3
08000FA0  2F03      1699          move.l    D3,-(A7)
08000FA2  4E92      1700          jsr       (A2)
08000FA4  584F      1701          addq.w    #4,A7
08000FA6  601E      1702          bra.s     gets_6
                    1703   gets_4:
08000FA8  B484      1704          cmp.l     D4,D2
08000FAA  631A      1705          bls.s     gets_6
08000FAC  4878 0008 1706          pea       8
08000FB0  4E92      1707          jsr       (A2)
08000FB2  584F      1708          addq.w    #4,A7
08000FB4  4878 0020 1709          pea       32
08000FB8  4E92      1710          jsr       (A2)
08000FBA  584F      1711          addq.w    #4,A7
08000FBC  4878 0008 1712          pea       8
08000FC0  4E92      1713          jsr       (A2)
08000FC2  584F      1714          addq.w    #4,A7
08000FC4  5382      1715          subq.l    #1,D2
                    1716   gets_6:
08000FC6  60B4      1717          bra       gets_1
                    1718   gets_3:
08000FC8  4878 000A 1719          pea       10
08000FCC  4E92      1720          jsr       (A2)
08000FCE  584F      1721          addq.w    #4,A7
08000FD0  2042      1722          move.l    D2,A0
08000FD2  4210      1723          clr.b     (A0)
08000FD4  2004      1724          move.l    D4,D0
08000FD6  4CDF 041C 1725          movem.l   (A7)+,D2/D3/D4/A2
08000FDA  4E5E      1726          unlk      A6
08000FDC  4E75      1727          rts
                    1728   _tolower:
08000FDE  202F 0004 1729          move.l    4(A7),D0
08000FE2  0C80 0000 1730          cmp.l     #'A',D0
08000FE6  0041      
08000FE8  6D0E      1731          blt.s     tolower_1
08000FEA  0C80 0000 1732          cmp.l     #'Z',D0
08000FEE  005A      
08000FF0  6E06      1733          bgt.s     tolower_1
08000FF2  0680 0000 1734          add.l     #$20,D0
08000FF6  0020      
                    1735   tolower_1:
08000FF8  4E75      1736          rts
                    1737   _strcat:
08000FFA  206F 0004 1738          move.l    (4,A7),A0
08000FFE  226F 0008 1739          move.l    (8,A7),A1
08001002  2008      1740          move.l    A0,D0
                    1741   strcat_1:
08001004  4A18      1742          tst.b     (A0)+
08001006  66FC      1743          bne.s     strcat_1
08001008  5388      1744          subq.l    #1,A0
                    1745   strcat_2:
0800100A  10D9      1746          move.b    (A1)+,(A0)+
0800100C  66FC      1747          bne.s     strcat_2
0800100E  4E75      1748          rts
                    1749   _toupper:
08001010  202F 0004 1750          move.l    4(A7),D0
08001014  0C80 0000 1751          cmp.l     #'a',D0
08001018  0061      
0800101A  6D0E      1752          blt.s     toupper_1
0800101C  0C80 0000 1753          cmp.l     #'z',D0
08001020  007A      
08001022  6E06      1754          bgt.s     toupper_1
08001024  0480 0000 1755          sub.l     #$20,D0
08001028  0020      
                    1756   toupper_1:
0800102A  4E75      1757          rts
                    1758   _ungetch:
0800102C  4E56 0000 1759          link      A6,#0
08001030  23EE 0008 1760          move.l    8(A6),__ungetbuf.L
08001034  0800 1C58 
08001038  202E 0008 1761          move.l    8(A6),D0
0800103C  4E5E      1762          unlk      A6
0800103E  4E75      1763          rts
                    1764   @doprint_copy:
08001040  4E56 0000 1765          link      A6,#0
08001044  206E 0008 1766          move.l    8(A6),A0
08001048  4A90      1767          tst.l     (A0)
0800104A  6710      1768          beq.s     @doprint_copy_1
0800104C  202E 000C 1769          move.l    12(A6),D0
08001050  206E 0008 1770          move.l    8(A6),A0
08001054  2250      1771          move.l    (A0),A1
08001056  5290      1772          addq.l    #1,(A0)
08001058  1280      1773          move.b    D0,(A1)
0800105A  600C      1774          bra.s     @doprint_copy_2
                    1775   @doprint_copy_1:
0800105C  2F2E 000C 1776          move.l    12(A6),-(A7)
08001060  4EB9 0800 1777          jsr       _putch
08001064  1718      
08001066  584F      1778          addq.w    #4,A7
                    1779   @doprint_copy_2:
08001068  4E5E      1780          unlk      A6
0800106A  4E75      1781          rts
                    1782   @doprint_getval:
0800106C  4E56 0000 1783          link      A6,#0
08001070  48E7 3000 1784          movem.l   D2/D3,-(A7)
08001074  262E 0008 1785          move.l    8(A6),D3
08001078  4282      1786          clr.l     D2
0800107A  2043      1787          move.l    D3,A0
0800107C  2050      1788          move.l    (A0),A0
0800107E  1010      1789          move.b    (A0),D0
08001080  0C00 002A 1790          cmp.b     #42,D0
08001084  6612      1791          bne.s     @doprint_getval_1
08001086  206E 000C 1792          move.l    12(A6),A0
0800108A  2250      1793          move.l    (A0),A1
0800108C  5890      1794          addq.l    #4,(A0)
0800108E  2411      1795          move.l    (A1),D2
08001090  2043      1796          move.l    D3,A0
08001092  5290      1797          addq.l    #1,(A0)
08001094  6000 0048 1798          bra       @doprint_getval_5
                    1799   @doprint_getval_1:
08001098  7001      1800          moveq     #1,D0
0800109A  2043      1801          move.l    D3,A0
0800109C  2050      1802          move.l    (A0),A0
0800109E  1210      1803          move.b    (A0),D1
080010A0  4881      1804          ext.w     D1
080010A2  48C1      1805          ext.l     D1
080010A4  D081      1806          add.l     D1,D0
080010A6  41F9 0800 1807          lea       __ctype.L,A0
080010AA  1B4A      
080010AC  1030 0800 1808          move.b    0(A0,D0.L),D0
080010B0  C03C 0004 1809          and.b     #4,D0
080010B4  6728      1810          beq.s     @doprint_getval_5
080010B6  2F02      1811          move.l    D2,-(A7)
080010B8  4878 000A 1812          pea       10
080010BC  4EB9 0800 1813          jsr       LMUL
080010C0  0EDA      
080010C2  2017      1814          move.l    (A7),D0
080010C4  504F      1815          addq.w    #8,A7
080010C6  2043      1816          move.l    D3,A0
080010C8  2250      1817          move.l    (A0),A1
080010CA  5290      1818          addq.l    #1,(A0)
080010CC  1211      1819          move.b    (A1),D1
080010CE  4881      1820          ext.w     D1
080010D0  48C1      1821          ext.l     D1
080010D2  D081      1822          add.l     D1,D0
080010D4  0480 0000 1823          sub.l     #48,D0
080010D8  0030      
080010DA  2400      1824          move.l    D0,D2
080010DC  60BA      1825          bra       @doprint_getval_1
                    1826   @doprint_getval_5:
080010DE  2002      1827          move.l    D2,D0
080010E0  4CDF 000C 1828          movem.l   (A7)+,D2/D3
080010E4  4E5E      1829          unlk      A6
080010E6  4E75      1830          rts
                    1831   _doprint:
080010E8  4E56 FFCC 1832          link      A6,#-52
080010EC  48E7 3F3C 1833          movem.l   D2/D3/D4/D5/D6/D7/A2/A3/A4/A5,-(A7)
080010F0  45EE 0008 1834          lea       8(A6),A2
080010F4  47F9 0800 1835          lea       @doprint_copy.L,A3
080010F8  1040      
080010FA  49F9 0800 1836          lea       _ultoa.L,A4
080010FE  188C      
08001100  4286      1837          clr.l     D6
                    1838   doprint_1:
08001102  206E 000C 1839          move.l    12(A6),A0
08001106  4A10      1840          tst.b     (A0)
08001108  6700 05F0 1841          beq       doprint_3
0800110C  206E 000C 1842          move.l    12(A6),A0
08001110  1010      1843          move.b    (A0),D0
08001112  0C00 0025 1844          cmp.b     #37,D0
08001116  671C      1845          beq.s     doprint_4
08001118  206E 000C 1846          move.l    12(A6),A0
0800111C  52AE 000C 1847          addq.l    #1,12(A6)
08001120  1210      1848          move.b    (A0),D1
08001122  4881      1849          ext.w     D1
08001124  48C1      1850          ext.l     D1
08001126  2F01      1851          move.l    D1,-(A7)
08001128  2F0A      1852          move.l    A2,-(A7)
0800112A  4E93      1853          jsr       (A3)
0800112C  504F      1854          addq.w    #8,A7
0800112E  5286      1855          addq.l    #1,D6
08001130  6000 05C4 1856          bra       doprint_2
                    1857   doprint_4:
08001134  52AE 000C 1858          addq.l    #1,12(A6)
08001138  422E FFD3 1859          clr.b     -45(A6)
0800113C  422E FFD2 1860          clr.b     -46(A6)
08001140  422E FFD0 1861          clr.b     -48(A6)
08001144  422E FFCF 1862          clr.b     -49(A6)
08001148  422E FFCE 1863          clr.b     -50(A6)
0800114C  422E FFCD 1864          clr.b     -51(A6)
08001150  42AE FFFC 1865          clr.l     -4(A6)
08001154  7AFF      1866          moveq     #-1,D5
08001156  41EE FFDC 1867          lea       -36(A6),A0
0800115A  2608      1868          move.l    A0,D3
0800115C  2408      1869          move.l    A0,D2
                    1870   doprint_6:
0800115E  206E 000C 1871          move.l    12(A6),A0
08001162  1010      1872          move.b    (A0),D0
08001164  4880      1873          ext.w     D0
08001166  48C0      1874          ext.l     D0
08001168  0C80 0000 1875          cmp.l     #43,D0
0800116C  002B      
0800116E  6730      1876          beq.s     doprint_12
08001170  6E18      1877          bgt.s     doprint_15
08001172  0C80 0000 1878          cmp.l     #35,D0
08001176  0023      
08001178  6700 003E 1879          beq       doprint_14
0800117C  6E00 0046 1880          bgt       doprint_9
08001180  0C80 0000 1881          cmp.l     #32,D0
08001184  0020      
08001186  6724      1882          beq.s     doprint_13
08001188  603A      1883          bra.s     doprint_9
                    1884   doprint_15:
0800118A  0C80 0000 1885          cmp.l     #45,D0
0800118E  002D      
08001190  6702      1886          beq.s     doprint_11
08001192  6030      1887          bra.s     doprint_9
                    1888   doprint_11:
08001194  1D7C 0001 1889          move.b    #1,-51(A6)
08001198  FFCD      
0800119A  52AE 000C 1890          addq.l    #1,12(A6)
0800119E  6026      1891          bra.s     doprint_7
                    1892   doprint_12:
080011A0  1D7C 0001 1893          move.b    #1,-50(A6)
080011A4  FFCE      
080011A6  52AE 000C 1894          addq.l    #1,12(A6)
080011AA  601A      1895          bra.s     doprint_7
                    1896   doprint_13:
080011AC  1D7C 0001 1897          move.b    #1,-49(A6)
080011B0  FFCF      
080011B2  52AE 000C 1898          addq.l    #1,12(A6)
080011B6  600E      1899          bra.s     doprint_7
                    1900   doprint_14:
080011B8  1D7C 0001 1901          move.b    #1,-48(A6)
080011BC  FFD0      
080011BE  52AE 000C 1902          addq.l    #1,12(A6)
080011C2  6002      1903          bra.s     doprint_7
                    1904   doprint_9:
080011C4  6002      1905          bra.s     doprint_8
                    1906   doprint_7:
080011C6  6096      1907          bra       doprint_6
                    1908   doprint_8:
080011C8  206E 000C 1909          move.l    12(A6),A0
080011CC  1010      1910          move.b    (A0),D0
080011CE  0C00 0030 1911          cmp.b     #48,D0
080011D2  660A      1912          bne.s     doprint_16
080011D4  52AE 000C 1913          addq.l    #1,12(A6)
080011D8  1D7C 0001 1914          move.b    #1,-46(A6)
080011DC  FFD2      
                    1915   doprint_16:
080011DE  486E 0010 1916          pea       16(A6)
080011E2  486E 000C 1917          pea       12(A6)
080011E6  4EB9 0800 1918          jsr       @doprint_getval
080011EA  106C      
080011EC  504F      1919          addq.w    #8,A7
080011EE  2A40      1920          move.l    D0,A5
080011F0  206E 000C 1921          move.l    12(A6),A0
080011F4  1010      1922          move.b    (A0),D0
080011F6  0C00 002E 1923          cmp.b     #46,D0
080011FA  6616      1924          bne.s     doprint_18
080011FC  52AE 000C 1925          addq.l    #1,12(A6)
08001200  486E 0010 1926          pea       16(A6)
08001204  486E 000C 1927          pea       12(A6)
08001208  4EB9 0800 1928          jsr       @doprint_getval
0800120C  106C      
0800120E  504F      1929          addq.w    #8,A7
08001210  2A00      1930          move.l    D0,D5
                    1931   doprint_18:
08001212  206E 000C 1932          move.l    12(A6),A0
08001216  1010      1933          move.b    (A0),D0
08001218  0C00 006C 1934          cmp.b     #108,D0
0800121C  660A      1935          bne.s     doprint_20
0800121E  52AE 000C 1936          addq.l    #1,12(A6)
08001222  1D7C 0001 1937          move.b    #1,-45(A6)
08001226  FFD3      
                    1938   doprint_20:
08001228  206E 000C 1939          move.l    12(A6),A0
0800122C  1010      1940          move.b    (A0),D0
0800122E  4880      1941          ext.w     D0
08001230  48C0      1942          ext.l     D0
08001232  0C80 0000 1943          cmp.l     #111,D0
08001236  006F      
08001238  6700 00D8 1944          beq       doprint_27
0800123C  6E34      1945          bgt.s     doprint_33
0800123E  0C80 0000 1946          cmp.l     #100,D0
08001242  0064      
08001244  6700 0054 1947          beq       doprint_24
08001248  6E1C      1948          bgt.s     doprint_34
0800124A  0C80 0000 1949          cmp.l     #99,D0
0800124E  0063      
08001250  6700 0130 1950          beq       doprint_30
08001254  6E00 0174 1951          bgt       doprint_22
08001258  0C80 0000 1952          cmp.l     #88,D0
0800125C  0058      
0800125E  6700 00EA 1953          beq       doprint_28
08001262  6000 0166 1954          bra       doprint_22
                    1955   doprint_34:
08001266  0C80 0000 1956          cmp.l     #105,D0
0800126A  0069      
0800126C  672C      1957          beq.s     doprint_24
0800126E  6000 015A 1958          bra       doprint_22
                    1959   doprint_33:
08001272  0C80 0000 1960          cmp.l     #117,D0
08001276  0075      
08001278  6700 0060 1961          beq       doprint_26
0800127C  6E0E      1962          bgt.s     doprint_35
0800127E  0C80 0000 1963          cmp.l     #115,D0
08001282  0073      
08001284  6700 0124 1964          beq       doprint_31
08001288  6000 0140 1965          bra       doprint_22
                    1966   doprint_35:
0800128C  0C80 0000 1967          cmp.l     #120,D0
08001290  0078      
08001292  6700 00B6 1968          beq       doprint_28
08001296  6000 0132 1969          bra       doprint_22
                    1970   doprint_24:
0800129A  4A2E FFD3 1971          tst.b     -45(A6)
0800129E  671C      1972          beq.s     doprint_36
080012A0  4878 000A 1973          pea       10
080012A4  2F03      1974          move.l    D3,-(A7)
080012A6  206E 0010 1975          move.l    16(A6),A0
080012AA  58AE 0010 1976          addq.l    #4,16(A6)
080012AE  2F10      1977          move.l    (A0),-(A7)
080012B0  4EB9 0800 1978          jsr       _ltoa
080012B4  1804      
080012B6  DEFC 000C 1979          add.w     #12,A7
080012BA  601A      1980          bra.s     doprint_37
                    1981   doprint_36:
080012BC  4878 000A 1982          pea       10
080012C0  2F03      1983          move.l    D3,-(A7)
080012C2  206E 0010 1984          move.l    16(A6),A0
080012C6  58AE 0010 1985          addq.l    #4,16(A6)
080012CA  2F10      1986          move.l    (A0),-(A7)
080012CC  4EB9 0800 1987          jsr       _ltoa
080012D0  1804      
080012D2  DEFC 000C 1988          add.w     #12,A7
                    1989   doprint_37:
080012D6  6000 0100 1990          bra       doprint_23
                    1991   doprint_26:
080012DA  4A2E FFD3 1992          tst.b     -45(A6)
080012DE  6718      1993          beq.s     doprint_38
080012E0  4878 000A 1994          pea       10
080012E4  2F03      1995          move.l    D3,-(A7)
080012E6  206E 0010 1996          move.l    16(A6),A0
080012EA  58AE 0010 1997          addq.l    #4,16(A6)
080012EE  2F10      1998          move.l    (A0),-(A7)
080012F0  4E94      1999          jsr       (A4)
080012F2  DEFC 000C 2000          add.w     #12,A7
080012F6  6016      2001          bra.s     doprint_39
                    2002   doprint_38:
080012F8  4878 000A 2003          pea       10
080012FC  2F03      2004          move.l    D3,-(A7)
080012FE  206E 0010 2005          move.l    16(A6),A0
08001302  58AE 0010 2006          addq.l    #4,16(A6)
08001306  2F10      2007          move.l    (A0),-(A7)
08001308  4E94      2008          jsr       (A4)
0800130A  DEFC 000C 2009          add.w     #12,A7
                    2010   doprint_39:
0800130E  6000 00C8 2011          bra       doprint_23
                    2012   doprint_27:
08001312  4A2E FFD3 2013          tst.b     -45(A6)
08001316  6718      2014          beq.s     doprint_40
08001318  4878 0008 2015          pea       8
0800131C  2F03      2016          move.l    D3,-(A7)
0800131E  206E 0010 2017          move.l    16(A6),A0
08001322  58AE 0010 2018          addq.l    #4,16(A6)
08001326  2F10      2019          move.l    (A0),-(A7)
08001328  4E94      2020          jsr       (A4)
0800132A  DEFC 000C 2021          add.w     #12,A7
0800132E  6016      2022          bra.s     doprint_41
                    2023   doprint_40:
08001330  4878 0008 2024          pea       8
08001334  2F03      2025          move.l    D3,-(A7)
08001336  206E 0010 2026          move.l    16(A6),A0
0800133A  58AE 0010 2027          addq.l    #4,16(A6)
0800133E  2F10      2028          move.l    (A0),-(A7)
08001340  4E94      2029          jsr       (A4)
08001342  DEFC 000C 2030          add.w     #12,A7
                    2031   doprint_41:
08001346  6000 0090 2032          bra       doprint_23
                    2033   doprint_28:
0800134A  4A2E FFD3 2034          tst.b     -45(A6)
0800134E  6718      2035          beq.s     doprint_42
08001350  4878 0010 2036          pea       16
08001354  2F03      2037          move.l    D3,-(A7)
08001356  206E 0010 2038          move.l    16(A6),A0
0800135A  58AE 0010 2039          addq.l    #4,16(A6)
0800135E  2F10      2040          move.l    (A0),-(A7)
08001360  4E94      2041          jsr       (A4)
08001362  DEFC 000C 2042          add.w     #12,A7
08001366  6016      2043          bra.s     doprint_43
                    2044   doprint_42:
08001368  4878 0010 2045          pea       16
0800136C  2F03      2046          move.l    D3,-(A7)
0800136E  206E 0010 2047          move.l    16(A6),A0
08001372  58AE 0010 2048          addq.l    #4,16(A6)
08001376  2F10      2049          move.l    (A0),-(A7)
08001378  4E94      2050          jsr       (A4)
0800137A  DEFC 000C 2051          add.w     #12,A7
                    2052   doprint_43:
0800137E  6000 0058 2053          bra       doprint_23
                    2054   doprint_30:
08001382  206E 0010 2055          move.l    16(A6),A0
08001386  58AE 0010 2056          addq.l    #4,16(A6)
0800138A  2010      2057          move.l    (A0),D0
0800138C  2042      2058          move.l    D2,A0
0800138E  5282      2059          addq.l    #1,D2
08001390  1080      2060          move.b    D0,(A0)
08001392  2042      2061          move.l    D2,A0
08001394  4210      2062          clr.b     (A0)
08001396  200D      2063          move.l    A5,D0
08001398  6704      2064          beq.s     doprint_44
0800139A  200D      2065          move.l    A5,D0
0800139C  6006      2066          bra.s     doprint_45
                    2067   doprint_44:
0800139E  7001      2068          moveq     #1,D0
080013A0  4880      2069          ext.w     D0
080013A2  48C0      2070          ext.l     D0
                    2071   doprint_45:
080013A4  2A00      2072          move.l    D0,D5
080013A6  6000 0030 2073          bra       doprint_23
                    2074   doprint_31:
080013AA  206E 0010 2075          move.l    16(A6),A0
080013AE  58AE 0010 2076          addq.l    #4,16(A6)
080013B2  2610      2077          move.l    (A0),D3
080013B4  0C85 FFFF 2078          cmp.l     #-1,D5
080013B8  FFFF      
080013BA  660C      2079          bne.s     doprint_46
080013BC  2F03      2080          move.l    D3,-(A7)
080013BE  4EB9 0800 2081          jsr       _strlen
080013C2  18F2      
080013C4  584F      2082          addq.w    #4,A7
080013C6  2A00      2083          move.l    D0,D5
                    2084   doprint_46:
080013C8  600E      2085          bra.s     doprint_23
                    2086   doprint_22:
080013CA  206E 000C 2087          move.l    12(A6),A0
080013CE  2242      2088          move.l    D2,A1
080013D0  5282      2089          addq.l    #1,D2
080013D2  1290      2090          move.b    (A0),(A1)
080013D4  2042      2091          move.l    D2,A0
080013D6  4210      2092          clr.b     (A0)
                    2093   doprint_23:
080013D8  2F03      2094          move.l    D3,-(A7)
080013DA  4EB9 0800 2095          jsr       _strlen
080013DE  18F2      
080013E0  584F      2096          addq.w    #4,A7
080013E2  1800      2097          move.b    D0,D4
080013E4  206E 000C 2098          move.l    12(A6),A0
080013E8  1010      2099          move.b    (A0),D0
080013EA  0C00 0073 2100          cmp.b     #115,D0
080013EE  661C      2101          bne.s     doprint_48
080013F0  0C85 0000 2102          cmp.l     #0,D5
080013F4  0000      
080013F6  6D14      2103          blt.s     doprint_48
080013F8  4884      2104          ext.w     D4
080013FA  48C4      2105          ext.l     D4
080013FC  B885      2106          cmp.l     D5,D4
080013FE  6F04      2107          ble.s     doprint_50
08001400  2005      2108          move.l    D5,D0
08001402  6006      2109          bra.s     doprint_51
                    2110   doprint_50:
08001404  1004      2111          move.b    D4,D0
08001406  4880      2112          ext.w     D0
08001408  48C0      2113          ext.l     D0
                    2114   doprint_51:
0800140A  1800      2115          move.b    D0,D4
                    2116   doprint_48:
0800140C  206E 000C 2117          move.l    12(A6),A0
08001410  1010      2118          move.b    (A0),D0
08001412  0C00 0058 2119          cmp.b     #88,D0
08001416  6600 0028 2120          bne       doprint_56
0800141A  41EE FFDC 2121          lea       -36(A6),A0
0800141E  2408      2122          move.l    A0,D2
                    2123   doprint_54:
08001420  2042      2124          move.l    D2,A0
08001422  4A10      2125          tst.b     (A0)
08001424  671A      2126          beq.s     doprint_56
08001426  2042      2127          move.l    D2,A0
08001428  1210      2128          move.b    (A0),D1
0800142A  4881      2129          ext.w     D1
0800142C  48C1      2130          ext.l     D1
0800142E  2F01      2131          move.l    D1,-(A7)
08001430  4EB9 0800 2132          jsr       _toupper
08001434  1010      
08001436  584F      2133          addq.w    #4,A7
08001438  2042      2134          move.l    D2,A0
0800143A  1080      2135          move.b    D0,(A0)
0800143C  5282      2136          addq.l    #1,D2
0800143E  60E0      2137          bra       doprint_54
                    2138   doprint_56:
08001440  7E00      2139          moveq     #0,D7
08001442  41EE FFD4 2140          lea       -44(A6),A0
08001446  2408      2141          move.l    A0,D2
08001448  206E 000C 2142          move.l    12(A6),A0
0800144C  1010      2143          move.b    (A0),D0
0800144E  0C00 0064 2144          cmp.b     #100,D0
08001452  670E      2145          beq.s     doprint_59
08001454  206E 000C 2146          move.l    12(A6),A0
08001458  1010      2147          move.b    (A0),D0
0800145A  0C00 0069 2148          cmp.b     #105,D0
0800145E  6600 0068 2149          bne       doprint_65
                    2150   doprint_59:
08001462  102E FFCE 2151          move.b    -50(A6),D0
08001466  4880      2152          ext.w     D0
08001468  48C0      2153          ext.l     D0
0800146A  4A80      2154          tst.l     D0
0800146C  660C      2155          bne.s     doprint_62
0800146E  2043      2156          move.l    D3,A0
08001470  1010      2157          move.b    (A0),D0
08001472  0C00 002D 2158          cmp.b     #45,D0
08001476  6600 0028 2159          bne       doprint_60
                    2160   doprint_62:
0800147A  2043      2161          move.l    D3,A0
0800147C  1010      2162          move.b    (A0),D0
0800147E  0C00 002D 2163          cmp.b     #45,D0
08001482  660E      2164          bne.s     doprint_63
08001484  2043      2165          move.l    D3,A0
08001486  5283      2166          addq.l    #1,D3
08001488  2242      2167          move.l    D2,A1
0800148A  5282      2168          addq.l    #1,D2
0800148C  1290      2169          move.b    (A0),(A1)
0800148E  5304      2170          subq.b    #1,D4
08001490  6008      2171          bra.s     doprint_64
                    2172   doprint_63:
08001492  2042      2173          move.l    D2,A0
08001494  5282      2174          addq.l    #1,D2
08001496  10BC 002B 2175          move.b    #43,(A0)
                    2176   doprint_64:
0800149A  5287      2177          addq.l    #1,D7
0800149C  6000 002A 2178          bra       doprint_65
                    2179   doprint_60:
080014A0  4A2E FFCF 2180          tst.b     -49(A6)
080014A4  6722      2181          beq.s     doprint_65
080014A6  2043      2182          move.l    D3,A0
080014A8  1010      2183          move.b    (A0),D0
080014AA  0C00 002D 2184          cmp.b     #45,D0
080014AE  660E      2185          bne.s     doprint_67
080014B0  2043      2186          move.l    D3,A0
080014B2  5283      2187          addq.l    #1,D3
080014B4  2242      2188          move.l    D2,A1
080014B6  5282      2189          addq.l    #1,D2
080014B8  1290      2190          move.b    (A0),(A1)
080014BA  5304      2191          subq.b    #1,D4
080014BC  6008      2192          bra.s     doprint_68
                    2193   doprint_67:
080014BE  2042      2194          move.l    D2,A0
080014C0  5282      2195          addq.l    #1,D2
080014C2  10BC 0020 2196          move.b    #32,(A0)
                    2197   doprint_68:
080014C6  5287      2198          addq.l    #1,D7
                    2199   doprint_65:
080014C8  4A2E FFD0 2200          tst.b     -48(A6)
080014CC  6700 005A 2201          beq       doprint_77
080014D0  206E 000C 2202          move.l    12(A6),A0
080014D4  1010      2203          move.b    (A0),D0
080014D6  4880      2204          ext.w     D0
080014D8  48C0      2205          ext.l     D0
080014DA  0C80 0000 2206          cmp.l     #111,D0
080014DE  006F      
080014E0  671A      2207          beq.s     doprint_73
080014E2  6E0C      2208          bgt.s     doprint_76
080014E4  0C80 0000 2209          cmp.l     #88,D0
080014E8  0058      
080014EA  6710      2210          beq.s     doprint_73
080014EC  6000 003A 2211          bra       doprint_77
                    2212   doprint_76:
080014F0  0C80 0000 2213          cmp.l     #120,D0
080014F4  0078      
080014F6  6704      2214          beq.s     doprint_73
080014F8  6000 002E 2215          bra       doprint_77
                    2216   doprint_73:
080014FC  2042      2217          move.l    D2,A0
080014FE  5282      2218          addq.l    #1,D2
08001500  10BC 0030 2219          move.b    #48,(A0)
08001504  5287      2220          addq.l    #1,D7
08001506  206E 000C 2221          move.l    12(A6),A0
0800150A  1010      2222          move.b    (A0),D0
0800150C  0C00 0078 2223          cmp.b     #120,D0
08001510  670C      2224          beq.s     doprint_79
08001512  206E 000C 2225          move.l    12(A6),A0
08001516  1010      2226          move.b    (A0),D0
08001518  0C00 0058 2227          cmp.b     #88,D0
0800151C  660A      2228          bne.s     doprint_77
                    2229   doprint_79:
0800151E  2042      2230          move.l    D2,A0
08001520  5282      2231          addq.l    #1,D2
08001522  10BC 0078 2232          move.b    #120,(A0)
08001526  5287      2233          addq.l    #1,D7
                    2234   doprint_77:
08001528  2042      2235          move.l    D2,A0
0800152A  4210      2236          clr.b     (A0)
0800152C  206E 000C 2237          move.l    12(A6),A0
08001530  1010      2238          move.b    (A0),D0
08001532  4880      2239          ext.w     D0
08001534  48C0      2240          ext.l     D0
08001536  0C80 0000 2241          cmp.l     #105,D0
0800153A  0069      
0800153C  6700 0076 2242          beq       doprint_82
08001540  6E42      2243          bgt.s     doprint_93
08001542  0C80 0000 2244          cmp.l     #99,D0
08001546  0063      
08001548  6700 0084 2245          beq       doprint_96
0800154C  6E1C      2246          bgt.s     doprint_94
0800154E  0C80 0000 2247          cmp.l     #88,D0
08001552  0058      
08001554  6700 005E 2248          beq       doprint_82
08001558  6E00 0184 2249          bgt       doprint_80
0800155C  0C80 0000 2250          cmp.l     #69,D0
08001560  0045      
08001562  6700 0050 2251          beq       doprint_82
08001566  6000 0176 2252          bra       doprint_80
                    2253   doprint_94:
0800156A  0C80 0000 2254          cmp.l     #101,D0
0800156E  0065      
08001570  6700 0042 2255          beq       doprint_82
08001574  6E00 0168 2256          bgt       doprint_80
08001578  0C80 0000 2257          cmp.l     #100,D0
0800157C  0064      
0800157E  6734      2258          beq.s     doprint_82
08001580  6000 015C 2259          bra       doprint_80
                    2260   doprint_93:
08001584  0C80 0000 2261          cmp.l     #117,D0
08001588  0075      
0800158A  6728      2262          beq.s     doprint_82
0800158C  6E1A      2263          bgt.s     doprint_95
0800158E  0C80 0000 2264          cmp.l     #115,D0
08001592  0073      
08001594  6700 0038 2265          beq       doprint_96
08001598  6E00 0144 2266          bgt       doprint_80
0800159C  0C80 0000 2267          cmp.l     #111,D0
080015A0  006F      
080015A2  6710      2268          beq.s     doprint_82
080015A4  6000 0138 2269          bra       doprint_80
                    2270   doprint_95:
080015A8  0C80 0000 2271          cmp.l     #120,D0
080015AC  0078      
080015AE  6704      2272          beq.s     doprint_82
080015B0  6000 012C 2273          bra       doprint_80
                    2274   doprint_82:
080015B4  4A2E FFD2 2275          tst.b     -46(A6)
080015B8  6714      2276          beq.s     doprint_96
080015BA  4A2E FFCD 2277          tst.b     -51(A6)
080015BE  660E      2278          bne.s     doprint_96
080015C0  200D      2279          move.l    A5,D0
080015C2  9087      2280          sub.l     D7,D0
080015C4  4884      2281          ext.w     D4
080015C6  48C4      2282          ext.l     D4
080015C8  9084      2283          sub.l     D4,D0
080015CA  2D40 FFFC 2284          move.l    D0,-4(A6)
                    2285   doprint_96:
080015CE  202E FFFC 2286          move.l    -4(A6),D0
080015D2  0C80 0000 2287          cmp.l     #0,D0
080015D6  0000      
080015D8  6C04      2288          bge.s     doprint_98
080015DA  42AE FFFC 2289          clr.l     -4(A6)
                    2290   doprint_98:
080015DE  4A2E FFCD 2291          tst.b     -51(A6)
080015E2  6600 0030 2292          bne       doprint_104
080015E6  1004      2293          move.b    D4,D0
080015E8  4880      2294          ext.w     D0
080015EA  48C0      2295          ext.l     D0
080015EC  D0AE FFFC 2296          add.l     -4(A6),D0
080015F0  D087      2297          add.l     D7,D0
080015F2  1D40 FFD1 2298          move.b    D0,-47(A6)
                    2299   doprint_102:
080015F6  102E FFD1 2300          move.b    -47(A6),D0
080015FA  4880      2301          ext.w     D0
080015FC  48C0      2302          ext.l     D0
080015FE  220D      2303          move.l    A5,D1
08001600  534D      2304          subq.w    #1,A5
08001602  B081      2305          cmp.l     D1,D0
08001604  6C0E      2306          bge.s     doprint_104
08001606  4878 0020 2307          pea       32
0800160A  2F0A      2308          move.l    A2,-(A7)
0800160C  4E93      2309          jsr       (A3)
0800160E  504F      2310          addq.w    #8,A7
08001610  5286      2311          addq.l    #1,D6
08001612  60E2      2312          bra       doprint_102
                    2313   doprint_104:
08001614  41EE FFD4 2314          lea       -44(A6),A0
08001618  2408      2315          move.l    A0,D2
                    2316   doprint_105:
0800161A  2042      2317          move.l    D2,A0
0800161C  4A10      2318          tst.b     (A0)
0800161E  6716      2319          beq.s     doprint_107
08001620  2042      2320          move.l    D2,A0
08001622  5282      2321          addq.l    #1,D2
08001624  1210      2322          move.b    (A0),D1
08001626  4881      2323          ext.w     D1
08001628  48C1      2324          ext.l     D1
0800162A  2F01      2325          move.l    D1,-(A7)
0800162C  2F0A      2326          move.l    A2,-(A7)
0800162E  4E93      2327          jsr       (A3)
08001630  504F      2328          addq.w    #8,A7
08001632  5286      2329          addq.l    #1,D6
08001634  60E4      2330          bra       doprint_105
                    2331   doprint_107:
08001636  202E FFFC 2332          move.l    -4(A6),D0
0800163A  1D40 FFD1 2333          move.b    D0,-47(A6)
                    2334   doprint_108:
0800163E  102E FFD1 2335          move.b    -47(A6),D0
08001642  532E FFD1 2336          subq.b    #1,-47(A6)
08001646  4A00      2337          tst.b     D0
08001648  670E      2338          beq.s     doprint_110
0800164A  4878 0030 2339          pea       48
0800164E  2F0A      2340          move.l    A2,-(A7)
08001650  4E93      2341          jsr       (A3)
08001652  504F      2342          addq.w    #8,A7
08001654  5286      2343          addq.l    #1,D6
08001656  60E6      2344          bra       doprint_108
                    2345   doprint_110:
08001658  2043      2346          move.l    D3,A0
0800165A  4A10      2347          tst.b     (A0)
0800165C  6700 0048 2348          beq       doprint_113
08001660  206E 000C 2349          move.l    12(A6),A0
08001664  1010      2350          move.b    (A0),D0
08001666  4880      2351          ext.w     D0
08001668  48C0      2352          ext.l     D0
0800166A  0C80 0000 2353          cmp.l     #115,D0
0800166E  0073      
08001670  670C      2354          beq.s     doprint_116
08001672  6E18      2355          bgt.s     doprint_119
08001674  0C80 0000 2356          cmp.l     #99,D0
08001678  0063      
0800167A  6702      2357          beq.s     doprint_116
0800167C  600E      2358          bra.s     doprint_119
                    2359   doprint_116:
0800167E  2005      2360          move.l    D5,D0
08001680  5385      2361          subq.l    #1,D5
08001682  0C80 0000 2362          cmp.l     #0,D0
08001686  0000      
08001688  6E02      2363          bgt.s     doprint_119
0800168A  6016      2364          bra.s     doprint_115
                    2365   doprint_119:
0800168C  2043      2366          move.l    D3,A0
0800168E  5283      2367          addq.l    #1,D3
08001690  1210      2368          move.b    (A0),D1
08001692  4881      2369          ext.w     D1
08001694  48C1      2370          ext.l     D1
08001696  2F01      2371          move.l    D1,-(A7)
08001698  2F0A      2372          move.l    A2,-(A7)
0800169A  4E93      2373          jsr       (A3)
0800169C  504F      2374          addq.w    #8,A7
0800169E  5286      2375          addq.l    #1,D6
080016A0  6002      2376          bra.s     doprint_112
                    2377   doprint_115:
080016A2  6002      2378          bra.s     doprint_113
                    2379   doprint_112:
080016A4  60B2      2380          bra       doprint_110
                    2381   doprint_113:
080016A6  4A2E FFCD 2382          tst.b     -51(A6)
080016AA  6700 0030 2383          beq       doprint_125
080016AE  1004      2384          move.b    D4,D0
080016B0  4880      2385          ext.w     D0
080016B2  48C0      2386          ext.l     D0
080016B4  D0AE FFFC 2387          add.l     -4(A6),D0
080016B8  D087      2388          add.l     D7,D0
080016BA  1D40 FFD1 2389          move.b    D0,-47(A6)
                    2390   doprint_123:
080016BE  102E FFD1 2391          move.b    -47(A6),D0
080016C2  4880      2392          ext.w     D0
080016C4  48C0      2393          ext.l     D0
080016C6  220D      2394          move.l    A5,D1
080016C8  534D      2395          subq.w    #1,A5
080016CA  B081      2396          cmp.l     D1,D0
080016CC  6C0E      2397          bge.s     doprint_125
080016CE  4878 0020 2398          pea       32
080016D2  2F0A      2399          move.l    A2,-(A7)
080016D4  4E93      2400          jsr       (A3)
080016D6  504F      2401          addq.w    #8,A7
080016D8  5386      2402          subq.l    #1,D6
080016DA  60E2      2403          bra       doprint_123
                    2404   doprint_125:
080016DC  6014      2405          bra.s     doprint_81
                    2406   doprint_80:
080016DE  206E 000C 2407          move.l    12(A6),A0
080016E2  1210      2408          move.b    (A0),D1
080016E4  4881      2409          ext.w     D1
080016E6  48C1      2410          ext.l     D1
080016E8  2F01      2411          move.l    D1,-(A7)
080016EA  2F0A      2412          move.l    A2,-(A7)
080016EC  4E93      2413          jsr       (A3)
080016EE  504F      2414          addq.w    #8,A7
080016F0  5286      2415          addq.l    #1,D6
                    2416   doprint_81:
080016F2  52AE 000C 2417          addq.l    #1,12(A6)
                    2418   doprint_2:
080016F6  6000 FA0A 2419          bra       doprint_1
                    2420   doprint_3:
080016FA  4A92      2421          tst.l     (A2)
080016FC  6710      2422          beq.s     doprint_126
080016FE  4201      2423          clr.b     D1
08001700  C2BC 0000 2424          and.l     #255,D1
08001704  00FF      
08001706  2F01      2425          move.l    D1,-(A7)
08001708  2F0A      2426          move.l    A2,-(A7)
0800170A  4E93      2427          jsr       (A3)
0800170C  504F      2428          addq.w    #8,A7
                    2429   doprint_126:
0800170E  2006      2430          move.l    D6,D0
08001710  4CDF 3CFC 2431          movem.l   (A7)+,D2/D3/D4/D5/D6/D7/A2/A3/A4/A5
08001714  4E5E      2432          unlk      A6
08001716  4E75      2433          rts
                    2434   _putch:
08001718  4E56 0000 2435          link      A6,#0
0800171C  2F02      2436          move.l    D2,-(A7)
0800171E  242E 0008 2437          move.l    8(A6),D2
08001722  0C82 0000 2438          cmp.l     #10,D2
08001726  000A      
08001728  660C      2439          bne.s     putch_1
0800172A  4878 000D 2440          pea       13
0800172E  4EB9 0800 2441          jsr       __putch
08001732  006A      
08001734  584F      2442          addq.w    #4,A7
                    2443   putch_1:
08001736  2F02      2444          move.l    D2,-(A7)
08001738  4EB9 0800 2445          jsr       __putch
0800173C  006A      
0800173E  584F      2446          addq.w    #4,A7
08001740  2002      2447          move.l    D2,D0
08001742  241F      2448          move.l    (A7)+,D2
08001744  4E5E      2449          unlk      A6
08001746  4E75      2450          rts
                    2451   _getch:
08001748  2F02      2452          move.l    D2,-(A7)
0800174A  2439 0800 2453          move.l    __ungetbuf.L,D2
0800174E  1C58      
08001750  2039 0800 2454          move.l    __ungetbuf.L,D0
08001754  1C58      
08001756  0C80 FFFF 2455          cmp.l     #-1,D0
0800175A  FFFF      
0800175C  670C      2456          beq.s     getch_1
0800175E  23FC FFFF 2457          move.l    #-1,__ungetbuf.L
08001762  FFFF 0800 
08001766  1C58      
08001768  6012      2458          bra.s     getch_3
                    2459   getch_1:
0800176A  4EB9 0800 2460          jsr       __getch
0800176E  003E      
08001770  2400      2461          move.l    D0,D2
08001772  0C80 0000 2462          cmp.l     #13,D0
08001776  000D      
08001778  6602      2463          bne.s     getch_3
0800177A  740A      2464          moveq     #10,D2
                    2465   getch_3:
0800177C  2002      2466          move.l    D2,D0
0800177E  241F      2467          move.l    (A7)+,D2
08001780  4E75      2468          rts
                    2469   @itoa_convert:
08001782  4E56 0000 2470          link      A6,#0
08001786  48E7 3C00 2471          movem.l   D2/D3/D4/D5,-(A7)
0800178A  242E 0008 2472          move.l    8(A6),D2
0800178E  262E 0010 2473          move.l    16(A6),D3
08001792  2A2E 000C 2474          move.l    12(A6),D5
08001796  2F05      2475          move.l    D5,-(A7)
08001798  2F03      2476          move.l    D3,-(A7)
0800179A  4EB9 0800 2477          jsr       ULDIV
0800179E  1914      
080017A0  202F 0004 2478          move.l    4(A7),D0
080017A4  504F      2479          addq.w    #8,A7
080017A6  2800      2480          move.l    D0,D4
080017A8  BA83      2481          cmp.l     D3,D5
080017AA  6520      2482          blo.s     @itoa_convert_1
080017AC  2F03      2483          move.l    D3,-(A7)
080017AE  2F05      2484          move.l    D5,-(A7)
080017B0  2F03      2485          move.l    D3,-(A7)
080017B2  4EB9 0800 2486          jsr       ULDIV
080017B6  1914      
080017B8  2217      2487          move.l    (A7),D1
080017BA  504F      2488          addq.w    #8,A7
080017BC  2F01      2489          move.l    D1,-(A7)
080017BE  2F02      2490          move.l    D2,-(A7)
080017C0  4EB9 0800 2491          jsr       @itoa_convert
080017C4  1782      
080017C6  DEFC 000C 2492          add.w     #12,A7
080017CA  2400      2493          move.l    D0,D2
                    2494   @itoa_convert_1:
080017CC  0C84 0000 2495          cmp.l     #9,D4
080017D0  0009      
080017D2  6E0E      2496          bgt.s     @itoa_convert_3
080017D4  2004      2497          move.l    D4,D0
080017D6  7230      2498          moveq     #48,D1
080017D8  C2BC 0000 2499          and.l     #255,D1
080017DC  00FF      
080017DE  D081      2500          add.l     D1,D0
080017E0  6012      2501          bra.s     @itoa_convert_4
                    2502   @itoa_convert_3:
080017E2  2004      2503          move.l    D4,D0
080017E4  7261      2504          moveq     #97,D1
080017E6  C2BC 0000 2505          and.l     #255,D1
080017EA  00FF      
080017EC  D081      2506          add.l     D1,D0
080017EE  0480 0000 2507          sub.l     #10,D0
080017F2  000A      
                    2508   @itoa_convert_4:
080017F4  2042      2509          move.l    D2,A0
080017F6  1080      2510          move.b    D0,(A0)
080017F8  2002      2511          move.l    D2,D0
080017FA  5280      2512          addq.l    #1,D0
080017FC  4CDF 003C 2513          movem.l   (A7)+,D2/D3/D4/D5
08001800  4E5E      2514          unlk      A6
08001802  4E75      2515          rts
                    2516   _ltoa:
08001804  4E56 0000 2517          link      A6,#0
08001808  48E7 3C00 2518          movem.l   D2/D3/D4/D5,-(A7)
0800180C  242E 0008 2519          move.l    8(A6),D2
08001810  262E 000C 2520          move.l    12(A6),D3
08001814  2A2E 0010 2521          move.l    16(A6),D5
08001818  2803      2522          move.l    D3,D4
0800181A  0C85 0000 2523          cmp.l     #2,D5
0800181E  0002      
08001820  6D08      2524          blt.s     ltoa_3
08001822  0C85 0000 2525          cmp.l     #36,D5
08001826  0024      
08001828  6F06      2526          ble.s     ltoa_1
                    2527   ltoa_3:
0800182A  2003      2528          move.l    D3,D0
0800182C  6000 0056 2529          bra       ltoa_4
                    2530   ltoa_1:
08001830  0C85 0000 2531          cmp.l     #10,D5
08001834  000A      
08001836  6600 0034 2532          bne       ltoa_5
0800183A  0C82 0000 2533          cmp.l     #0,D2
0800183E  0000      
08001840  6C2A      2534          bge.s     ltoa_5
08001842  2002      2535          move.l    D2,D0
08001844  4480      2536          neg.l     D0
08001846  2400      2537          move.l    D0,D2
08001848  0C82 0000 2538          cmp.l     #0,D2
0800184C  0000      
0800184E  6C14      2539          bge.s     ltoa_7
08001850  4879 0800 2540          pea       @itoa_1.L
08001854  1C4C      
08001856  2F03      2541          move.l    D3,-(A7)
08001858  4EB9 0800 2542          jsr       _strcpy
0800185C  1904      
0800185E  504F      2543          addq.w    #8,A7
08001860  2003      2544          move.l    D3,D0
08001862  6020      2545          bra.s     ltoa_4
                    2546   ltoa_7:
08001864  2044      2547          move.l    D4,A0
08001866  5284      2548          addq.l    #1,D4
08001868  10BC 002D 2549          move.b    #45,(A0)
                    2550   ltoa_5:
0800186C  2F05      2551          move.l    D5,-(A7)
0800186E  2F02      2552          move.l    D2,-(A7)
08001870  2F04      2553          move.l    D4,-(A7)
08001872  4EB9 0800 2554          jsr       @itoa_convert
08001876  1782      
08001878  DEFC 000C 2555          add.w     #12,A7
0800187C  2800      2556          move.l    D0,D4
0800187E  2044      2557          move.l    D4,A0
08001880  4210      2558          clr.b     (A0)
08001882  2003      2559          move.l    D3,D0
                    2560   ltoa_4:
08001884  4CDF 003C 2561          movem.l   (A7)+,D2/D3/D4/D5
08001888  4E5E      2562          unlk      A6
0800188A  4E75      2563          rts
                    2564   _ultoa:
0800188C  4E56 0000 2565          link      A6,#0
08001890  48E7 3800 2566          movem.l   D2/D3/D4,-(A7)
08001894  262E 0010 2567          move.l    16(A6),D3
08001898  282E 000C 2568          move.l    12(A6),D4
0800189C  2404      2569          move.l    D4,D2
0800189E  0C83 0000 2570          cmp.l     #2,D3
080018A2  0002      
080018A4  6D08      2571          blt.s     ultoa_3
080018A6  0C83 0000 2572          cmp.l     #36,D3
080018AA  0024      
080018AC  6F04      2573          ble.s     ultoa_1
                    2574   ultoa_3:
080018AE  2004      2575          move.l    D4,D0
080018B0  601A      2576          bra.s     ultoa_4
                    2577   ultoa_1:
080018B2  2F03      2578          move.l    D3,-(A7)
080018B4  2F2E 0008 2579          move.l    8(A6),-(A7)
080018B8  2F02      2580          move.l    D2,-(A7)
080018BA  4EB9 0800 2581          jsr       @itoa_convert
080018BE  1782      
080018C0  DEFC 000C 2582          add.w     #12,A7
080018C4  2400      2583          move.l    D0,D2
080018C6  2042      2584          move.l    D2,A0
080018C8  4210      2585          clr.b     (A0)
080018CA  2004      2586          move.l    D4,D0
                    2587   ultoa_4:
080018CC  4CDF 001C 2588          movem.l   (A7)+,D2/D3/D4
080018D0  4E5E      2589          unlk      A6
080018D2  4E75      2590          rts
                    2591   _itoa:
080018D4  4E56 0000 2592          link      A6,#0
080018D8  2F2E 0010 2593          move.l    16(A6),-(A7)
080018DC  2F2E 000C 2594          move.l    12(A6),-(A7)
080018E0  2F2E 0008 2595          move.l    8(A6),-(A7)
080018E4  4EB9 0800 2596          jsr       _ltoa
080018E8  1804      
080018EA  DEFC 000C 2597          add.w     #12,A7
080018EE  4E5E      2598          unlk      A6
080018F0  4E75      2599          rts
                    2600   _strlen:
080018F2  206F 0004 2601          move.l    (4,A7),A0
080018F6  2248      2602          move.l    A0,A1
                    2603   strlen_1:
080018F8  4A19      2604          tst.b     (A1)+
080018FA  66FC      2605          bne       strlen_1
080018FC  2009      2606          move.l    A1,D0
080018FE  9088      2607          sub.l     A0,D0
08001900  5380      2608          subq.l    #1,D0
08001902  4E75      2609          rts
                    2610   _strcpy:
08001904  206F 0004 2611          move.l    (4,A7),A0
08001908  226F 0008 2612          move.l    (8,A7),A1
0800190C  2008      2613          move.l    A0,D0
                    2614   strcpy_1:
0800190E  10D9      2615          move.b    (A1)+,(A0)+
08001910  66FC      2616          bne.s     strcpy_1
08001912  4E75      2617          rts
                    2618   ULDIV:
08001914  4E56 0000 2619          link    A6,#0
08001918  48E7 C000 2620          movem.l D0/D1,-(A7)
0800191C  222E 0008 2621          move.l  8(A6),D1
08001920  202E 000C 2622          move.l  12(A6),D0
08001924  6036      2623          bra.s   ldiv_3
                    2624   LDIV:
08001926  4E56 0000 2625          link    A6,#0
0800192A  48E7 C000 2626          movem.l D0/D1,-(A7)
0800192E  222E 0008 2627          move.l  8(A6),D1
08001932  202E 000C 2628          move.l  12(A6),D0
08001936  4A80      2629          tst.l   D0
08001938  6A0E      2630          bpl.s   ldiv_1
0800193A  4480      2631          neg.l   D0
0800193C  4A81      2632          tst.l   D1
0800193E  6A14      2633          bpl.s   ldiv_2
08001940  4481      2634          neg.l   D1
08001942  612A      2635          bsr.s   dodiv
08001944  4481      2636          neg.l   D1
08001946  6016      2637          bra.s   ldiv_4
                    2638   ldiv_1:
08001948  4A81      2639          tst.l   D1
0800194A  6A10      2640          bpl.s   ldiv_3
0800194C  4481      2641          neg.l   D1
0800194E  611E      2642          bsr.s   dodiv
08001950  4480      2643          neg.l   D0
08001952  600A      2644          bra.s   ldiv_4
                    2645   ldiv_2:
08001954  6118      2646          bsr.s   dodiv
08001956  4480      2647          neg.l   D0
08001958  4481      2648          neg.l   D1
0800195A  6002      2649          bra.s   ldiv_4
                    2650   ldiv_3:
0800195C  6110      2651          bsr.s   dodiv
                    2652   ldiv_4:
0800195E  2D40 0008 2653          move.l  D0,8(A6)
08001962  2D41 000C 2654          move.l  D1,12(A6)
08001966  4CDF 0003 2655          movem.l (A7)+,D0/D1
0800196A  4E5E      2656          unlk    A6
0800196C  4E75      2657          rts
                    2658   dodiv:
0800196E  0C81 0000 2659          cmpi.l  #$FFFF,D1
08001972  FFFF      
08001974  6236      2660          bhi.s   dodiv_2
08001976  0C80 0000 2661          cmpi.l  #$FFFF,D0
0800197A  FFFF      
0800197C  6210      2662          bhi.s   dodiv_1
0800197E  80C1      2663          divu    D1,D0
08001980  2200      2664          move.l  D0,D1
08001982  4241      2665          clr.w   D1
08001984  4841      2666          swap    D1
08001986  0280 0000 2667          andi.l  #$FFFF,D0
0800198A  FFFF      
0800198C  4E75      2668          rts
                    2669   dodiv_1:
0800198E  48A7 A000 2670          movem.w D0/D2,-(A7)
08001992  4240      2671          clr.w   D0
08001994  4840      2672          swap    D0
08001996  80C1      2673          divu    D1,D0
08001998  3400      2674          move.w  D0,D2
0800199A  301F      2675          move.w  (A7)+,D0
0800199C  80C1      2676          divu    D1,D0
0800199E  4840      2677          swap    D0
080019A0  4281      2678          clr.l   D1
080019A2  3200      2679          move.w  D0,D1
080019A4  3002      2680          move.w  D2,D0
080019A6  4840      2681          swap    D0
080019A8  341F      2682          move.w  (A7)+,D2
080019AA  4E75      2683          rts
                    2684   dodiv_2:
080019AC  48E7 3800 2685          movem.l D2/D3/D4,-(A7)
080019B0  2401      2686          move.l  D1,D2
080019B2  4242      2687          clr.w   D2
080019B4  4842      2688          swap    D2
080019B6  5282      2689          addq.l  #1,D2
080019B8  2600      2690          move.l  D0,D3
080019BA  2801      2691          move.l  D1,D4
080019BC  2202      2692          move.l  D2,D1
080019BE  61CE      2693          bsr.s   dodiv_1
080019C0  2204      2694          move.l  D4,D1
080019C2  82C2      2695          divu    D2,D1
080019C4  80C1      2696          divu    D1,D0
080019C6  0280 0000 2697          andi.l  #$FFFF,D0
080019CA  FFFF      
                    2698   dodiv_3:
080019CC  2204      2699          move.l  D4,D1
080019CE  2404      2700          move.l  D4,D2
080019D0  4842      2701          swap    D2
080019D2  C2C0      2702          mulu    D0,D1
080019D4  C4C0      2703          mulu    D0,D2
080019D6  4842      2704          swap    D2
080019D8  D282      2705          add.l   D2,D1
080019DA  9283      2706          sub.l   D3,D1
080019DC  620A      2707          bhi.s   dodiv_4
080019DE  4481      2708          neg.l   D1
080019E0  B881      2709          cmp.l   D1,D4
080019E2  6208      2710          bhi.s   dodiv_5
080019E4  5280      2711          addq.l  #1,D0
080019E6  60E4      2712          bra.s   dodiv_3
                    2713   dodiv_4:
080019E8  5380      2714          subq.l  #1,D0
080019EA  60E0      2715          bra.s   dodiv_3
                    2716   dodiv_5:
080019EC  4CDF 001C 2717          movem.l (A7)+,D2/D3/D4
080019F0  4E75      2718          rts
                    2719          section   const
080019F2            2720                   align
                    2721   
                    2722   
                    2723   @m68kus~1_1:
080019F2  5772 6974 2724          dc.b      87,114,105,116,105,110,103,32,80,97,103,101
080019F6  696E 6720 
080019FA  5061 6765 
080019FE  2074 6F20 2725          dc.b      32,116,111,32,69,69,80,82,79,77,13,10,0
08001A02  4545 5052 
08001A06  4F4D 0D0A 
08001A0A  00        
                    2726   @m68kus~1_2:
08001A0C  4143 4B20 2727          dc.b      65,67,75,32,61,32,37,100,13,10,0
08001A10  3D20 2564 
08001A14  0D0A 00   
                    2728   @m68kus~1_3:
08001A18  4E6F 2041 2729          dc.b      78,111,32,65,67,75,32,114,101,116,117,114,110
08001A1C  434B 2072 
08001A20  6574 7572 
08001A24  6E        
08001A25  6564 2066 2730          dc.b      101,100,32,102,111,114,32,98,121,116,101,32
08001A29  6F72 2062 
08001A2D  7974 6520 
08001A31  2325 6400 2731          dc.b      35,37,100,0
                    2732   @m68kus~1_4:
08001A36  5772 6974 2733          dc.b      87,114,105,116,105,110,103,32,66,121,116,101
08001A3A  696E 6720 
08001A3E  4279 7465 
08001A42  2074 6F20 2734          dc.b      32,116,111,32,69,69,80,82,79,77,13,10,0
08001A46  4545 5052 
08001A4A  4F4D 0D0A 
08001A4E  00        
                    2735   @m68kus~1_5:
08001A50  5761 6974 2736          dc.b      87,97,105,116,105,110,103,32,102,111,114,32
08001A54  696E 6720 
08001A58  666F 7220 
08001A5C  496E 7465 2737          dc.b      73,110,116,101,114,110,97,108,32,87,114,105
08001A60  726E 616C 
08001A64  2057 7269 
08001A68  7465 210D 2738          dc.b      116,101,33,13,10,0
08001A6C  0A00      
                    2739   @m68kus~1_6:
08001A6E  496E 7465 2740          dc.b      73,110,116,101,114,110,97,108,32,87,114,105
08001A72  726E 616C 
08001A76  2057 7269 
08001A7A  7465 2043 2741          dc.b      116,101,32,67,111,109,112,108,101,116,101,33
08001A7E  6F6D 706C 
08001A82  6574 6521 
08001A86  0D0A 00   2742          dc.b      13,10,0
                    2743   @m68kus~1_7:
08001A8A  5265 6164 2744          dc.b      82,101,97,100,105,110,103,32,80,97,103,101,32
08001A8E  696E 6720 
08001A92  5061 6765 
08001A96  20        
08001A97  6672 6F6D 2745          dc.b      102,114,111,109,32,69,69,80,82,79,77,32,13,10
08001A9B  2045 4550 
08001A9F  524F 4D20 
08001AA3  0D0A      
08001AA5  00        2746          dc.b      0
                    2747   @m68kus~1_8:
08001AA6  5061 6765 2748          dc.b      80,97,103,101,32,82,101,97,100,32,70,97,105
08001AAA  2052 6561 
08001AAE  6420 4661 
08001AB2  69        
08001AB3  6C65 6420 2749          dc.b      108,101,100,32,97,116,32,66,121,116,101,32,35
08001AB7  6174 2042 
08001ABB  7974 6520 
08001ABF  23        
08001AC0  2564 0D0A 2750          dc.b      37,100,13,10,0
08001AC4  00        
                    2751   @m68kus~1_9:
08001AC6  5061 6765 2752          dc.b      80,97,103,101,32,82,101,97,100,32,83,117,99
08001ACA  2052 6561 
08001ACE  6420 5375 
08001AD2  63        
08001AD3  6365 7373 2753          dc.b      99,101,115,115,102,117,108,13,10,0
08001AD7  6675 6C0D 
08001ADB  0A00      
                    2754   @m68kus~1_10:
08001ADE  5265 6164 2755          dc.b      82,101,97,100,105,110,103,32,66,121,116,101
08001AE2  696E 6720 
08001AE6  4279 7465 
08001AEA  2066 726F 2756          dc.b      32,102,114,111,109,32,69,69,80,82,79,77,32,13
08001AEE  6D20 4545 
08001AF2  5052 4F4D 
08001AF6  200D      
08001AF8  0A00      2757          dc.b      10,0
                    2758   @m68kus~1_11:
08001AFA  0D0A 4865 2759          dc.b      13,10,72,101,108,108,111,32,73,73,67,32,76,97
08001AFE  6C6C 6F20 
08001B02  4949 4320 
08001B06  4C61      
08001B08  620D 0A00 2760          dc.b      98,13,10,0
                    2761   @m68kus~1_12:
08001B0C  5468 6973 2762          dc.b      84,104,105,115,32,105,115,32,116,104,101,32
08001B10  2069 7320 
08001B14  7468 6520 
08001B18  7365 6E74 2763          dc.b      115,101,110,116,32,66,121,116,101,58,32,37,117
08001B1C  2042 7974 
08001B20  653A 2025 
08001B24  75        
08001B25  0D0A 00   2764          dc.b      13,10,0
                    2765   @m68kus~1_13:
08001B28  5468 6973 2766          dc.b      84,104,105,115,32,105,115,32,116,104,101,32
08001B2C  2069 7320 
08001B30  7468 6520 
08001B34  7265 6365 2767          dc.b      114,101,99,101,105,118,101,100,32,66,121,116
08001B38  6976 6564 
08001B3C  2042 7974 
08001B40  653A 2025 2768          dc.b      101,58,32,37,117,13,10,0
08001B44  750D 0A00 
                    2769   @doscan_1:
08001B48  0A00      2770          dc.b      10,0
                    2771   __ctype:
08001B4A  0040 4040 2772          dc.b      0,64,64,64,64,64,64,64,64,64,80,80,80,80,80
08001B4E  4040 4040 
08001B52  4040 5050 
08001B56  5050 50   
08001B59  4040 4040 2773          dc.b      64,64,64,64,64,64,64,64,64,64,64,64,64,64,64
08001B5D  4040 4040 
08001B61  4040 4040 
08001B65  4040 40   
08001B68  4040 40D0 2774          dc.b      64,64,64,208,160,160,160,160,160,160,160,160
08001B6C  A0A0 A0A0 
08001B70  A0A0 A0A0 
08001B74  A0A0 A0A0 2775          dc.b      160,160,160,160,160,160,160,140,140,140,140
08001B78  A0A0 A08C 
08001B7C  8C8C 8C   
08001B7F  8C8C 8C8C 2776          dc.b      140,140,140,140,140,140,160,160,160,160,160
08001B83  8C8C A0A0 
08001B87  A0A0 A0   
08001B8A  A0A0 8A8A 2777          dc.b      160,160,138,138,138,138,138,138,130,130,130
08001B8E  8A8A 8A8A 
08001B92  8282 82   
08001B95  8282 8282 2778          dc.b      130,130,130,130,130,130,130,130,130,130,130
08001B99  8282 8282 
08001B9D  8282 82   
08001BA0  8282 8282 2779          dc.b      130,130,130,130,130,130,160,160,160,160,160
08001BA4  8282 A0A0 
08001BA8  A0A0 A0   
08001BAB  A089 8989 2780          dc.b      160,137,137,137,137,137,137,129,129,129,129
08001BAF  8989 8981 
08001BB3  8181 81   
08001BB6  8181 8181 2781          dc.b      129,129,129,129,129,129,129,129,129,129,129
08001BBA  8181 8181 
08001BBE  8181 81   
08001BC1  8181 8181 2782          dc.b      129,129,129,129,129,160,160,160,160,64,0,0,0
08001BC5  81A0 A0A0 
08001BC9  A040 0000 
08001BCD  00        
08001BCE  0000 0000 2783          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001BD2  0000 0000 
08001BD6  0000 0000 
08001BDA  0000 0000 
08001BDE  0000 0000 
08001BE2  0000      
08001BE4  0000 0000 2784          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001BE8  0000 0000 
08001BEC  0000 0000 
08001BF0  0000 0000 
08001BF4  0000 0000 
08001BF8  0000      
08001BFA  0000 0000 2785          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001BFE  0000 0000 
08001C02  0000 0000 
08001C06  0000 0000 
08001C0A  0000 0000 
08001C0E  0000      
08001C10  0000 0000 2786          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001C14  0000 0000 
08001C18  0000 0000 
08001C1C  0000 0000 
08001C20  0000 0000 
08001C24  0000      
08001C26  0000 0000 2787          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001C2A  0000 0000 
08001C2E  0000 0000 
08001C32  0000 0000 
08001C36  0000 0000 
08001C3A  0000      
08001C3C  0000 0000 2788          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08001C40  0000 0000 
08001C44  0000 0000 
08001C48  0000 00   
                    2789   @itoa_1:
08001C4C  2D32 3134 2790          dc.b      45,50,49,52,55,52,56,51,54,52,56,0
08001C50  3734 3833 
08001C54  3634 3800 
                    2791          section   data
08001C58            2792                   align
                    2793   
                    2794   *********************************************************************************************************************************************************
                    2795   * Section for Initialised Data (in theory should be copied to Ram at startup) but is part of program code as we copy whole program to ram at startup
                    2796   ********************************************************************************************************************************************************
                    2797   
          0800 1C58 2798   DataStart       equ       *
08001C58            2799   __ungetbuf:     ds.l      1                    ungetbuffer for stdio functions
08001C5C            2800   __allocp:       ds.l      1                    start of free memory block list
08001C60            2801   __heap:         ds.l      1                    begin of free memory
                    2802   
                    2803   
                    2804   @doscan_lpbuf:
08001C64  0800 1C68 2805          dc.l      @doscan_buf
                    2806          section   bss
08001C68            2807                   align
                    2808   
          0800 1C68 2809   DataEnd         equ       *                    this label will equate to the address of the last byte of global variable in it
          0000 0010 2810   DataLength      equ       DataEnd-DataStart    length of data needed to copy to Ram on bootup
                    2811   
                    2812   *********************************************************************************************************
                    2813   * Section for uninitialised Data which is set to zero, i.e. we should set this space to zero at starup
                    2814   *********************************************************************************************************
          0800 1C68 2815   BssStart       equ       *
                    2816   
                    2817   @doscan_buf:
08001C68            2818          ds.b      80
                    2819          section   heap
08001CB8            2820                  align
                    2821   
          0800 1CB8 2822   BssEnd         equ       *
          0000 0050 2823   BssLength      equ       BssEnd-BssStart       length of zeroed data needed to copy to Ram on bootup
                    2824   
                    2825   *********************************************************************************************************
                    2826   * Section for Heap
                    2827   *********************************************************************************************************
                    2828   
          0800 1CB8 2829   heap           equ       *
08001CB8            2830                  align
          0800 0000

Assembly errors: 0
