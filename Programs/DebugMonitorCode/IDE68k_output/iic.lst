680x0 MACRO ASSEMBLER   Version 5.00   (c) 1992-2005 Peter J. Fondse

Date: 25 Mar 2019      Time: 20:49:00          Source: C:\M68K\PROGRAMS\DEBUGMONITORCODE\IDE68K_OUTPUT\IIC.SRC

                       1          section   code
                       2   **********************************************************************************************************
                       3   * CSTART.ASM  -  C startup-code
                       4   *
                       5   *          Initialises the system prior to running the users main() program
                       6   *
                       7   *          1) Sets up the user program stack pointer
                       8   *          2) Switches to User mode in the 68000
                       9   *          3) Enables All Interrupts 1-7 on 68000
                      10   *          4) Copies all initialised C program variables from Rom to Ram prior to running main()
                      11   *
                      12   **********************************************************************************************************
00000000              13                   align
                      14   
                      15   
                      16   **********************************************************************************************************
                      17   * The Following ORG Statement marks the address of the start of the this CStart Program
                      18   *
                      19   * The debug Monitor and Flash Load and Program routines assume your program lives here
                      20   **********************************************************************************************************
08000000              21                   org       $08000000
08000000  46FC 2000   22   start:          move.w    #$2000,SR             clear interrupts to enable all, move to supervisor mode
                      23   
                      24   ******************************************************************************************
                      25   * Set unitialised global variables to 0 at startup
                      26   ******************************************************************************************
08000004  207C 0800   27   mainloop        movea.l   #BssStart,a0          point a0 to the start of the initialised data section held in ROM
08000008  214C      
0800000A  203C 0000   28                   move.l    #BssLength,d0         figure out how many bytes of C program variables data to copy
0800000E  0050      
08000010  6700 0024   29                   beq       go_main               if no data to copy go straight to program
08000014  10FC 0000   30   Zeroinit        move.b    #0,(a0)+              copy the C program initialise variables from rom to ram
08000018  5380        31                   subq.l    #1,d0
0800001A  66F8        32                   bne       Zeroinit
                      33   
                      34   *******************************************************************************************
                      35   * last minute initialisation before calling main
                      36   *******************************************************************************************
                      37   
0800001C  23FC FFFF   38                   move.l    #-1,__ungetbuf         required for use of scanf() etc in C programs
08000020  FFFF 0800 
08000024  213C      
08000026  42B9 0800   39                   clr.l     __allocp               used by malloc() in C
0800002A  2140      
0800002C  23FC 0800   40                   move.l    #heap,__heap           pointer to free memory
08000030  219C 0800 
08000034  2144      
08000036  4EB9 0800   41   go_main         jsr       _main
0800003A  07EE      
0800003C  60C2        42                   bra       start
                      43   
                      44   ; C:\M68K\PROGRAMS\DEBUGMONITORCODE\IIC EEPROM PROGRAM FILES\M68KUSERPROGRAM (DE1).C - Compiled by CC68K  Version 5.00 (c) 1991-2005  Peter J. Fondse
                      45   ; #include <stdio.h>
                      46   ; #include <time.h>
                      47   ; /*********************************************************************************************
                      48   ; **  RS232 port addresses
                      49   ; *********************************************************************************************/
                      50   ; #define RS232_Control     *(volatile unsigned char *)(0x00400040)
                      51   ; #define RS232_Status      *(volatile unsigned char *)(0x00400040)
                      52   ; #define RS232_TxData      *(volatile unsigned char *)(0x00400042)
                      53   ; #define RS232_RxData      *(volatile unsigned char *)(0x00400042)
                      54   ; #define RS232_Baud        *(volatile unsigned char *)(0x00400044)
                      55   ; /*********************************************************************************************
                      56   ; **  IIC registers
                      57   ; *********************************************************************************************/
                      58   ; #define PRERlo  (*(volatile unsigned char *)(0x00408000)) // Clock Prescale register lo-byte
                      59   ; #define PRERhi  (*(volatile unsigned char *)(0x00408002)) // Clock Prescale register hi-byte
                      60   ; #define CTR     (*(volatile unsigned char *)(0x00408004)) // Control Register
                      61   ; #define TXR     (*(volatile unsigned char *)(0x00408006)) // Transmit Register
                      62   ; #define RXR     (*(volatile unsigned char *)(0x00408006)) // Receive Register
                      63   ; #define CR      (*(volatile unsigned char *)(0x00408008)) // Command Register
                      64   ; #define SR      (*(volatile unsigned char *)(0x00408008)) // Status Register
                      65   ; // Sequence Start & Stop Register Commands
                      66   ; #define start           0x80    // Set STA bit              --> (1000 0000)
                      67   ; #define stop            0x40    // Set STO bit              --> (0100 0000)
                      68   ; // Write Command Register Commands
                      69   ; #define startWrite      0x90    // set STA, WR bit          --> (1001 0000)
                      70   ; #define Write           0x10    // set WR bit               --> (0001 0000)
                      71   ; #define ReadIACK        0x21    // Set RD, IACK bits        --> (0010 0001)
                      72   ; #define ReadNACKIACK    0x29    // Set RD, ACK, IACK bits   --> (0010 1001)
                      73   ; #define stopWrite       0x50    // set STO, WR bit          --> (0101 0000)
                      74   ; // Read Command Register Commands
                      75   ; #define startRead       0xA8    // set STA, RD, ACK bit     --> (1010 1000)
                      76   ; #define stopRead        0x41    // set STO, IACK bit        --> (0100 0001)
                      77   ; /*********************************************************************************************
                      78   ; **  Function protoTypes
                      79   ; *********************************************************************************************/
                      80   ; void SequentialBlockWrite(long address, long sizeOfBlock, char payloadByte);
                      81   ; void UtilSequentialBlockWrite(long address, long endAddress, char payloadByte);
                      82   ; void WritePageToChip(void);
                      83   ; void WriteByteToChip(char c);
                      84   ; void initiateWriteSequence(long address);
                      85   ; void WaitForWriteCycle(void);
                      86   ; void SequentialBlockRead(long address, long sizeOfBlock, char expectedByte);
                      87   ; int utilSequentialBlockRead(long utilAddress, long utilEndAddress, char expectedByte);
                      88   ; void ReadPageFromChip(void);
                      89   ; char ReadByteFromChip(void);
                      90   ; void initiateReadSequence(long address);
                      91   ; void BlockDecode(char * writeControlByte, char * readControlByte, long address);
                      92   ; void WaitForTXByte(void);
                      93   ; void WaitForReceivedByte(void);
                      94   ; int CheckForACK(void);
                      95   ; void IIC_Init(void);
                      96   ; int _getch( void )
                      97   ; {
                      98   __getch:
0800003E  4E56 FFFC   99          link      A6,#-4
                     100   ; char c ;
                     101   ; while((RS232_Status & (char)(0x01)) != (char)(0x01))    // wait for Rx bit in 6850 serial comms chip status register to be '1'
                     102   _getch_1:
08000042  1039 0040  103          move.b    4194368,D0
08000046  0040      
08000048  C03C 0001  104          and.b     #1,D0
0800004C  0C00 0001  105          cmp.b     #1,D0
08000050  6702       106          beq.s     _getch_3
08000052  60EE       107          bra       _getch_1
                     108   _getch_3:
                     109   ; ;
                     110   ; return (RS232_RxData & (char)(0x7f));                   // read received character, mask off top bit and return as 7 bit ASCII character
08000054  1039 0040  111          move.b    4194370,D0
08000058  0042      
0800005A  C0BC 0000  112          and.l     #255,D0
0800005E  00FF      
08000060  C0BC 0000  113          and.l     #127,D0
08000064  007F      
08000066  4E5E       114          unlk      A6
08000068  4E75       115          rts
                     116   ; }
                     117   ; int _putch( int c)
                     118   ; {
                     119   __putch:
0800006A  4E56 0000  120          link      A6,#0
                     121   ; while((RS232_Status & (char)(0x02)) != (char)(0x02))    // wait for Tx bit in status register or 6850 serial comms chip to be '1'
                     122   _putch_1:
0800006E  1039 0040  123          move.b    4194368,D0
08000072  0040      
08000074  C03C 0002  124          and.b     #2,D0
08000078  0C00 0002  125          cmp.b     #2,D0
0800007C  6702       126          beq.s     _putch_3
0800007E  60EE       127          bra       _putch_1
                     128   _putch_3:
                     129   ; ;
                     130   ; RS232_TxData = (c & (char)(0x7f));                      // write to the data register to output the character (mask off bit 8 to keep it 7 bit ASCII)
08000080  202E 0008  131          move.l    8(A6),D0
08000084  C0BC 0000  132          and.l     #127,D0
08000088  007F      
0800008A  13C0 0040  133          move.b    D0,4194370
0800008E  0042      
                     134   ; return c ;                                              // putchar() expects the character to be returned
08000090  202E 0008  135          move.l    8(A6),D0
08000094  4E5E       136          unlk      A6
08000096  4E75       137          rts
                     138   ; }
                     139   ; /*********************************************************************************************
                     140   ; **  Write Sequential Block to EEPROM Chip
                     141   ; *********************************************************************************************/
                     142   ; void SequentialBlockWrite(long address, long sizeOfBlock, char payloadByte){
                     143   _SequentialBlockWrite:
08000098  4E56 FFFC  144          link      A6,#-4
0800009C  48E7 3820  145          movem.l   D2/D3/D4/A2,-(A7)
080000A0  45F9 0800  146          lea       _printf.L,A2
080000A4  123C      
080000A6  282E 0008  147          move.l    8(A6),D4
                     148   ; int i = 0;
080000AA  42AE FFFC  149          clr.l     -4(A6)
                     150   ; long endAddress = (address + sizeOfBlock) - 1;
080000AE  2004       151          move.l    D4,D0
080000B0  D0AE 000C  152          add.l     12(A6),D0
080000B4  5380       153          subq.l    #1,D0
080000B6  2400       154          move.l    D0,D2
                     155   ; long overflowEndAddress = 0;
080000B8  4283       156          clr.l     D3
                     157   ; // Safety check
                     158   ; if (sizeOfBlock > 0x1FFFF){
080000BA  202E 000C  159          move.l    12(A6),D0
080000BE  0C80 0001  160          cmp.l     #131071,D0
080000C2  FFFF      
080000C4  6F0E       161          ble.s     SequentialBlockWrite_1
                     162   ; printf("SequentialBlockWrite: Size of Input Data Block cannot exceed 128kBytes\r\n");
080000C6  4879 0800  163          pea       @m68kus~1_1.L
080000CA  1CB8      
080000CC  4E92       164          jsr       (A2)
080000CE  584F       165          addq.w    #4,A7
                     166   ; return;
080000D0  6000 008C  167          bra       SequentialBlockWrite_3
                     168   SequentialBlockWrite_1:
                     169   ; }
                     170   ; if (address > 0x1FFFF){
080000D4  0C84 0001  171          cmp.l     #131071,D4
080000D8  FFFF      
080000DA  6F0E       172          ble.s     SequentialBlockWrite_4
                     173   ; printf("SequentialBlockWrite: Entered Address Out of Range\r\n");
080000DC  4879 0800  174          pea       @m68kus~1_2.L
080000E0  1D02      
080000E2  4E92       175          jsr       (A2)
080000E4  584F       176          addq.w    #4,A7
                     177   ; return;
080000E6  6000 0076  178          bra       SequentialBlockWrite_3
                     179   SequentialBlockWrite_4:
                     180   ; }
                     181   ; // Wrap-Around check
                     182   ; if (endAddress > 0x1FFFF){
080000EA  0C82 0001  183          cmp.l     #131071,D2
080000EE  FFFF      
080000F0  6F10       184          ble.s     SequentialBlockWrite_6
                     185   ; overflowEndAddress = endAddress - 0x20000;
080000F2  2002       186          move.l    D2,D0
080000F4  0480 0002  187          sub.l     #131072,D0
080000F8  0000      
080000FA  2600       188          move.l    D0,D3
                     189   ; endAddress = 0x1FFFF;
080000FC  243C 0001  190          move.l    #131071,D2
08000100  FFFF      
                     191   SequentialBlockWrite_6:
                     192   ; }
                     193   ; printf("Performing Sequential Block Write to EEPROM\r\n");
08000102  4879 0800  194          pea       @m68kus~1_3.L
08000106  1D38      
08000108  4E92       195          jsr       (A2)
0800010A  584F       196          addq.w    #4,A7
                     197   ; initiateWriteSequence(address);
0800010C  2F04       198          move.l    D4,-(A7)
0800010E  4EB9 0800  199          jsr       _initiateWriteSequence
08000112  02DA      
08000114  584F       200          addq.w    #4,A7
                     201   ; UtilSequentialBlockWrite(address, endAddress, payloadByte);
08000116  122E 0013  202          move.b    19(A6),D1
0800011A  4881       203          ext.w     D1
0800011C  48C1       204          ext.l     D1
0800011E  2F01       205          move.l    D1,-(A7)
08000120  2F02       206          move.l    D2,-(A7)
08000122  2F04       207          move.l    D4,-(A7)
08000124  4EB9 0800  208          jsr       _UtilSequentialBlockWrite
08000128  0166      
0800012A  DEFC 000C  209          add.w     #12,A7
                     210   ; if (overflowEndAddress){
0800012E  4A83       211          tst.l     D3
08000130  6722       212          beq.s     SequentialBlockWrite_8
                     213   ; initiateWriteSequence(0x00000);
08000132  42A7       214          clr.l     -(A7)
08000134  4EB9 0800  215          jsr       _initiateWriteSequence
08000138  02DA      
0800013A  584F       216          addq.w    #4,A7
                     217   ; UtilSequentialBlockWrite(0x00000, overflowEndAddress, payloadByte);
0800013C  122E 0013  218          move.b    19(A6),D1
08000140  4881       219          ext.w     D1
08000142  48C1       220          ext.l     D1
08000144  2F01       221          move.l    D1,-(A7)
08000146  2F03       222          move.l    D3,-(A7)
08000148  42A7       223          clr.l     -(A7)
0800014A  4EB9 0800  224          jsr       _UtilSequentialBlockWrite
0800014E  0166      
08000150  DEFC 000C  225          add.w     #12,A7
                     226   SequentialBlockWrite_8:
                     227   ; }
                     228   ; printf("Sequential Block Write Completed!\r\n\r\n");
08000154  4879 0800  229          pea       @m68kus~1_4.L
08000158  1D66      
0800015A  4E92       230          jsr       (A2)
0800015C  584F       231          addq.w    #4,A7
                     232   ; return;
                     233   SequentialBlockWrite_3:
0800015E  4CDF 041C  234          movem.l   (A7)+,D2/D3/D4/A2
08000162  4E5E       235          unlk      A6
08000164  4E75       236          rts
                     237   ; }
                     238   ; /*********************************************************************************************
                     239   ; **  Write Sequential Block to EEPROM Chip -- Utility
                     240   ; *********************************************************************************************/
                     241   ; void UtilSequentialBlockWrite(long address, long endAddress, char payloadByte){
                     242   _UtilSequentialBlockWrite:
08000166  4E56 0000  243          link      A6,#0
0800016A  2F02       244          move.l    D2,-(A7)
0800016C  242E 0008  245          move.l    8(A6),D2
                     246   ; while (address <= endAddress){
                     247   UtilSequentialBlockWrite_1:
08000170  B4AE 000C  248          cmp.l     12(A6),D2
08000174  6E00 0082  249          bgt       UtilSequentialBlockWrite_3
                     250   ; if (address%128 != 0 || address == 0){
08000178  2F02       251          move.l    D2,-(A7)
0800017A  4878 0080  252          pea       128
0800017E  4EB9 0800  253          jsr       LDIV
08000182  086C      
08000184  202F 0004  254          move.l    4(A7),D0
08000188  504F       255          addq.w    #8,A7
0800018A  4A80       256          tst.l     D0
0800018C  6604       257          bne.s     UtilSequentialBlockWrite_6
0800018E  4A82       258          tst.l     D2
08000190  6632       259          bne.s     UtilSequentialBlockWrite_4
                     260   UtilSequentialBlockWrite_6:
                     261   ; // Fill up a 128 byte block
                     262   ; TXR = payloadByte;        
08000192  13EE 0013  263          move.b    19(A6),4227078
08000196  0040 8006 
                     264   ; CR = Write;
0800019A  13FC 0010  265          move.b    #16,4227080
0800019E  0040 8008 
                     266   ; WaitForTXByte();
080001A2  4EB9 0800  267          jsr       _WaitForTXByte
080001A6  078C      
                     268   ; if(!CheckForACK())
080001A8  4EB9 0800  269          jsr       _CheckForACK
080001AC  07B2      
080001AE  4A80       270          tst.l     D0
080001B0  6610       271          bne.s     UtilSequentialBlockWrite_7
                     272   ; printf("UtilSequentialBlockWrite: No ACK returned for byte at 0x%X\r\n", address);
080001B2  2F02       273          move.l    D2,-(A7)
080001B4  4879 0800  274          pea       @m68kus~1_5.L
080001B8  1D8C      
080001BA  4EB9 0800  275          jsr       _printf
080001BE  123C      
080001C0  504F       276          addq.w    #8,A7
                     277   UtilSequentialBlockWrite_7:
080001C2  602E       278          bra.s     UtilSequentialBlockWrite_5
                     279   UtilSequentialBlockWrite_4:
                     280   ; } else {    
                     281   ; // Need to write in next 128 Byte block
                     282   ; CR = stop;
080001C4  13FC 0040  283          move.b    #64,4227080
080001C8  0040 8008 
                     284   ; WaitForWriteCycle();
080001CC  4EB9 0800  285          jsr       _WaitForWriteCycle
080001D0  0392      
                     286   ; initiateWriteSequence(address);
080001D2  2F02       287          move.l    D2,-(A7)
080001D4  4EB9 0800  288          jsr       _initiateWriteSequence
080001D8  02DA      
080001DA  584F       289          addq.w    #4,A7
                     290   ; // Write 1st Byte in new block
                     291   ; TXR = payloadByte;        
080001DC  13EE 0013  292          move.b    19(A6),4227078
080001E0  0040 8006 
                     293   ; CR = Write;
080001E4  13FC 0010  294          move.b    #16,4227080
080001E8  0040 8008 
                     295   ; WaitForTXByte();
080001EC  4EB9 0800  296          jsr       _WaitForTXByte
080001F0  078C      
                     297   UtilSequentialBlockWrite_5:
                     298   ; }
                     299   ; address ++;
080001F2  5282       300          addq.l    #1,D2
080001F4  6000 FF7A  301          bra       UtilSequentialBlockWrite_1
                     302   UtilSequentialBlockWrite_3:
                     303   ; }
                     304   ; CR = stop;
080001F8  13FC 0040  305          move.b    #64,4227080
080001FC  0040 8008 
                     306   ; WaitForWriteCycle();
08000200  4EB9 0800  307          jsr       _WaitForWriteCycle
08000204  0392      
08000206  241F       308          move.l    (A7)+,D2
08000208  4E5E       309          unlk      A6
0800020A  4E75       310          rts
                     311   ; }
                     312   ; /*********************************************************************************************
                     313   ; **  Write Page to EEPROM Chip
                     314   ; *********************************************************************************************/
                     315   ; void WritePageToChip(void){
                     316   _WritePageToChip:
0800020C  2F02       317          move.l    D2,-(A7)
                     318   ; int i = 0;
0800020E  4282       319          clr.l     D2
                     320   ; printf("Writing Page to EEPROM\r\n");
08000210  4879 0800  321          pea       @m68kus~1_6.L
08000214  1DCA      
08000216  4EB9 0800  322          jsr       _printf
0800021A  123C      
0800021C  584F       323          addq.w    #4,A7
                     324   ; initiateWriteSequence(0x12000);
0800021E  4879 0001  325          pea       73728
08000222  2000      
08000224  4EB9 0800  326          jsr       _initiateWriteSequence
08000228  02DA      
0800022A  584F       327          addq.w    #4,A7
                     328   ; for(i=0; i<128; i++){
0800022C  4282       329          clr.l     D2
                     330   WritePageToChip_1:
0800022E  0C82 0000  331          cmp.l     #128,D2
08000232  0080      
08000234  6C32       332          bge.s     WritePageToChip_3
                     333   ; TXR = i;            // send 1 byte of data
08000236  13C2 0040  334          move.b    D2,4227078
0800023A  8006      
                     335   ; CR = Write;
0800023C  13FC 0010  336          move.b    #16,4227080
08000240  0040 8008 
                     337   ; WaitForTXByte();
08000244  4EB9 0800  338          jsr       _WaitForTXByte
08000248  078C      
                     339   ; if(!CheckForACK())
0800024A  4EB9 0800  340          jsr       _CheckForACK
0800024E  07B2      
08000250  4A80       341          tst.l     D0
08000252  6610       342          bne.s     WritePageToChip_4
                     343   ; printf("No ACK returned for byte #%d\r\n", i);
08000254  2F02       344          move.l    D2,-(A7)
08000256  4879 0800  345          pea       @m68kus~1_7.L
0800025A  1DE4      
0800025C  4EB9 0800  346          jsr       _printf
08000260  123C      
08000262  504F       347          addq.w    #8,A7
                     348   WritePageToChip_4:
08000264  5282       349          addq.l    #1,D2
08000266  60C6       350          bra       WritePageToChip_1
                     351   WritePageToChip_3:
                     352   ; }
                     353   ; CR = stop;
08000268  13FC 0040  354          move.b    #64,4227080
0800026C  0040 8008 
                     355   ; WaitForWriteCycle();
08000270  4EB9 0800  356          jsr       _WaitForWriteCycle
08000274  0392      
08000276  241F       357          move.l    (A7)+,D2
08000278  4E75       358          rts
                     359   ; }
                     360   ; /*********************************************************************************************
                     361   ; **  Write Byte to EEPROM Chip
                     362   ; *********************************************************************************************/
                     363   ; void WriteByteToChip(char c){
                     364   _WriteByteToChip:
0800027A  4E56 0000  365          link      A6,#0
                     366   ; printf("Writing Byte to EEPROM\r\n");
0800027E  4879 0800  367          pea       @m68kus~1_8.L
08000282  1E04      
08000284  4EB9 0800  368          jsr       _printf
08000288  123C      
0800028A  584F       369          addq.w    #4,A7
                     370   ; initiateWriteSequence(0x1F000);
0800028C  4879 0001  371          pea       126976
08000290  F000      
08000292  4EB9 0800  372          jsr       _initiateWriteSequence
08000296  02DA      
08000298  584F       373          addq.w    #4,A7
                     374   ; TXR = c;            // send 1 byte of data
0800029A  13EE 000B  375          move.b    11(A6),4227078
0800029E  0040 8006 
                     376   ; CR = Write;
080002A2  13FC 0010  377          move.b    #16,4227080
080002A6  0040 8008 
                     378   ; WaitForTXByte();
080002AA  4EB9 0800  379          jsr       _WaitForTXByte
080002AE  078C      
                     380   ; if(!CheckForACK())
080002B0  4EB9 0800  381          jsr       _CheckForACK
080002B4  07B2      
080002B6  4A80       382          tst.l     D0
080002B8  660E       383          bne.s     WriteByteToChip_1
                     384   ; printf("No ACK returned\r\n");
080002BA  4879 0800  385          pea       @m68kus~1_9.L
080002BE  1E1E      
080002C0  4EB9 0800  386          jsr       _printf
080002C4  123C      
080002C6  584F       387          addq.w    #4,A7
                     388   WriteByteToChip_1:
                     389   ; CR = stop;
080002C8  13FC 0040  390          move.b    #64,4227080
080002CC  0040 8008 
                     391   ; WaitForWriteCycle();
080002D0  4EB9 0800  392          jsr       _WaitForWriteCycle
080002D4  0392      
080002D6  4E5E       393          unlk      A6
080002D8  4E75       394          rts
                     395   ; }
                     396   ; /*********************************************************************************************
                     397   ; **  Write Page to EEPROM Chip
                     398   ; *********************************************************************************************/
                     399   ; void initiateWriteSequence(long address){
                     400   _initiateWriteSequence:
080002DA  4E56 FFFC  401          link      A6,#-4
080002DE  48E7 2038  402          movem.l   D2/A2/A3/A4,-(A7)
080002E2  45F9 0800  403          lea       _WaitForTXByte.L,A2
080002E6  078C      
080002E8  47F9 0800  404          lea       _printf.L,A3
080002EC  123C      
080002EE  49F9 0800  405          lea       _CheckForACK.L,A4
080002F2  07B2      
080002F4  242E 0008  406          move.l    8(A6),D2
                     407   ; unsigned char writeControlByte = 0, unusedControlByte = 0;
080002F8  422E FFFE  408          clr.b     -2(A6)
080002FC  422E FFFF  409          clr.b     -1(A6)
                     410   ; BlockDecode(&writeControlByte, &unusedControlByte, address);
08000300  2F02       411          move.l    D2,-(A7)
08000302  486E FFFF  412          pea       -1(A6)
08000306  486E FFFE  413          pea       -2(A6)
0800030A  4EB9 0800  414          jsr       _BlockDecode
0800030E  0756      
08000310  DEFC 000C  415          add.w     #12,A7
                     416   ; // Ensure TX is ready before sending control byte
                     417   ; WaitForTXByte();
08000314  4E92       418          jsr       (A2)
                     419   ; TXR = writeControlByte;     // Write Control Byte (1010 0000)
08000316  13EE FFFE  420          move.b    -2(A6),4227078
0800031A  0040 8006 
                     421   ; CR = startWrite;            // Set STA bit, set WR bit
0800031E  13FC 0090  422          move.b    #144,4227080
08000322  0040 8008 
                     423   ; WaitForTXByte();
08000326  4E92       424          jsr       (A2)
                     425   ; if(!CheckForACK())
08000328  4E94       426          jsr       (A4)
0800032A  4A80       427          tst.l     D0
0800032C  660A       428          bne.s     initiateWriteSequence_1
                     429   ; printf("No ACK returned\r\n");
0800032E  4879 0800  430          pea       @m68kus~1_9.L
08000332  1E1E      
08000334  4E93       431          jsr       (A3)
08000336  584F       432          addq.w    #4,A7
                     433   initiateWriteSequence_1:
                     434   ; TXR = (address >> 8) & 0xFF;    // Address Byte 1
08000338  2002       435          move.l    D2,D0
0800033A  E080       436          asr.l     #8,D0
0800033C  C0BC 0000  437          and.l     #255,D0
08000340  00FF      
08000342  13C0 0040  438          move.b    D0,4227078
08000346  8006      
                     439   ; CR = Write;                 // Set WR bit
08000348  13FC 0010  440          move.b    #16,4227080
0800034C  0040 8008 
                     441   ; WaitForTXByte();
08000350  4E92       442          jsr       (A2)
                     443   ; if(!CheckForACK())
08000352  4E94       444          jsr       (A4)
08000354  4A80       445          tst.l     D0
08000356  660A       446          bne.s     initiateWriteSequence_3
                     447   ; printf("No ACK returned\r\n");
08000358  4879 0800  448          pea       @m68kus~1_9.L
0800035C  1E1E      
0800035E  4E93       449          jsr       (A3)
08000360  584F       450          addq.w    #4,A7
                     451   initiateWriteSequence_3:
                     452   ; TXR = address & 0xFF;       // Address Byte 2
08000362  2002       453          move.l    D2,D0
08000364  C0BC 0000  454          and.l     #255,D0
08000368  00FF      
0800036A  13C0 0040  455          move.b    D0,4227078
0800036E  8006      
                     456   ; CR = Write;                 // Set WR bit
08000370  13FC 0010  457          move.b    #16,4227080
08000374  0040 8008 
                     458   ; WaitForTXByte();
08000378  4E92       459          jsr       (A2)
                     460   ; if(!CheckForACK())
0800037A  4E94       461          jsr       (A4)
0800037C  4A80       462          tst.l     D0
0800037E  660A       463          bne.s     initiateWriteSequence_5
                     464   ; printf("No ACK returned\r\n");
08000380  4879 0800  465          pea       @m68kus~1_9.L
08000384  1E1E      
08000386  4E93       466          jsr       (A3)
08000388  584F       467          addq.w    #4,A7
                     468   initiateWriteSequence_5:
                     469   ; return;
0800038A  4CDF 1C04  470          movem.l   (A7)+,D2/A2/A3/A4
0800038E  4E5E       471          unlk      A6
08000390  4E75       472          rts
                     473   ; }
                     474   ; /*********************************************************************************************
                     475   ; ** Wait For EEPROM to complete internal Write Cycle
                     476   ; *********************************************************************************************/
                     477   ; void WaitForWriteCycle(void){
                     478   _WaitForWriteCycle:
                     479   ; do
                     480   ; {
                     481   WaitForWriteCycle_1:
                     482   ; TXR = 0xA0; // Write Control Byte (1010 0000)
08000392  13FC 00A0  483          move.b    #160,4227078
08000396  0040 8006 
                     484   ; CR = start;
0800039A  13FC 0080  485          move.b    #128,4227080
0800039E  0040 8008 
                     486   ; printf("Waiting for Internal Write!\r\n");
080003A2  4879 0800  487          pea       @m68kus~1_10.L
080003A6  1E30      
080003A8  4EB9 0800  488          jsr       _printf
080003AC  123C      
080003AE  584F       489          addq.w    #4,A7
080003B0  41F9 0800  490          lea       _CheckForACK.L,A0
080003B4  07B2      
080003B6  2008       491          move.l    A0,D0
080003B8  67D8       492          beq       WaitForWriteCycle_1
                     493   ; } while (!CheckForACK);
                     494   ; printf("Internal Write Complete!\r\n");
080003BA  4879 0800  495          pea       @m68kus~1_11.L
080003BE  1E4E      
080003C0  4EB9 0800  496          jsr       _printf
080003C4  123C      
080003C6  584F       497          addq.w    #4,A7
                     498   ; return;
080003C8  4E75       499          rts
                     500   ; }
                     501   ; /*********************************************************************************************
                     502   ; **  Read Block from EEPROM flash
                     503   ; *********************************************************************************************/
                     504   ; void SequentialBlockRead(long address, long sizeOfBlock, char expectedByte){
                     505   _SequentialBlockRead:
080003CA  4E56 0000  506          link      A6,#0
080003CE  48E7 3820  507          movem.l   D2/D3/D4/A2,-(A7)
080003D2  45F9 0800  508          lea       _printf.L,A2
080003D6  123C      
080003D8  282E 0008  509          move.l    8(A6),D4
                     510   ; long endAddress = (address + sizeOfBlock) - 1;
080003DC  2004       511          move.l    D4,D0
080003DE  D0AE 000C  512          add.l     12(A6),D0
080003E2  5380       513          subq.l    #1,D0
080003E4  2400       514          move.l    D0,D2
                     515   ; long overflowEndAddress = 0;
080003E6  4283       516          clr.l     D3
                     517   ; // Safety check
                     518   ; if (sizeOfBlock > 0x1FFFF){
080003E8  202E 000C  519          move.l    12(A6),D0
080003EC  0C80 0001  520          cmp.l     #131071,D0
080003F0  FFFF      
080003F2  6F0E       521          ble.s     SequentialBlockRead_1
                     522   ; printf("SequentialBlockRead: Size of Input Data Block cannot exceed 128kBytes\r\n");
080003F4  4879 0800  523          pea       @m68kus~1_12.L
080003F8  1E6A      
080003FA  4E92       524          jsr       (A2)
080003FC  584F       525          addq.w    #4,A7
                     526   ; return;
080003FE  6000 00B0  527          bra       SequentialBlockRead_3
                     528   SequentialBlockRead_1:
                     529   ; }
                     530   ; if (address > 0x1FFFF){
08000402  0C84 0001  531          cmp.l     #131071,D4
08000406  FFFF      
08000408  6F0E       532          ble.s     SequentialBlockRead_4
                     533   ; printf("SequentialBlockRead: Entered Address Out of Range\r\n");
0800040A  4879 0800  534          pea       @m68kus~1_13.L
0800040E  1EB2      
08000410  4E92       535          jsr       (A2)
08000412  584F       536          addq.w    #4,A7
                     537   ; return;
08000414  6000 009A  538          bra       SequentialBlockRead_3
                     539   SequentialBlockRead_4:
                     540   ; }
                     541   ; // Wrap-Around check
                     542   ; if (endAddress > 0x1FFFF){
08000418  0C82 0001  543          cmp.l     #131071,D2
0800041C  FFFF      
0800041E  6F10       544          ble.s     SequentialBlockRead_6
                     545   ; overflowEndAddress = endAddress - 0x20000;
08000420  2002       546          move.l    D2,D0
08000422  0480 0002  547          sub.l     #131072,D0
08000426  0000      
08000428  2600       548          move.l    D0,D3
                     549   ; endAddress = 0x1FFFF;
0800042A  243C 0001  550          move.l    #131071,D2
0800042E  FFFF      
                     551   SequentialBlockRead_6:
                     552   ; }
                     553   ; printf("Starting Sequential Block Read...\r\n");
08000430  4879 0800  554          pea       @m68kus~1_14.L
08000434  1EE6      
08000436  4E92       555          jsr       (A2)
08000438  584F       556          addq.w    #4,A7
                     557   ; initiateReadSequence(address);
0800043A  2F04       558          move.l    D4,-(A7)
0800043C  4EB9 0800  559          jsr       _initiateReadSequence
08000440  067C      
08000442  584F       560          addq.w    #4,A7
                     561   ; if(!utilSequentialBlockRead(address, endAddress, expectedByte)){
08000444  122E 0013  562          move.b    19(A6),D1
08000448  4881       563          ext.w     D1
0800044A  48C1       564          ext.l     D1
0800044C  2F01       565          move.l    D1,-(A7)
0800044E  2F02       566          move.l    D2,-(A7)
08000450  2F04       567          move.l    D4,-(A7)
08000452  4EB9 0800  568          jsr       _utilSequentialBlockRead
08000456  04B8      
08000458  DEFC 000C  569          add.w     #12,A7
0800045C  4A80       570          tst.l     D0
0800045E  660E       571          bne.s     SequentialBlockRead_8
                     572   ; printf("Sequential Block Read Failed!\r\n");
08000460  4879 0800  573          pea       @m68kus~1_15.L
08000464  1F0A      
08000466  4E92       574          jsr       (A2)
08000468  584F       575          addq.w    #4,A7
                     576   ; return;
0800046A  6000 0044  577          bra       SequentialBlockRead_3
                     578   SequentialBlockRead_8:
                     579   ; }
                     580   ; if (overflowEndAddress){
0800046E  4A83       581          tst.l     D3
08000470  6700 0034  582          beq       SequentialBlockRead_12
                     583   ; initiateReadSequence(0x00000);
08000474  42A7       584          clr.l     -(A7)
08000476  4EB9 0800  585          jsr       _initiateReadSequence
0800047A  067C      
0800047C  584F       586          addq.w    #4,A7
                     587   ; if(!utilSequentialBlockRead(0x00000, overflowEndAddress, expectedByte)){
0800047E  122E 0013  588          move.b    19(A6),D1
08000482  4881       589          ext.w     D1
08000484  48C1       590          ext.l     D1
08000486  2F01       591          move.l    D1,-(A7)
08000488  2F03       592          move.l    D3,-(A7)
0800048A  42A7       593          clr.l     -(A7)
0800048C  4EB9 0800  594          jsr       _utilSequentialBlockRead
08000490  04B8      
08000492  DEFC 000C  595          add.w     #12,A7
08000496  4A80       596          tst.l     D0
08000498  660C       597          bne.s     SequentialBlockRead_12
                     598   ; printf("Sequential Block Read Failed!\r\n");
0800049A  4879 0800  599          pea       @m68kus~1_15.L
0800049E  1F0A      
080004A0  4E92       600          jsr       (A2)
080004A2  584F       601          addq.w    #4,A7
                     602   ; return;
080004A4  600A       603          bra.s     SequentialBlockRead_3
                     604   SequentialBlockRead_12:
                     605   ; }
                     606   ; }
                     607   ; printf("Sequential Block Read successful!\r\n");
080004A6  4879 0800  608          pea       @m68kus~1_16.L
080004AA  1F2A      
080004AC  4E92       609          jsr       (A2)
080004AE  584F       610          addq.w    #4,A7
                     611   SequentialBlockRead_3:
080004B0  4CDF 041C  612          movem.l   (A7)+,D2/D3/D4/A2
080004B4  4E5E       613          unlk      A6
080004B6  4E75       614          rts
                     615   ; }
                     616   ; int utilSequentialBlockRead(long utilAddress, long utilEndAddress, char expectedByte){
                     617   _utilSequentialBlockRead:
080004B8  4E56 FFFC  618          link      A6,#-4
080004BC  48E7 3000  619          movem.l   D2/D3,-(A7)
080004C0  242E 0008  620          move.l    8(A6),D2
080004C4  262E 000C  621          move.l    12(A6),D3
                     622   ; char receivedByte;
                     623   ; while (utilAddress <= utilEndAddress){
                     624   utilSequentialBlockRead_1:
080004C8  B483       625          cmp.l     D3,D2
080004CA  6E00 009E  626          bgt       utilSequentialBlockRead_3
                     627   ; if (utilAddress == utilEndAddress || utilAddress == 0x0FFFF)
080004CE  B483       628          cmp.l     D3,D2
080004D0  6708       629          beq.s     utilSequentialBlockRead_6
080004D2  0C82 0000  630          cmp.l     #65535,D2
080004D6  FFFF      
080004D8  660A       631          bne.s     utilSequentialBlockRead_4
                     632   utilSequentialBlockRead_6:
                     633   ; CR = ReadNACKIACK;
080004DA  13FC 0029  634          move.b    #41,4227080
080004DE  0040 8008 
080004E2  6008       635          bra.s     utilSequentialBlockRead_5
                     636   utilSequentialBlockRead_4:
                     637   ; else CR = ReadIACK;
080004E4  13FC 0021  638          move.b    #33,4227080
080004E8  0040 8008 
                     639   utilSequentialBlockRead_5:
                     640   ; WaitForReceivedByte();
080004EC  4EB9 0800  641          jsr       _WaitForReceivedByte
080004F0  07A2      
                     642   ; receivedByte = RXR;
080004F2  1D79 0040  643          move.b    4227078,-1(A6)
080004F6  8006 FFFF 
                     644   ; if ((utilAddress != utilEndAddress && utilAddress != 0xFFFF) && !CheckForACK())
080004FA  B483       645          cmp.l     D3,D2
080004FC  6722       646          beq.s     utilSequentialBlockRead_7
080004FE  0C82 0000  647          cmp.l     #65535,D2
08000502  FFFF      
08000504  671A       648          beq.s     utilSequentialBlockRead_7
08000506  4EB9 0800  649          jsr       _CheckForACK
0800050A  07B2      
0800050C  4A80       650          tst.l     D0
0800050E  6610       651          bne.s     utilSequentialBlockRead_7
                     652   ; printf("No ACK returned for read at address: 0x%X\r\n", utilAddress);
08000510  2F02       653          move.l    D2,-(A7)
08000512  4879 0800  654          pea       @m68kus~1_17.L
08000516  1F4E      
08000518  4EB9 0800  655          jsr       _printf
0800051C  123C      
0800051E  504F       656          addq.w    #8,A7
                     657   utilSequentialBlockRead_7:
                     658   ; if (receivedByte != expectedByte){
08000520  102E FFFF  659          move.b    -1(A6),D0
08000524  B02E 0013  660          cmp.b     19(A6),D0
08000528  671C       661          beq.s     utilSequentialBlockRead_9
                     662   ; printf("Sequential Read Error at address: 0x%X\r\n", utilAddress);
0800052A  2F02       663          move.l    D2,-(A7)
0800052C  4879 0800  664          pea       @m68kus~1_18.L
08000530  1F7A      
08000532  4EB9 0800  665          jsr       _printf
08000536  123C      
08000538  504F       666          addq.w    #8,A7
                     667   ; CR = stop;
0800053A  13FC 0040  668          move.b    #64,4227080
0800053E  0040 8008 
                     669   ; return 0;
08000542  4280       670          clr.l     D0
08000544  602E       671          bra.s     utilSequentialBlockRead_11
                     672   utilSequentialBlockRead_9:
                     673   ; }
                     674   ; if (utilAddress == 0x0FFFF){ // Stop and Start Read from 2nd bank
08000546  0C82 0000  675          cmp.l     #65535,D2
0800054A  FFFF      
0800054C  6616       676          bne.s     utilSequentialBlockRead_12
                     677   ; CR = stop;
0800054E  13FC 0040  678          move.b    #64,4227080
08000552  0040 8008 
                     679   ; initiateReadSequence(utilAddress+1);
08000556  2202       680          move.l    D2,D1
08000558  5281       681          addq.l    #1,D1
0800055A  2F01       682          move.l    D1,-(A7)
0800055C  4EB9 0800  683          jsr       _initiateReadSequence
08000560  067C      
08000562  584F       684          addq.w    #4,A7
                     685   utilSequentialBlockRead_12:
                     686   ; }
                     687   ; utilAddress ++;
08000564  5282       688          addq.l    #1,D2
08000566  6000 FF60  689          bra       utilSequentialBlockRead_1
                     690   utilSequentialBlockRead_3:
                     691   ; }
                     692   ; CR = stop;
0800056A  13FC 0040  693          move.b    #64,4227080
0800056E  0040 8008 
                     694   ; return 1;
08000572  7001       695          moveq     #1,D0
                     696   utilSequentialBlockRead_11:
08000574  4CDF 000C  697          movem.l   (A7)+,D2/D3
08000578  4E5E       698          unlk      A6
0800057A  4E75       699          rts
                     700   ; }
                     701   ; /*********************************************************************************************
                     702   ; **  Read Page from EEPROM flash
                     703   ; *********************************************************************************************/
                     704   ; void ReadPageFromChip(void){
                     705   _ReadPageFromChip:
0800057C  4E56 FFFC  706          link      A6,#-4
08000580  48E7 2020  707          movem.l   D2/A2,-(A7)
08000584  45F9 0800  708          lea       _printf.L,A2
08000588  123C      
                     709   ; int i = 0;
0800058A  4282       710          clr.l     D2
                     711   ; char receivedByte;
                     712   ; printf("Reading Page from EEPROM \r\n");
0800058C  4879 0800  713          pea       @m68kus~1_19.L
08000590  1FA4      
08000592  4E92       714          jsr       (A2)
08000594  584F       715          addq.w    #4,A7
                     716   ; initiateReadSequence(0x12000);
08000596  4879 0001  717          pea       73728
0800059A  2000      
0800059C  4EB9 0800  718          jsr       _initiateReadSequence
080005A0  067C      
080005A2  584F       719          addq.w    #4,A7
                     720   ; for (i=0; i<128; i++){
080005A4  4282       721          clr.l     D2
                     722   ReadPageFromChip_1:
080005A6  0C82 0000  723          cmp.l     #128,D2
080005AA  0080      
080005AC  6C00 006E  724          bge       ReadPageFromChip_3
                     725   ; if (i != 127)
080005B0  0C82 0000  726          cmp.l     #127,D2
080005B4  007F      
080005B6  670A       727          beq.s     ReadPageFromChip_4
                     728   ; CR = ReadIACK;
080005B8  13FC 0021  729          move.b    #33,4227080
080005BC  0040 8008 
080005C0  6008       730          bra.s     ReadPageFromChip_5
                     731   ReadPageFromChip_4:
                     732   ; else  CR = ReadNACKIACK;
080005C2  13FC 0029  733          move.b    #41,4227080
080005C6  0040 8008 
                     734   ReadPageFromChip_5:
                     735   ; WaitForReceivedByte();
080005CA  4EB9 0800  736          jsr       _WaitForReceivedByte
080005CE  07A2      
                     737   ; receivedByte = RXR;
080005D0  1D79 0040  738          move.b    4227078,-1(A6)
080005D4  8006 FFFF 
                     739   ; if (i != 127 && !CheckForACK())
080005D8  0C82 0000  740          cmp.l     #127,D2
080005DC  007F      
080005DE  6716       741          beq.s     ReadPageFromChip_6
080005E0  4EB9 0800  742          jsr       _CheckForACK
080005E4  07B2      
080005E6  4A80       743          tst.l     D0
080005E8  660C       744          bne.s     ReadPageFromChip_6
                     745   ; printf("No ACK returned for byte #%d\r\n", i);
080005EA  2F02       746          move.l    D2,-(A7)
080005EC  4879 0800  747          pea       @m68kus~1_7.L
080005F0  1DE4      
080005F2  4E92       748          jsr       (A2)
080005F4  504F       749          addq.w    #8,A7
                     750   ReadPageFromChip_6:
                     751   ; if (receivedByte != i){
080005F6  102E FFFF  752          move.b    -1(A6),D0
080005FA  4880       753          ext.w     D0
080005FC  48C0       754          ext.l     D0
080005FE  B082       755          cmp.l     D2,D0
08000600  6716       756          beq.s     ReadPageFromChip_8
                     757   ; printf("Page Read Failed at Byte #%d\r\n", i);
08000602  2F02       758          move.l    D2,-(A7)
08000604  4879 0800  759          pea       @m68kus~1_20.L
08000608  1FC0      
0800060A  4E92       760          jsr       (A2)
0800060C  504F       761          addq.w    #8,A7
                     762   ; CR = stop;
0800060E  13FC 0040  763          move.b    #64,4227080
08000612  0040 8008 
                     764   ; return;
08000616  6016       765          bra.s     ReadPageFromChip_10
                     766   ReadPageFromChip_8:
08000618  5282       767          addq.l    #1,D2
0800061A  608A       768          bra       ReadPageFromChip_1
                     769   ReadPageFromChip_3:
                     770   ; }
                     771   ; }
                     772   ; CR = stop;
0800061C  13FC 0040  773          move.b    #64,4227080
08000620  0040 8008 
                     774   ; printf("Page Read Successful\r\n");
08000624  4879 0800  775          pea       @m68kus~1_21.L
08000628  1FE0      
0800062A  4E92       776          jsr       (A2)
0800062C  584F       777          addq.w    #4,A7
                     778   ReadPageFromChip_10:
0800062E  4CDF 0404  779          movem.l   (A7)+,D2/A2
08000632  4E5E       780          unlk      A6
08000634  4E75       781          rts
                     782   ; }
                     783   ; /*********************************************************************************************
                     784   ; **  Read Byte from EEPROM flash
                     785   ; *********************************************************************************************/
                     786   ; char ReadByteFromChip(void){
                     787   _ReadByteFromChip:
08000636  4E56 FFFC  788          link      A6,#-4
                     789   ; char receivedByte;
                     790   ; printf("Reading Byte from EEPROM \r\n");
0800063A  4879 0800  791          pea       @m68kus~1_22.L
0800063E  1FF8      
08000640  4EB9 0800  792          jsr       _printf
08000644  123C      
08000646  584F       793          addq.w    #4,A7
                     794   ; initiateReadSequence(0x1F000);
08000648  4879 0001  795          pea       126976
0800064C  F000      
0800064E  4EB9 0800  796          jsr       _initiateReadSequence
08000652  067C      
08000654  584F       797          addq.w    #4,A7
                     798   ; CR = ReadNACKIACK;
08000656  13FC 0029  799          move.b    #41,4227080
0800065A  0040 8008 
                     800   ; WaitForReceivedByte();
0800065E  4EB9 0800  801          jsr       _WaitForReceivedByte
08000662  07A2      
                     802   ; receivedByte = RXR;
08000664  1D79 0040  803          move.b    4227078,-1(A6)
08000668  8006 FFFF 
                     804   ; CR = stop;
0800066C  13FC 0040  805          move.b    #64,4227080
08000670  0040 8008 
                     806   ; return receivedByte;
08000674  102E FFFF  807          move.b    -1(A6),D0
08000678  4E5E       808          unlk      A6
0800067A  4E75       809          rts
                     810   ; }
                     811   ; /*********************************************************************************************
                     812   ; **  Initiate Read Command to EEPROM
                     813   ; *********************************************************************************************/
                     814   ; void initiateReadSequence(long address){
                     815   _initiateReadSequence:
0800067C  4E56 FFFC  816          link      A6,#-4
08000680  48E7 2038  817          movem.l   D2/A2/A3/A4,-(A7)
08000684  45F9 0800  818          lea       _WaitForTXByte.L,A2
08000688  078C      
0800068A  47F9 0800  819          lea       _printf.L,A3
0800068E  123C      
08000690  49F9 0800  820          lea       _CheckForACK.L,A4
08000694  07B2      
08000696  242E 0008  821          move.l    8(A6),D2
                     822   ; unsigned char writeControlByte = 0, readControlByte = 0;
0800069A  422E FFFE  823          clr.b     -2(A6)
0800069E  422E FFFF  824          clr.b     -1(A6)
                     825   ; // Decode Address to determine bank
                     826   ; BlockDecode(&writeControlByte, &readControlByte, address);
080006A2  2F02       827          move.l    D2,-(A7)
080006A4  486E FFFF  828          pea       -1(A6)
080006A8  486E FFFE  829          pea       -2(A6)
080006AC  4EB9 0800  830          jsr       _BlockDecode
080006B0  0756      
080006B2  DEFC 000C  831          add.w     #12,A7
                     832   ; // Ensure TX is ready before transmission
                     833   ; WaitForTXByte();
080006B6  4E92       834          jsr       (A2)
                     835   ; TXR = writeControlByte;         // Write Control Byte
080006B8  13EE FFFE  836          move.b    -2(A6),4227078
080006BC  0040 8006 
                     837   ; CR = startWrite;                // set STA bit
080006C0  13FC 0090  838          move.b    #144,4227080
080006C4  0040 8008 
                     839   ; WaitForTXByte();
080006C8  4E92       840          jsr       (A2)
                     841   ; if(!CheckForACK())
080006CA  4E94       842          jsr       (A4)
080006CC  4A80       843          tst.l     D0
080006CE  660A       844          bne.s     initiateReadSequence_1
                     845   ; printf("No ACK returned\r\n");
080006D0  4879 0800  846          pea       @m68kus~1_9.L
080006D4  1E1E      
080006D6  4E93       847          jsr       (A3)
080006D8  584F       848          addq.w    #4,A7
                     849   initiateReadSequence_1:
                     850   ; TXR = (address >> 8) & 0xFF;    // Address Byte 1
080006DA  2002       851          move.l    D2,D0
080006DC  E080       852          asr.l     #8,D0
080006DE  C0BC 0000  853          and.l     #255,D0
080006E2  00FF      
080006E4  13C0 0040  854          move.b    D0,4227078
080006E8  8006      
                     855   ; CR = Write;                     // set WR bit
080006EA  13FC 0010  856          move.b    #16,4227080
080006EE  0040 8008 
                     857   ; WaitForTXByte();
080006F2  4E92       858          jsr       (A2)
                     859   ; if(!CheckForACK())
080006F4  4E94       860          jsr       (A4)
080006F6  4A80       861          tst.l     D0
080006F8  660A       862          bne.s     initiateReadSequence_3
                     863   ; printf("No ACK returned\r\n");
080006FA  4879 0800  864          pea       @m68kus~1_9.L
080006FE  1E1E      
08000700  4E93       865          jsr       (A3)
08000702  584F       866          addq.w    #4,A7
                     867   initiateReadSequence_3:
                     868   ; TXR = address & 0xFF;           // Address Byte 2
08000704  2002       869          move.l    D2,D0
08000706  C0BC 0000  870          and.l     #255,D0
0800070A  00FF      
0800070C  13C0 0040  871          move.b    D0,4227078
08000710  8006      
                     872   ; CR = Write;                     // set WR bit
08000712  13FC 0010  873          move.b    #16,4227080
08000716  0040 8008 
                     874   ; WaitForTXByte();
0800071A  4E92       875          jsr       (A2)
                     876   ; if(!CheckForACK())
0800071C  4E94       877          jsr       (A4)
0800071E  4A80       878          tst.l     D0
08000720  660A       879          bne.s     initiateReadSequence_5
                     880   ; printf("No ACK returned\r\n");
08000722  4879 0800  881          pea       @m68kus~1_9.L
08000726  1E1E      
08000728  4E93       882          jsr       (A3)
0800072A  584F       883          addq.w    #4,A7
                     884   initiateReadSequence_5:
                     885   ; TXR = readControlByte;          // Read Control Byte
0800072C  13EE FFFF  886          move.b    -1(A6),4227078
08000730  0040 8006 
                     887   ; CR = startWrite;                // Set STA bit, WR bit
08000734  13FC 0090  888          move.b    #144,4227080
08000738  0040 8008 
                     889   ; WaitForTXByte();
0800073C  4E92       890          jsr       (A2)
                     891   ; if(!CheckForACK())
0800073E  4E94       892          jsr       (A4)
08000740  4A80       893          tst.l     D0
08000742  660A       894          bne.s     initiateReadSequence_7
                     895   ; printf("No ACK returned\r\n");
08000744  4879 0800  896          pea       @m68kus~1_9.L
08000748  1E1E      
0800074A  4E93       897          jsr       (A3)
0800074C  584F       898          addq.w    #4,A7
                     899   initiateReadSequence_7:
0800074E  4CDF 1C04  900          movem.l   (A7)+,D2/A2/A3/A4
08000752  4E5E       901          unlk      A6
08000754  4E75       902          rts
                     903   ; }
                     904   ; /*********************************************************************************************
                     905   ; **  Decode Bank from address
                     906   ; *********************************************************************************************/
                     907   ; void BlockDecode(char * writeControlByte, char * readControlByte, long address){
                     908   _BlockDecode:
08000756  4E56 FFFC  909          link      A6,#-4
                     910   ; char bank;
                     911   ; // Block Decoder
                     912   ; if (address < 0x10000){
0800075A  202E 0010  913          move.l    16(A6),D0
0800075E  0C80 0001  914          cmp.l     #65536,D0
08000762  0000      
08000764  6C12       915          bge.s     BlockDecode_1
                     916   ; *writeControlByte = 0xA0;
08000766  206E 0008  917          move.l    8(A6),A0
0800076A  10BC 00A0  918          move.b    #160,(A0)
                     919   ; *readControlByte = 0xA1;
0800076E  206E 000C  920          move.l    12(A6),A0
08000772  10BC 00A1  921          move.b    #161,(A0)
08000776  6010       922          bra.s     BlockDecode_2
                     923   BlockDecode_1:
                     924   ; }
                     925   ; else {
                     926   ; *writeControlByte = 0xA8;
08000778  206E 0008  927          move.l    8(A6),A0
0800077C  10BC 00A8  928          move.b    #168,(A0)
                     929   ; *readControlByte = 0xA9;
08000780  206E 000C  930          move.l    12(A6),A0
08000784  10BC 00A9  931          move.b    #169,(A0)
                     932   BlockDecode_2:
08000788  4E5E       933          unlk      A6
0800078A  4E75       934          rts
                     935   ; }
                     936   ; }
                     937   ; /*********************************************************************************************
                     938   ; ** Probe SR register to check if TIP bit is clear
                     939   ; *********************************************************************************************/
                     940   ; void WaitForTXByte(void){
                     941   _WaitForTXByte:
                     942   ; while ((SR & 0x02) >> 1 == 1);
                     943   WaitForTXByte_1:
0800078C  1039 0040  944          move.b    4227080,D0
08000790  8008      
08000792  C03C 0002  945          and.b     #2,D0
08000796  E208       946          lsr.b     #1,D0
08000798  0C00 0001  947          cmp.b     #1,D0
0800079C  6602       948          bne.s     WaitForTXByte_3
0800079E  60EC       949          bra       WaitForTXByte_1
                     950   WaitForTXByte_3:
080007A0  4E75       951          rts
                     952   ; }
                     953   ; /*********************************************************************************************
                     954   ; ** Probe RX register to check if it has received data from slave
                     955   ; *********************************************************************************************/
                     956   ; void WaitForReceivedByte(void){
                     957   _WaitForReceivedByte:
                     958   ; while ((SR & 0x01) == 0);
                     959   WaitForReceivedByte_1:
080007A2  1039 0040  960          move.b    4227080,D0
080007A6  8008      
080007A8  C03C 0001  961          and.b     #1,D0
080007AC  6602       962          bne.s     WaitForReceivedByte_3
080007AE  60F2       963          bra       WaitForReceivedByte_1
                     964   WaitForReceivedByte_3:
080007B0  4E75       965          rts
                     966   ; }
                     967   ; /*********************************************************************************************
                     968   ; ** Probe Status Register to check if slave has ACKed
                     969   ; Returns 0 of not ACKed and 1 if ACKed
                     970   ; *********************************************************************************************/
                     971   ; int CheckForACK(void){
                     972   _CheckForACK:
                     973   ; if ((SR & 0x80)>> 7 == 1)
080007B2  1039 0040  974          move.b    4227080,D0
080007B6  8008      
080007B8  C07C 00FF  975          and.w     #255,D0
080007BC  C07C 0080  976          and.w     #128,D0
080007C0  EE40       977          asr.w     #7,D0
080007C2  0C40 0001  978          cmp.w     #1,D0
080007C6  6604       979          bne.s     CheckForACK_1
                     980   ; return 0;
080007C8  4280       981          clr.l     D0
080007CA  6002       982          bra.s     CheckForACK_3
                     983   CheckForACK_1:
                     984   ; else return 1;
080007CC  7001       985          moveq     #1,D0
                     986   CheckForACK_3:
080007CE  4E75       987          rts
                     988   ; }
                     989   ; /*********************************************************************************************
                     990   ; ** Initialize IIC Communication
                     991   ; *********************************************************************************************/
                     992   ; void IIC_Init(void){
                     993   _IIC_Init:
                     994   ; // Set Clock Frequency to 100kHz as per page 7 of in IIC controller Document
                     995   ; CTR = 0x00; // Clear EN bit to set clock value first
080007D0  4239 0040  996          clr.b     4227076
080007D4  8004      
                     997   ; PRERlo = 0x31;
080007D6  13FC 0031  998          move.b    #49,4227072
080007DA  0040 8000 
                     999   ; PRERhi = 0x00;
080007DE  4239 0040 1000          clr.b     4227074
080007E2  8002      
                    1001   ; // Enable EN bit (core is disable) & Disable IEN bit (interrupts disable)
                    1002   ; CTR = 0x80;
080007E4  13FC 0080 1003          move.b    #128,4227076
080007E8  0040 8004 
080007EC  4E75      1004          rts
                    1005   ; }
                    1006   ; void main(void)
                    1007   ; {
                    1008   _main:
080007EE  4E56 FFFC 1009          link      A6,#-4
080007F2  48E7 2020 1010          movem.l   D2/A2,-(A7)
080007F6  45F9 0800 1011          lea       _printf.L,A2
080007FA  123C      
                    1012   ; char sendByte = 0x78;
080007FC  7478      1013          moveq     #120,D2
                    1014   ; char recievedByte;
                    1015   ; scanflush();     // flush any text that may have been typed ahead
080007FE  4EB9 0800 1016          jsr       _scanflush
08000802  0BBA      
                    1017   ; printf("\r\nHello IIC Lab\r\n\r\n");
08000804  4879 0800 1018          pea       @m68kus~1_23.L
08000808  2014      
0800080A  4E92      1019          jsr       (A2)
0800080C  584F      1020          addq.w    #4,A7
                    1021   ; IIC_Init();
0800080E  4EB9 0800 1022          jsr       _IIC_Init
08000812  07D0      
                    1023   ; SequentialBlockWrite(0x00000, 0x1FFFF, sendByte);
08000814  4882      1024          ext.w     D2
08000816  48C2      1025          ext.l     D2
08000818  2F02      1026          move.l    D2,-(A7)
0800081A  4879 0001 1027          pea       131071
0800081E  FFFF      
08000820  42A7      1028          clr.l     -(A7)
08000822  4EB9 0800 1029          jsr       _SequentialBlockWrite
08000826  0098      
08000828  DEFC 000C 1030          add.w     #12,A7
                    1031   ; SequentialBlockRead(0x00000, 0x1FFFF, sendByte);
0800082C  4882      1032          ext.w     D2
0800082E  48C2      1033          ext.l     D2
08000830  2F02      1034          move.l    D2,-(A7)
08000832  4879 0001 1035          pea       131071
08000836  FFFF      
08000838  42A7      1036          clr.l     -(A7)
0800083A  4EB9 0800 1037          jsr       _SequentialBlockRead
0800083E  03CA      
08000840  DEFC 000C 1038          add.w     #12,A7
                    1039   ; printf("\r\n");
08000844  4879 0800 1040          pea       @m68kus~1_24.L
08000848  2028      
0800084A  4E92      1041          jsr       (A2)
0800084C  584F      1042          addq.w    #4,A7
                    1043   ; // WritePageToChip();
                    1044   ; // ReadPageFromChip();
                    1045   ; printf("\r\n");
0800084E  4879 0800 1046          pea       @m68kus~1_24.L
08000852  2028      
08000854  4E92      1047          jsr       (A2)
08000856  584F      1048          addq.w    #4,A7
                    1049   ; // WriteByteToChip(sendByte);
                    1050   ; // recievedByte = ReadByteFromChip();
                    1051   ; // printf("Sent Byte: 0x%X & Recieved Byte: 0x%X\r\n\r\n", sendByte, recievedByte);
                    1052   ; while(1);
                    1053   main_1:
08000858  60FE      1054          bra       main_1
                    1055   ; // programs should NOT exit as there is nothing to Exit TO !!!!!!
                    1056   ; // There is no OS - just press the reset button to end program and call debug
                    1057   ; }
                    1058   ULDIV:
0800085A  4E56 0000 1059          link    A6,#0
0800085E  48E7 C000 1060          movem.l D0/D1,-(A7)
08000862  222E 0008 1061          move.l  8(A6),D1
08000866  202E 000C 1062          move.l  12(A6),D0
0800086A  6036      1063          bra.s   ldiv_3
                    1064   LDIV:
0800086C  4E56 0000 1065          link    A6,#0
08000870  48E7 C000 1066          movem.l D0/D1,-(A7)
08000874  222E 0008 1067          move.l  8(A6),D1
08000878  202E 000C 1068          move.l  12(A6),D0
0800087C  4A80      1069          tst.l   D0
0800087E  6A0E      1070          bpl.s   ldiv_1
08000880  4480      1071          neg.l   D0
08000882  4A81      1072          tst.l   D1
08000884  6A14      1073          bpl.s   ldiv_2
08000886  4481      1074          neg.l   D1
08000888  612A      1075          bsr.s   dodiv
0800088A  4481      1076          neg.l   D1
0800088C  6016      1077          bra.s   ldiv_4
                    1078   ldiv_1:
0800088E  4A81      1079          tst.l   D1
08000890  6A10      1080          bpl.s   ldiv_3
08000892  4481      1081          neg.l   D1
08000894  611E      1082          bsr.s   dodiv
08000896  4480      1083          neg.l   D0
08000898  600A      1084          bra.s   ldiv_4
                    1085   ldiv_2:
0800089A  6118      1086          bsr.s   dodiv
0800089C  4480      1087          neg.l   D0
0800089E  4481      1088          neg.l   D1
080008A0  6002      1089          bra.s   ldiv_4
                    1090   ldiv_3:
080008A2  6110      1091          bsr.s   dodiv
                    1092   ldiv_4:
080008A4  2D40 0008 1093          move.l  D0,8(A6)
080008A8  2D41 000C 1094          move.l  D1,12(A6)
080008AC  4CDF 0003 1095          movem.l (A7)+,D0/D1
080008B0  4E5E      1096          unlk    A6
080008B2  4E75      1097          rts
                    1098   dodiv:
080008B4  0C81 0000 1099          cmpi.l  #$FFFF,D1
080008B8  FFFF      
080008BA  6236      1100          bhi.s   dodiv_2
080008BC  0C80 0000 1101          cmpi.l  #$FFFF,D0
080008C0  FFFF      
080008C2  6210      1102          bhi.s   dodiv_1
080008C4  80C1      1103          divu    D1,D0
080008C6  2200      1104          move.l  D0,D1
080008C8  4241      1105          clr.w   D1
080008CA  4841      1106          swap    D1
080008CC  0280 0000 1107          andi.l  #$FFFF,D0
080008D0  FFFF      
080008D2  4E75      1108          rts
                    1109   dodiv_1:
080008D4  48A7 A000 1110          movem.w D0/D2,-(A7)
080008D8  4240      1111          clr.w   D0
080008DA  4840      1112          swap    D0
080008DC  80C1      1113          divu    D1,D0
080008DE  3400      1114          move.w  D0,D2
080008E0  301F      1115          move.w  (A7)+,D0
080008E2  80C1      1116          divu    D1,D0
080008E4  4840      1117          swap    D0
080008E6  4281      1118          clr.l   D1
080008E8  3200      1119          move.w  D0,D1
080008EA  3002      1120          move.w  D2,D0
080008EC  4840      1121          swap    D0
080008EE  341F      1122          move.w  (A7)+,D2
080008F0  4E75      1123          rts
                    1124   dodiv_2:
080008F2  48E7 3800 1125          movem.l D2/D3/D4,-(A7)
080008F6  2401      1126          move.l  D1,D2
080008F8  4242      1127          clr.w   D2
080008FA  4842      1128          swap    D2
080008FC  5282      1129          addq.l  #1,D2
080008FE  2600      1130          move.l  D0,D3
08000900  2801      1131          move.l  D1,D4
08000902  2202      1132          move.l  D2,D1
08000904  61CE      1133          bsr.s   dodiv_1
08000906  2204      1134          move.l  D4,D1
08000908  82C2      1135          divu    D2,D1
0800090A  80C1      1136          divu    D1,D0
0800090C  0280 0000 1137          andi.l  #$FFFF,D0
08000910  FFFF      
                    1138   dodiv_3:
08000912  2204      1139          move.l  D4,D1
08000914  2404      1140          move.l  D4,D2
08000916  4842      1141          swap    D2
08000918  C2C0      1142          mulu    D0,D1
0800091A  C4C0      1143          mulu    D0,D2
0800091C  4842      1144          swap    D2
0800091E  D282      1145          add.l   D2,D1
08000920  9283      1146          sub.l   D3,D1
08000922  620A      1147          bhi.s   dodiv_4
08000924  4481      1148          neg.l   D1
08000926  B881      1149          cmp.l   D1,D4
08000928  6208      1150          bhi.s   dodiv_5
0800092A  5280      1151          addq.l  #1,D0
0800092C  60E4      1152          bra.s   dodiv_3
                    1153   dodiv_4:
0800092E  5380      1154          subq.l  #1,D0
08000930  60E0      1155          bra.s   dodiv_3
                    1156   dodiv_5:
08000932  4CDF 001C 1157          movem.l (A7)+,D2/D3/D4
08000936  4E75      1158          rts
                    1159   @doscan_read:
08000938  4E56 FFFC 1160          link      A6,#-4
0800093C  2F0A      1161          move.l    A2,-(A7)
0800093E  45F9 0800 1162          lea       @doscan_lpbuf.L,A2
08000942  2148      
08000944  4AAE 0008 1163          tst.l     8(A6)
08000948  6700 0032 1164          beq       @doscan_read_1
0800094C  206E 0008 1165          move.l    8(A6),A0
08000950  58AE 0008 1166          addq.l    #4,8(A6)
08000954  2050      1167          move.l    (A0),A0
08000956  1010      1168          move.b    (A0),D0
08000958  4880      1169          ext.w     D0
0800095A  48C0      1170          ext.l     D0
0800095C  2D40 FFFC 1171          move.l    D0,-4(A6)
08000960  4201      1172          clr.b     D1
08000962  C2BC 0000 1173          and.l     #255,D1
08000966  00FF      
08000968  B081      1174          cmp.l     D1,D0
0800096A  6706      1175          beq.s     @doscan_read_3
0800096C  202E FFFC 1176          move.l    -4(A6),D0
08000970  6006      1177          bra.s     @doscan_read_4
                    1178   @doscan_read_3:
08000972  70FF      1179          moveq     #-1,D0
08000974  4880      1180          ext.w     D0
08000976  48C0      1181          ext.l     D0
                    1182   @doscan_read_4:
08000978  6000 0036 1183          bra       @doscan_read_5
                    1184   @doscan_read_1:
0800097C  2052      1185          move.l    (A2),A0
0800097E  1010      1186          move.b    (A0),D0
08000980  6624      1187          bne.s     @doscan_read_6
08000982  4879 0800 1188          pea       @doscan_buf.L
08000986  214C      
08000988  4EB9 0800 1189          jsr       _gets
0800098C  130C      
0800098E  584F      1190          addq.w    #4,A7
08000990  2480      1191          move.l    D0,(A2)
08000992  4879 0800 1192          pea       @doscan_1.L
08000996  202C      
08000998  4879 0800 1193          pea       @doscan_buf.L
0800099C  214C      
0800099E  4EB9 0800 1194          jsr       _strcat
080009A2  139E      
080009A4  504F      1195          addq.w    #8,A7
                    1196   @doscan_read_6:
080009A6  2052      1197          move.l    (A2),A0
080009A8  5292      1198          addq.l    #1,(A2)
080009AA  1010      1199          move.b    (A0),D0
080009AC  4880      1200          ext.w     D0
080009AE  48C0      1201          ext.l     D0
                    1202   @doscan_read_5:
080009B0  245F      1203          move.l    (A7)+,A2
080009B2  4E5E      1204          unlk      A6
080009B4  4E75      1205          rts
                    1206   @doscan_putback:
080009B6  4E56 0000 1207          link      A6,#0
080009BA  48E7 3000 1208          movem.l   D2/D3,-(A7)
080009BE  242E 000C 1209          move.l    12(A6),D2
080009C2  262E 0008 1210          move.l    8(A6),D3
080009C6  6718      1211          beq.s     @doscan_putback_1
080009C8  0C82 FFFF 1212          cmp.l     #-1,D2
080009CC  FFFF      
080009CE  670A      1213          beq.s     @doscan_putback_3
080009D0  5983      1214          subq.l    #4,D3
080009D2  2043      1215          move.l    D3,A0
080009D4  2050      1216          move.l    (A0),A0
080009D6  1082      1217          move.b    D2,(A0)
080009D8  6004      1218          bra.s     @doscan_putback_4
                    1219   @doscan_putback_3:
080009DA  2043      1220          move.l    D3,A0
080009DC  5390      1221          subq.l    #1,(A0)
                    1222   @doscan_putback_4:
080009DE  6030      1223          bra.s     @doscan_putback_6
                    1224   @doscan_putback_1:
080009E0  41F9 0800 1225          lea       @doscan_buf.L,A0
080009E4  214C      
080009E6  2008      1226          move.l    A0,D0
080009E8  B0B9 0800 1227          cmp.l     @doscan_lpbuf.L,D0
080009EC  2148      
080009EE  6612      1228          bne.s     @doscan_putback_5
080009F0  4239 0800 1229          clr.b     @doscan_buf.L
080009F4  214C      
080009F6  2F02      1230          move.l    D2,-(A7)
080009F8  4EB9 0800 1231          jsr       _ungetch
080009FC  13D0      
080009FE  584F      1232          addq.w    #4,A7
08000A00  600E      1233          bra.s     @doscan_putback_6
                    1234   @doscan_putback_5:
08000A02  53B9 0800 1235          subq.l    #1,@doscan_lpbuf.L
08000A06  2148      
08000A08  2079 0800 1236          move.l    @doscan_lpbuf.L,A0
08000A0C  2148      
08000A0E  1082      1237          move.b    D2,(A0)
                    1238   @doscan_putback_6:
08000A10  2002      1239          move.l    D2,D0
08000A12  4CDF 000C 1240          movem.l   (A7)+,D2/D3
08000A16  4E5E      1241          unlk      A6
08000A18  4E75      1242          rts
                    1243   @doscan_space:
08000A1A  4E56 0000 1244          link      A6,#0
08000A1E  2F02      1245          move.l    D2,-(A7)
                    1246   @doscan_space_1:
08000A20  2F2E 0008 1247          move.l    8(A6),-(A7)
08000A24  4EB9 0800 1248          jsr       @doscan_read
08000A28  0938      
08000A2A  584F      1249          addq.w    #4,A7
08000A2C  2400      1250          move.l    D0,D2
08000A2E  206E 000C 1251          move.l    12(A6),A0
08000A32  5290      1252          addq.l    #1,(A0)
08000A34  2002      1253          move.l    D2,D0
08000A36  5280      1254          addq.l    #1,D0
08000A38  41F9 0800 1255          lea       __ctype.L,A0
08000A3C  202E      
08000A3E  1030 0800 1256          move.b    0(A0,D0.L),D0
08000A42  C03C 0010 1257          and.b     #16,D0
08000A46  66D8      1258          bne       @doscan_space_1
08000A48  2002      1259          move.l    D2,D0
08000A4A  241F      1260          move.l    (A7)+,D2
08000A4C  4E5E      1261          unlk      A6
08000A4E  4E75      1262          rts
                    1263   @doscan_select:
08000A50  4E56 0000 1264          link      A6,#0
08000A54  48E7 3F20 1265          movem.l   D2/D3/D4/D5/D6/D7/A2,-(A7)
08000A58  262E 000C 1266          move.l    12(A6),D3
08000A5C  2C2E 0018 1267          move.l    24(A6),D6
08000A60  2E2E 0014 1268          move.l    20(A6),D7
08000A64  2043      1269          move.l    D3,A0
08000A66  1010      1270          move.b    (A0),D0
08000A68  0C00 005E 1271          cmp.b     #94,D0
08000A6C  6608      1272          bne.s     @doscan_select_1
08000A6E  347C 0001 1273          move.w    #1,A2
08000A72  5283      1274          addq.l    #1,D3
08000A74  6004      1275          bra.s     @doscan_select_2
                    1276   @doscan_select_1:
08000A76  347C 0000 1277          move.w    #0,A2
                    1278   @doscan_select_2:
08000A7A  202E 0010 1279          move.l    16(A6),D0
08000A7E  53AE 0010 1280          subq.l    #1,16(A6)
08000A82  4A80      1281          tst.l     D0
08000A84  6700 00F6 1282          beq       @doscan_select_5
08000A88  2F2E 0008 1283          move.l    8(A6),-(A7)
08000A8C  4EB9 0800 1284          jsr       @doscan_read
08000A90  0938      
08000A92  584F      1285          addq.w    #4,A7
08000A94  2800      1286          move.l    D0,D4
08000A96  0C84 FFFF 1287          cmp.l     #-1,D4
08000A9A  FFFF      
08000A9C  6604      1288          bne.s     @doscan_select_6
08000A9E  6000 00DC 1289          bra       @doscan_select_5
                    1290   @doscan_select_6:
08000AA2  206E 001C 1291          move.l    28(A6),A0
08000AA6  5290      1292          addq.l    #1,(A0)
08000AA8  4285      1293          clr.l     D5
08000AAA  4282      1294          clr.l     D2
                    1295   @doscan_select_8:
08000AAC  2043      1296          move.l    D3,A0
08000AAE  1030 2800 1297          move.b    0(A0,D2.L),D0
08000AB2  0C00 005D 1298          cmp.b     #93,D0
08000AB6  6700 0086 1299          beq       @doscan_select_10
08000ABA  4A82      1300          tst.l     D2
08000ABC  6710      1301          beq.s     @doscan_select_11
08000ABE  2043      1302          move.l    D3,A0
08000AC0  1030 2800 1303          move.b    0(A0,D2.L),D0
08000AC4  0C00 005D 1304          cmp.b     #93,D0
08000AC8  6604      1305          bne.s     @doscan_select_11
08000ACA  6000 0072 1306          bra       @doscan_select_10
                    1307   @doscan_select_11:
08000ACE  4A82      1308          tst.l     D2
08000AD0  6700 0056 1309          beq       @doscan_select_15
08000AD4  2043      1310          move.l    D3,A0
08000AD6  1030 2800 1311          move.b    0(A0,D2.L),D0
08000ADA  0C00 002D 1312          cmp.b     #45,D0
08000ADE  6600 0048 1313          bne       @doscan_select_15
08000AE2  2043      1314          move.l    D3,A0
08000AE4  2002      1315          move.l    D2,D0
08000AE6  5380      1316          subq.l    #1,D0
08000AE8  2243      1317          move.l    D3,A1
08000AEA  2202      1318          move.l    D2,D1
08000AEC  5281      1319          addq.l    #1,D1
08000AEE  2F00      1320          move.l    D0,-(A7)
08000AF0  1030 0800 1321          move.b    0(A0,D0.L),D0
08000AF4  B031 1800 1322          cmp.b     0(A1,D1.L),D0
08000AF8  6C00 002E 1323          bge       @doscan_select_15
08000AFC  201F      1324          move.l    (A7)+,D0
08000AFE  2043      1325          move.l    D3,A0
08000B00  2002      1326          move.l    D2,D0
08000B02  5380      1327          subq.l    #1,D0
08000B04  1030 0800 1328          move.b    0(A0,D0.L),D0
08000B08  4880      1329          ext.w     D0
08000B0A  48C0      1330          ext.l     D0
08000B0C  B880      1331          cmp.l     D0,D4
08000B0E  6D14      1332          blt.s     @doscan_select_17
08000B10  2043      1333          move.l    D3,A0
08000B12  2002      1334          move.l    D2,D0
08000B14  5280      1335          addq.l    #1,D0
08000B16  1030 0800 1336          move.b    0(A0,D0.L),D0
08000B1A  4880      1337          ext.w     D0
08000B1C  48C0      1338          ext.l     D0
08000B1E  B880      1339          cmp.l     D0,D4
08000B20  6E02      1340          bgt.s     @doscan_select_17
08000B22  601A      1341          bra.s     @doscan_select_10
                    1342   @doscan_select_17:
08000B24  5282      1343          addq.l    #1,D2
08000B26  6010      1344          bra.s     @doscan_select_19
                    1345   @doscan_select_15:
08000B28  2043      1346          move.l    D3,A0
08000B2A  1030 2800 1347          move.b    0(A0,D2.L),D0
08000B2E  4880      1348          ext.w     D0
08000B30  48C0      1349          ext.l     D0
08000B32  B880      1350          cmp.l     D0,D4
08000B34  6602      1351          bne.s     @doscan_select_19
08000B36  6006      1352          bra.s     @doscan_select_10
                    1353   @doscan_select_19:
08000B38  5282      1354          addq.l    #1,D2
08000B3A  6000 FF70 1355          bra       @doscan_select_8
                    1356   @doscan_select_10:
08000B3E  4A82      1357          tst.l     D2
08000B40  670C      1358          beq.s     @doscan_select_23
08000B42  2043      1359          move.l    D3,A0
08000B44  1030 2800 1360          move.b    0(A0,D2.L),D0
08000B48  0C00 005D 1361          cmp.b     #93,D0
08000B4C  6702      1362          beq.s     @doscan_select_21
                    1363   @doscan_select_23:
08000B4E  7A01      1364          moveq     #1,D5
                    1365   @doscan_select_21:
08000B50  200A      1366          move.l    A2,D0
08000B52  6712      1367          beq.s     @doscan_select_24
08000B54  4A85      1368          tst.l     D5
08000B56  660C      1369          bne.s     @doscan_select_26
08000B58  4A87      1370          tst.l     D7
08000B5A  6606      1371          bne.s     @doscan_select_28
08000B5C  2046      1372          move.l    D6,A0
08000B5E  5286      1373          addq.l    #1,D6
08000B60  1084      1374          move.b    D4,(A0)
                    1375   @doscan_select_28:
08000B62  6014      1376          bra.s     @doscan_select_4
                    1377   @doscan_select_26:
08000B64  6016      1378          bra.s     @doscan_select_5
                    1379   @doscan_select_24:
08000B66  4A85      1380          tst.l     D5
08000B68  670C      1381          beq.s     @doscan_select_30
08000B6A  4A87      1382          tst.l     D7
08000B6C  6606      1383          bne.s     @doscan_select_32
08000B6E  2046      1384          move.l    D6,A0
08000B70  5286      1385          addq.l    #1,D6
08000B72  1084      1386          move.b    D4,(A0)
                    1387   @doscan_select_32:
08000B74  6002      1388          bra.s     @doscan_select_4
                    1389   @doscan_select_30:
08000B76  6004      1390          bra.s     @doscan_select_5
                    1391   @doscan_select_4:
08000B78  6000 FF00 1392          bra       @doscan_select_2
                    1393   @doscan_select_5:
08000B7C  0C84 FFFF 1394          cmp.l     #-1,D4
08000B80  FFFF      
08000B82  6714      1395          beq.s     @doscan_select_34
08000B84  2F04      1396          move.l    D4,-(A7)
08000B86  2F2E 0008 1397          move.l    8(A6),-(A7)
08000B8A  4EB9 0800 1398          jsr       @doscan_putback
08000B8E  09B6      
08000B90  504F      1399          addq.w    #8,A7
08000B92  206E 001C 1400          move.l    28(A6),A0
08000B96  5390      1401          subq.l    #1,(A0)
                    1402   @doscan_select_34:
08000B98  4A87      1403          tst.l     D7
08000B9A  6604      1404          bne.s     @doscan_select_36
08000B9C  2046      1405          move.l    D6,A0
08000B9E  4210      1406          clr.b     (A0)
                    1407   @doscan_select_36:
08000BA0  5283      1408          addq.l    #1,D3
08000BA2  2043      1409          move.l    D3,A0
08000BA4  1010      1410          move.b    (A0),D0
08000BA6  0C00 005D 1411          cmp.b     #93,D0
08000BAA  6702      1412          beq.s     @doscan_select_40
08000BAC  60F2      1413          bra       @doscan_select_36
                    1414   @doscan_select_40:
08000BAE  5283      1415          addq.l    #1,D3
08000BB0  2003      1416          move.l    D3,D0
08000BB2  4CDF 04FC 1417          movem.l   (A7)+,D2/D3/D4/D5/D6/D7/A2
08000BB6  4E5E      1418          unlk      A6
08000BB8  4E75      1419          rts
                    1420   _scanflush:
08000BBA  41F9 0800 1421          lea       @doscan_buf.L,A0
08000BBE  214C      
08000BC0  23C8 0800 1422          move.l    A0,@doscan_lpbuf.L
08000BC4  2148      
08000BC6  4239 0800 1423          clr.b     @doscan_buf.L
08000BCA  214C      
08000BCC  4878 FFFF 1424          pea       -1
08000BD0  4EB9 0800 1425          jsr       _ungetch
08000BD4  13D0      
08000BD6  584F      1426          addq.w    #4,A7
08000BD8  4E75      1427          rts
                    1428   _doscan:
08000BDA  4E56 FF88 1429          link      A6,#-120
08000BDE  48E7 3F3C 1430          movem.l   D2/D3/D4/D5/D6/D7/A2/A3/A4/A5,-(A7)
08000BE2  47F9 0800 1431          lea       @doscan_read.L,A3
08000BE6  0938      
08000BE8  4AAE 0008 1432          tst.l     8(A6)
08000BEC  6706      1433          beq.s     doscan_1
08000BEE  41EE 0008 1434          lea       8(A6),A0
08000BF2  6008      1435          bra.s     doscan_2
                    1436   doscan_1:
08000BF4  4200      1437          clr.b     D0
08000BF6  4880      1438          ext.w     D0
08000BF8  48C0      1439          ext.l     D0
08000BFA  2040      1440          move.l    D0,A0
                    1441   doscan_2:
08000BFC  2A08      1442          move.l    A0,D5
08000BFE  42AE FFE4 1443          clr.l     -28(A6)
08000C02  4284      1444          clr.l     D4
                    1445   doscan_3:
08000C04  206E 000C 1446          move.l    12(A6),A0
08000C08  52AE 000C 1447          addq.l    #1,12(A6)
08000C0C  1010      1448          move.b    (A0),D0
08000C0E  4880      1449          ext.w     D0
08000C10  48C0      1450          ext.l     D0
08000C12  2600      1451          move.l    D0,D3
08000C14  4201      1452          clr.b     D1
08000C16  C2BC 0000 1453          and.l     #255,D1
08000C1A  00FF      
08000C1C  B081      1454          cmp.l     D1,D0
08000C1E  6700 0612 1455          beq       doscan_5
08000C22  4286      1456          clr.l     D6
08000C24  387C 0000 1457          move.w    #0,A4
08000C28  0C83 0000 1458          cmp.l     #32,D3
08000C2C  0020      
08000C2E  6712      1459          beq.s     doscan_8
08000C30  0C83 0000 1460          cmp.l     #9,D3
08000C34  0009      
08000C36  670A      1461          beq.s     doscan_8
08000C38  0C83 0000 1462          cmp.l     #10,D3
08000C3C  000A      
08000C3E  6600 0050 1463          bne       doscan_6
                    1464   doscan_8:
08000C42  2F05      1465          move.l    D5,-(A7)
08000C44  4E93      1466          jsr       (A3)
08000C46  584F      1467          addq.w    #4,A7
08000C48  2400      1468          move.l    D0,D2
08000C4A  52AE FFE4 1469          addq.l    #1,-28(A6)
08000C4E  0C82 FFFF 1470          cmp.l     #-1,D2
08000C52  FFFF      
08000C54  6612      1471          bne.s     doscan_11
08000C56  4A84      1472          tst.l     D4
08000C58  6704      1473          beq.s     doscan_13
08000C5A  2004      1474          move.l    D4,D0
08000C5C  6006      1475          bra.s     doscan_14
                    1476   doscan_13:
08000C5E  70FF      1477          moveq     #-1,D0
08000C60  4880      1478          ext.w     D0
08000C62  48C0      1479          ext.l     D0
                    1480   doscan_14:
08000C64  6000 05CE 1481          bra       doscan_15
                    1482   doscan_11:
08000C68  2002      1483          move.l    D2,D0
08000C6A  5280      1484          addq.l    #1,D0
08000C6C  41F9 0800 1485          lea       __ctype.L,A0
08000C70  202E      
08000C72  1030 0800 1486          move.b    0(A0,D0.L),D0
08000C76  C03C 0010 1487          and.b     #16,D0
08000C7A  66C6      1488          bne       doscan_8
08000C7C  53AE FFE4 1489          subq.l    #1,-28(A6)
08000C80  2F02      1490          move.l    D2,-(A7)
08000C82  2F05      1491          move.l    D5,-(A7)
08000C84  4EB9 0800 1492          jsr       @doscan_putback
08000C88  09B6      
08000C8A  504F      1493          addq.w    #8,A7
08000C8C  6000 05A0 1494          bra       doscan_141
                    1495   doscan_6:
08000C90  0C83 0000 1496          cmp.l     #37,D3
08000C94  0025      
08000C96  6600 055A 1497          bne       doscan_129
08000C9A  206E 000C 1498          move.l    12(A6),A0
08000C9E  52AE 000C 1499          addq.l    #1,12(A6)
08000CA2  1010      1500          move.b    (A0),D0
08000CA4  4880      1501          ext.w     D0
08000CA6  48C0      1502          ext.l     D0
08000CA8  2600      1503          move.l    D0,D3
08000CAA  42AE FFEC 1504          clr.l     -20(A6)
08000CAE  4286      1505          clr.l     D6
08000CB0  42AE FFE8 1506          clr.l     -24(A6)
08000CB4  347C 7FFF 1507          move.w    #32767,A2
08000CB8  0C83 0000 1508          cmp.l     #42,D3
08000CBC  002A      
08000CBE  6612      1509          bne.s     doscan_18
08000CC0  7C01      1510          moveq     #1,D6
08000CC2  206E 000C 1511          move.l    12(A6),A0
08000CC6  52AE 000C 1512          addq.l    #1,12(A6)
08000CCA  1010      1513          move.b    (A0),D0
08000CCC  4880      1514          ext.w     D0
08000CCE  48C0      1515          ext.l     D0
08000CD0  2600      1516          move.l    D0,D3
                    1517   doscan_18:
08000CD2  2003      1518          move.l    D3,D0
08000CD4  5280      1519          addq.l    #1,D0
08000CD6  41F9 0800 1520          lea       __ctype.L,A0
08000CDA  202E      
08000CDC  1030 0800 1521          move.b    0(A0,D0.L),D0
08000CE0  C03C 0004 1522          and.b     #4,D0
08000CE4  6700 004C 1523          beq       doscan_24
08000CE8  2003      1524          move.l    D3,D0
08000CEA  0480 0000 1525          sub.l     #48,D0
08000CEE  0030      
08000CF0  2440      1526          move.l    D0,A2
                    1527   doscan_22:
08000CF2  206E 000C 1528          move.l    12(A6),A0
08000CF6  52AE 000C 1529          addq.l    #1,12(A6)
08000CFA  1010      1530          move.b    (A0),D0
08000CFC  4880      1531          ext.w     D0
08000CFE  48C0      1532          ext.l     D0
08000D00  2600      1533          move.l    D0,D3
08000D02  5280      1534          addq.l    #1,D0
08000D04  41F9 0800 1535          lea       __ctype.L,A0
08000D08  202E      
08000D0A  1030 0800 1536          move.b    0(A0,D0.L),D0
08000D0E  C03C 0004 1537          and.b     #4,D0
08000D12  671E      1538          beq.s     doscan_24
08000D14  2F0A      1539          move.l    A2,-(A7)
08000D16  4878 000A 1540          pea       10
08000D1A  4EB9 0800 1541          jsr       LMUL
08000D1E  127E      
08000D20  2017      1542          move.l    (A7),D0
08000D22  504F      1543          addq.w    #8,A7
08000D24  2203      1544          move.l    D3,D1
08000D26  0481 0000 1545          sub.l     #48,D1
08000D2A  0030      
08000D2C  D081      1546          add.l     D1,D0
08000D2E  2440      1547          move.l    D0,A2
08000D30  60C0      1548          bra       doscan_22
                    1549   doscan_24:
08000D32  0C83 0000 1550          cmp.l     #108,D3
08000D36  006C      
08000D38  6708      1551          beq.s     doscan_27
08000D3A  0C83 0000 1552          cmp.l     #76,D3
08000D3E  004C      
08000D40  661A      1553          bne.s     doscan_25
                    1554   doscan_27:
08000D42  2D7C 0000 1555          move.l    #1,-24(A6)
08000D46  0001 FFE8 
08000D4A  206E 000C 1556          move.l    12(A6),A0
08000D4E  52AE 000C 1557          addq.l    #1,12(A6)
08000D52  1010      1558          move.b    (A0),D0
08000D54  4880      1559          ext.w     D0
08000D56  48C0      1560          ext.l     D0
08000D58  2600      1561          move.l    D0,D3
08000D5A  6020      1562          bra.s     doscan_28
                    1563   doscan_25:
08000D5C  0C83 0000 1564          cmp.l     #104,D3
08000D60  0068      
08000D62  6618      1565          bne.s     doscan_28
08000D64  2D7C 0000 1566          move.l    #1,-20(A6)
08000D68  0001 FFEC 
08000D6C  206E 000C 1567          move.l    12(A6),A0
08000D70  52AE 000C 1568          addq.l    #1,12(A6)
08000D74  1010      1569          move.b    (A0),D0
08000D76  4880      1570          ext.w     D0
08000D78  48C0      1571          ext.l     D0
08000D7A  2600      1572          move.l    D0,D3
                    1573   doscan_28:
08000D7C  0C83 0000 1574          cmp.l     #91,D3
08000D80  005B      
08000D82  6600 0038 1575          bne       doscan_30
08000D86  4A86      1576          tst.l     D6
08000D88  660A      1577          bne.s     doscan_32
08000D8A  206E 0010 1578          move.l    16(A6),A0
08000D8E  58AE 0010 1579          addq.l    #4,16(A6)
08000D92  2E10      1580          move.l    (A0),D7
                    1581   doscan_32:
08000D94  486E FFE4 1582          pea       -28(A6)
08000D98  2F07      1583          move.l    D7,-(A7)
08000D9A  2F06      1584          move.l    D6,-(A7)
08000D9C  2F0A      1585          move.l    A2,-(A7)
08000D9E  2F2E 000C 1586          move.l    12(A6),-(A7)
08000DA2  2F05      1587          move.l    D5,-(A7)
08000DA4  4EB9 0800 1588          jsr       @doscan_select
08000DA8  0A50      
08000DAA  DEFC 0018 1589          add.w     #24,A7
08000DAE  2D40 000C 1590          move.l    D0,12(A6)
08000DB2  4A86      1591          tst.l     D6
08000DB4  6602      1592          bne.s     doscan_34
08000DB6  5284      1593          addq.l    #1,D4
                    1594   doscan_34:
08000DB8  6000 0474 1595          bra       doscan_141
                    1596   doscan_30:
08000DBC  0C83 0000 1597          cmp.l     #110,D3
08000DC0  006E      
08000DC2  661A      1598          bne.s     doscan_36
08000DC4  4A86      1599          tst.l     D6
08000DC6  6612      1600          bne.s     doscan_38
08000DC8  206E 0010 1601          move.l    16(A6),A0
08000DCC  58AE 0010 1602          addq.l    #4,16(A6)
08000DD0  2E10      1603          move.l    (A0),D7
08000DD2  2047      1604          move.l    D7,A0
08000DD4  20AE FFE4 1605          move.l    -28(A6),(A0)
08000DD8  5284      1606          addq.l    #1,D4
                    1607   doscan_38:
08000DDA  6000 0452 1608          bra       doscan_141
                    1609   doscan_36:
08000DDE  0C83 0000 1610          cmp.l     #115,D3
08000DE2  0073      
08000DE4  6600 00C4 1611          bne       doscan_40
08000DE8  486E FFE4 1612          pea       -28(A6)
08000DEC  2F05      1613          move.l    D5,-(A7)
08000DEE  4EB9 0800 1614          jsr       @doscan_space
08000DF2  0A1A      
08000DF4  504F      1615          addq.w    #8,A7
08000DF6  2400      1616          move.l    D0,D2
08000DF8  4A86      1617          tst.l     D6
08000DFA  660A      1618          bne.s     doscan_42
08000DFC  206E 0010 1619          move.l    16(A6),A0
08000E00  58AE 0010 1620          addq.l    #4,16(A6)
08000E04  2E10      1621          move.l    (A0),D7
                    1622   doscan_42:
08000E06  52AE FFE4 1623          addq.l    #1,-28(A6)
                    1624   doscan_44:
08000E0A  200A      1625          move.l    A2,D0
08000E0C  534A      1626          subq.w    #1,A2
08000E0E  4A80      1627          tst.l     D0
08000E10  6700 0048 1628          beq       doscan_46
08000E14  2002      1629          move.l    D2,D0
08000E16  5280      1630          addq.l    #1,D0
08000E18  41F9 0800 1631          lea       __ctype.L,A0
08000E1C  202E      
08000E1E  1030 0800 1632          move.b    0(A0,D0.L),D0
08000E22  C03C 0010 1633          and.b     #16,D0
08000E26  6604      1634          bne.s     doscan_47
08000E28  7001      1635          moveq     #1,D0
08000E2A  6002      1636          bra.s     doscan_48
                    1637   doscan_47:
08000E2C  4280      1638          clr.l     D0
                    1639   doscan_48:
08000E2E  C0BC 0000 1640          and.l     #255,D0
08000E32  00FF      
08000E34  6724      1641          beq.s     doscan_46
08000E36  0C82 FFFF 1642          cmp.l     #-1,D2
08000E3A  FFFF      
08000E3C  671C      1643          beq.s     doscan_46
08000E3E  387C 0001 1644          move.w    #1,A4
08000E42  4A86      1645          tst.l     D6
08000E44  6606      1646          bne.s     doscan_49
08000E46  2047      1647          move.l    D7,A0
08000E48  5287      1648          addq.l    #1,D7
08000E4A  1082      1649          move.b    D2,(A0)
                    1650   doscan_49:
08000E4C  2F05      1651          move.l    D5,-(A7)
08000E4E  4E93      1652          jsr       (A3)
08000E50  584F      1653          addq.w    #4,A7
08000E52  2400      1654          move.l    D0,D2
08000E54  52AE FFE4 1655          addq.l    #1,-28(A6)
08000E58  60B0      1656          bra       doscan_44
                    1657   doscan_46:
08000E5A  4A86      1658          tst.l     D6
08000E5C  660A      1659          bne.s     doscan_53
08000E5E  2047      1660          move.l    D7,A0
08000E60  4210      1661          clr.b     (A0)
08000E62  200C      1662          move.l    A4,D0
08000E64  6702      1663          beq.s     doscan_53
08000E66  5284      1664          addq.l    #1,D4
                    1665   doscan_53:
08000E68  0C82 FFFF 1666          cmp.l     #-1,D2
08000E6C  FFFF      
08000E6E  6708      1667          beq.s     doscan_57
08000E70  4A86      1668          tst.l     D6
08000E72  6622      1669          bne.s     doscan_55
08000E74  200C      1670          move.l    A4,D0
08000E76  661E      1671          bne.s     doscan_55
                    1672   doscan_57:
08000E78  4A84      1673          tst.l     D4
08000E7A  6704      1674          beq.s     doscan_58
08000E7C  2004      1675          move.l    D4,D0
08000E7E  6012      1676          bra.s     doscan_61
                    1677   doscan_58:
08000E80  0C82 FFFF 1678          cmp.l     #-1,D2
08000E84  FFFF      
08000E86  6608      1679          bne.s     doscan_60
08000E88  70FF      1680          moveq     #-1,D0
08000E8A  4880      1681          ext.w     D0
08000E8C  48C0      1682          ext.l     D0
08000E8E  6002      1683          bra.s     doscan_61
                    1684   doscan_60:
08000E90  2004      1685          move.l    D4,D0
                    1686   doscan_61:
08000E92  6000 03A0 1687          bra       doscan_15
                    1688   doscan_55:
08000E96  53AE FFE4 1689          subq.l    #1,-28(A6)
08000E9A  2F02      1690          move.l    D2,-(A7)
08000E9C  2F05      1691          move.l    D5,-(A7)
08000E9E  4EB9 0800 1692          jsr       @doscan_putback
08000EA2  09B6      
08000EA4  504F      1693          addq.w    #8,A7
08000EA6  6000 0386 1694          bra       doscan_141
                    1695   doscan_40:
08000EAA  0C83 0000 1696          cmp.l     #99,D3
08000EAE  0063      
08000EB0  6600 0094 1697          bne       doscan_62
08000EB4  4A86      1698          tst.l     D6
08000EB6  660A      1699          bne.s     doscan_64
08000EB8  206E 0010 1700          move.l    16(A6),A0
08000EBC  58AE 0010 1701          addq.l    #4,16(A6)
08000EC0  2E10      1702          move.l    (A0),D7
                    1703   doscan_64:
08000EC2  2F05      1704          move.l    D5,-(A7)
08000EC4  4E93      1705          jsr       (A3)
08000EC6  584F      1706          addq.w    #4,A7
08000EC8  2400      1707          move.l    D0,D2
08000ECA  52AE FFE4 1708          addq.l    #1,-28(A6)
08000ECE  200A      1709          move.l    A2,D0
08000ED0  0C80 0000 1710          cmp.l     #32767,D0
08000ED4  7FFF      
08000ED6  6604      1711          bne.s     doscan_66
08000ED8  347C 0001 1712          move.w    #1,A2
                    1713   doscan_66:
08000EDC  0C82 FFFF 1714          cmp.l     #-1,D2
08000EE0  FFFF      
08000EE2  6606      1715          bne.s     doscan_68
08000EE4  4A86      1716          tst.l     D6
08000EE6  6602      1717          bne.s     doscan_68
08000EE8  5384      1718          subq.l    #1,D4
                    1719   doscan_68:
08000EEA  200A      1720          move.l    A2,D0
08000EEC  534A      1721          subq.w    #1,A2
08000EEE  4A80      1722          tst.l     D0
08000EF0  6720      1723          beq.s     doscan_72
08000EF2  0C82 FFFF 1724          cmp.l     #-1,D2
08000EF6  FFFF      
08000EF8  6718      1725          beq.s     doscan_72
08000EFA  4A86      1726          tst.l     D6
08000EFC  6606      1727          bne.s     doscan_73
08000EFE  2047      1728          move.l    D7,A0
08000F00  5287      1729          addq.l    #1,D7
08000F02  1082      1730          move.b    D2,(A0)
                    1731   doscan_73:
08000F04  2F05      1732          move.l    D5,-(A7)
08000F06  4E93      1733          jsr       (A3)
08000F08  584F      1734          addq.w    #4,A7
08000F0A  2400      1735          move.l    D0,D2
08000F0C  52AE FFE4 1736          addq.l    #1,-28(A6)
08000F10  60D8      1737          bra       doscan_68
                    1738   doscan_72:
08000F12  0C82 FFFF 1739          cmp.l     #-1,D2
08000F16  FFFF      
08000F18  6612      1740          bne.s     doscan_75
08000F1A  4A84      1741          tst.l     D4
08000F1C  6704      1742          beq.s     doscan_77
08000F1E  2004      1743          move.l    D4,D0
08000F20  6006      1744          bra.s     doscan_78
                    1745   doscan_77:
08000F22  70FF      1746          moveq     #-1,D0
08000F24  4880      1747          ext.w     D0
08000F26  48C0      1748          ext.l     D0
                    1749   doscan_78:
08000F28  6000 030A 1750          bra       doscan_15
                    1751   doscan_75:
08000F2C  4A86      1752          tst.l     D6
08000F2E  6602      1753          bne.s     doscan_79
08000F30  5284      1754          addq.l    #1,D4
                    1755   doscan_79:
08000F32  53AE FFE4 1756          subq.l    #1,-28(A6)
08000F36  2F02      1757          move.l    D2,-(A7)
08000F38  2F05      1758          move.l    D5,-(A7)
08000F3A  4EB9 0800 1759          jsr       @doscan_putback
08000F3E  09B6      
08000F40  504F      1760          addq.w    #8,A7
08000F42  6000 02EA 1761          bra       doscan_141
                    1762   doscan_62:
08000F46  0C83 0000 1763          cmp.l     #105,D3
08000F4A  0069      
08000F4C  6600 0068 1764          bne       doscan_84
08000F50  486E FFE4 1765          pea       -28(A6)
08000F54  2F05      1766          move.l    D5,-(A7)
08000F56  4EB9 0800 1767          jsr       @doscan_space
08000F5A  0A1A      
08000F5C  504F      1768          addq.w    #8,A7
08000F5E  2400      1769          move.l    D0,D2
08000F60  0C82 0000 1770          cmp.l     #48,D2
08000F64  0030      
08000F66  6600 003C 1771          bne       doscan_83
08000F6A  387C 0001 1772          move.w    #1,A4
08000F6E  2F05      1773          move.l    D5,-(A7)
08000F70  4E93      1774          jsr       (A3)
08000F72  584F      1775          addq.w    #4,A7
08000F74  2400      1776          move.l    D0,D2
08000F76  2F02      1777          move.l    D2,-(A7)
08000F78  4EB9 0800 1778          jsr       _tolower
08000F7C  1382      
08000F7E  584F      1779          addq.w    #4,A7
08000F80  0C80 0000 1780          cmp.l     #120,D0
08000F84  0078      
08000F86  6604      1781          bne.s     doscan_85
08000F88  7678      1782          moveq     #120,D3
08000F8A  6012      1783          bra.s     doscan_86
                    1784   doscan_85:
08000F8C  53AE FFE4 1785          subq.l    #1,-28(A6)
08000F90  2F02      1786          move.l    D2,-(A7)
08000F92  2F05      1787          move.l    D5,-(A7)
08000F94  4EB9 0800 1788          jsr       @doscan_putback
08000F98  09B6      
08000F9A  504F      1789          addq.w    #8,A7
08000F9C  766F      1790          moveq     #111,D3
                    1791   doscan_86:
08000F9E  52AE FFE4 1792          addq.l    #1,-28(A6)
08000FA2  6012      1793          bra.s     doscan_84
                    1794   doscan_83:
08000FA4  53AE FFE4 1795          subq.l    #1,-28(A6)
08000FA8  2F02      1796          move.l    D2,-(A7)
08000FAA  2F05      1797          move.l    D5,-(A7)
08000FAC  4EB9 0800 1798          jsr       @doscan_putback
08000FB0  09B6      
08000FB2  504F      1799          addq.w    #8,A7
08000FB4  7664      1800          moveq     #100,D3
                    1801   doscan_84:
08000FB6  0C83 0000 1802          cmp.l     #100,D3
08000FBA  0064      
08000FBC  671A      1803          beq.s     doscan_89
08000FBE  0C83 0000 1804          cmp.l     #117,D3
08000FC2  0075      
08000FC4  6712      1805          beq.s     doscan_89
08000FC6  0C83 0000 1806          cmp.l     #120,D3
08000FCA  0078      
08000FCC  670A      1807          beq.s     doscan_89
08000FCE  0C83 0000 1808          cmp.l     #111,D3
08000FD2  006F      
08000FD4  6600 01CE 1809          bne       doscan_87
                    1810   doscan_89:
08000FD8  486E FFE4 1811          pea       -28(A6)
08000FDC  2F05      1812          move.l    D5,-(A7)
08000FDE  4EB9 0800 1813          jsr       @doscan_space
08000FE2  0A1A      
08000FE4  504F      1814          addq.w    #8,A7
08000FE6  2400      1815          move.l    D0,D2
08000FE8  2D7C 0000 1816          move.l    #10,-4(A6)
08000FEC  000A FFFC 
08000FF0  0C83 0000 1817          cmp.l     #120,D3
08000FF4  0078      
08000FF6  6608      1818          bne.s     doscan_90
08000FF8  2D7C 0000 1819          move.l    #16,-4(A6)
08000FFC  0010 FFFC 
                    1820   doscan_90:
08001000  0C83 0000 1821          cmp.l     #111,D3
08001004  006F      
08001006  6608      1822          bne.s     doscan_92
08001008  2D7C 0000 1823          move.l    #8,-4(A6)
0800100C  0008 FFFC 
                    1824   doscan_92:
08001010  4A86      1825          tst.l     D6
08001012  660A      1826          bne.s     doscan_94
08001014  206E 0010 1827          move.l    16(A6),A0
08001018  58AE 0010 1828          addq.l    #4,16(A6)
0800101C  2E10      1829          move.l    (A0),D7
                    1830   doscan_94:
0800101E  42AE FFE0 1831          clr.l     -32(A6)
08001022  52AE FFE4 1832          addq.l    #1,-28(A6)
08001026  0C83 0000 1833          cmp.l     #117,D3
0800102A  0075      
0800102C  6720      1834          beq.s     doscan_96
0800102E  0C82 0000 1835          cmp.l     #45,D2
08001032  002D      
08001034  6618      1836          bne.s     doscan_96
08001036  2F05      1837          move.l    D5,-(A7)
08001038  4E93      1838          jsr       (A3)
0800103A  584F      1839          addq.w    #4,A7
0800103C  2400      1840          move.l    D0,D2
0800103E  52AE FFE4 1841          addq.l    #1,-28(A6)
08001042  2D7C 0000 1842          move.l    #1,-32(A6)
08001046  0001 FFE0 
0800104A  387C 0001 1843          move.w    #1,A4
                    1844   doscan_96:
0800104E  3A7C 0000 1845          move.w    #0,A5
08001052  0C82 FFFF 1846          cmp.l     #-1,D2
08001056  FFFF      
08001058  6612      1847          bne.s     doscan_98
0800105A  4A84      1848          tst.l     D4
0800105C  6704      1849          beq.s     doscan_100
0800105E  2004      1850          move.l    D4,D0
08001060  6006      1851          bra.s     doscan_101
                    1852   doscan_100:
08001062  70FF      1853          moveq     #-1,D0
08001064  4880      1854          ext.w     D0
08001066  48C0      1855          ext.l     D0
                    1856   doscan_101:
08001068  6000 01CA 1857          bra       doscan_15
                    1858   doscan_98:
0800106C  200A      1859          move.l    A2,D0
0800106E  534A      1860          subq.w    #1,A2
08001070  4A80      1861          tst.l     D0
08001072  6700 00AA 1862          beq       doscan_104
08001076  0C83 0000 1863          cmp.l     #120,D3
0800107A  0078      
0800107C  6624      1864          bne.s     doscan_106
0800107E  2F02      1865          move.l    D2,-(A7)
08001080  4EB9 0800 1866          jsr       _toupper
08001084  13B4      
08001086  584F      1867          addq.w    #4,A7
08001088  0C80 0000 1868          cmp.l     #65,D0
0800108C  0041      
0800108E  6D12      1869          blt.s     doscan_106
08001090  2F02      1870          move.l    D2,-(A7)
08001092  4EB9 0800 1871          jsr       _toupper
08001096  13B4      
08001098  584F      1872          addq.w    #4,A7
0800109A  0C80 0000 1873          cmp.l     #70,D0
0800109E  0046      
080010A0  6F1C      1874          ble.s     doscan_105
                    1875   doscan_106:
080010A2  2002      1876          move.l    D2,D0
080010A4  5280      1877          addq.l    #1,D0
080010A6  41F9 0800 1878          lea       __ctype.L,A0
080010AA  202E      
080010AC  1030 0800 1879          move.b    0(A0,D0.L),D0
080010B0  C03C 0004 1880          and.b     #4,D0
080010B4  C0BC 0000 1881          and.l     #255,D0
080010B8  00FF      
080010BA  6700 0062 1882          beq       doscan_104
                    1883   doscan_105:
080010BE  2002      1884          move.l    D2,D0
080010C0  5280      1885          addq.l    #1,D0
080010C2  41F9 0800 1886          lea       __ctype.L,A0
080010C6  202E      
080010C8  1030 0800 1887          move.b    0(A0,D0.L),D0
080010CC  C03C 0004 1888          and.b     #4,D0
080010D0  661E      1889          bne.s     doscan_107
080010D2  2F02      1890          move.l    D2,-(A7)
080010D4  4EB9 0800 1891          jsr       _toupper
080010D8  13B4      
080010DA  584F      1892          addq.w    #4,A7
080010DC  0480 0000 1893          sub.l     #65,D0
080010E0  0041      
080010E2  0680 0000 1894          add.l     #10,D0
080010E6  000A      
080010E8  0680 0000 1895          add.l     #48,D0
080010EC  0030      
080010EE  2400      1896          move.l    D0,D2
                    1897   doscan_107:
080010F0  2F0D      1898          move.l    A5,-(A7)
080010F2  2F2E FFFC 1899          move.l    -4(A6),-(A7)
080010F6  4EB9 0800 1900          jsr       LMUL
080010FA  127E      
080010FC  2017      1901          move.l    (A7),D0
080010FE  504F      1902          addq.w    #8,A7
08001100  D082      1903          add.l     D2,D0
08001102  0480 0000 1904          sub.l     #48,D0
08001106  0030      
08001108  2A40      1905          move.l    D0,A5
0800110A  2F05      1906          move.l    D5,-(A7)
0800110C  4E93      1907          jsr       (A3)
0800110E  584F      1908          addq.w    #4,A7
08001110  2400      1909          move.l    D0,D2
08001112  52AE FFE4 1910          addq.l    #1,-28(A6)
08001116  387C 0001 1911          move.w    #1,A4
0800111A  6000 FF50 1912          bra       doscan_98
                    1913   doscan_104:
0800111E  0C82 FFFF 1914          cmp.l     #-1,D2
08001122  FFFF      
08001124  671C      1915          beq.s     doscan_109
08001126  2F02      1916          move.l    D2,-(A7)
08001128  2F05      1917          move.l    D5,-(A7)
0800112A  4EB9 0800 1918          jsr       @doscan_putback
0800112E  09B6      
08001130  504F      1919          addq.w    #8,A7
08001132  53AE FFE4 1920          subq.l    #1,-28(A6)
08001136  200C      1921          move.l    A4,D0
08001138  6606      1922          bne.s     doscan_111
0800113A  2004      1923          move.l    D4,D0
0800113C  6000 00F6 1924          bra       doscan_15
                    1925   doscan_111:
08001140  6016      1926          bra.s     doscan_113
                    1927   doscan_109:
08001142  200C      1928          move.l    A4,D0
08001144  6612      1929          bne.s     doscan_113
08001146  4A84      1930          tst.l     D4
08001148  6704      1931          beq.s     doscan_115
0800114A  2004      1932          move.l    D4,D0
0800114C  6006      1933          bra.s     doscan_116
                    1934   doscan_115:
0800114E  70FF      1935          moveq     #-1,D0
08001150  4880      1936          ext.w     D0
08001152  48C0      1937          ext.l     D0
                    1938   doscan_116:
08001154  6000 00DE 1939          bra       doscan_15
                    1940   doscan_113:
08001158  4AAE FFE0 1941          tst.l     -32(A6)
0800115C  6706      1942          beq.s     doscan_117
0800115E  200D      1943          move.l    A5,D0
08001160  4480      1944          neg.l     D0
08001162  2A40      1945          move.l    D0,A5
                    1946   doscan_117:
08001164  4A86      1947          tst.l     D6
08001166  661E      1948          bne.s     doscan_119
08001168  4AAE FFE8 1949          tst.l     -24(A6)
0800116C  6706      1950          beq.s     doscan_121
0800116E  2047      1951          move.l    D7,A0
08001170  208D      1952          move.l    A5,(A0)
08001172  6010      1953          bra.s     doscan_124
                    1954   doscan_121:
08001174  4AAE FFEC 1955          tst.l     -20(A6)
08001178  6706      1956          beq.s     doscan_123
0800117A  2047      1957          move.l    D7,A0
0800117C  308D      1958          move.w    A5,(A0)
0800117E  6004      1959          bra.s     doscan_124
                    1960   doscan_123:
08001180  2047      1961          move.l    D7,A0
08001182  208D      1962          move.l    A5,(A0)
                    1963   doscan_124:
08001184  5284      1964          addq.l    #1,D4
                    1965   doscan_119:
08001186  0C82 FFFF 1966          cmp.l     #-1,D2
0800118A  FFFF      
0800118C  6612      1967          bne.s     doscan_125
0800118E  4A84      1968          tst.l     D4
08001190  6704      1969          beq.s     doscan_127
08001192  2004      1970          move.l    D4,D0
08001194  6006      1971          bra.s     doscan_128
                    1972   doscan_127:
08001196  70FF      1973          moveq     #-1,D0
08001198  4880      1974          ext.w     D0
0800119A  48C0      1975          ext.l     D0
                    1976   doscan_128:
0800119C  6000 0096 1977          bra       doscan_15
                    1978   doscan_125:
080011A0  6000 008C 1979          bra       doscan_141
                    1980   doscan_87:
080011A4  0C83 0000 1981          cmp.l     #37,D3
080011A8  0025      
080011AA  6600 0046 1982          bne       doscan_129
080011AE  2F05      1983          move.l    D5,-(A7)
080011B0  4E93      1984          jsr       (A3)
080011B2  584F      1985          addq.w    #4,A7
080011B4  2400      1986          move.l    D0,D2
080011B6  0C82 FFFF 1987          cmp.l     #-1,D2
080011BA  FFFF      
080011BC  6612      1988          bne.s     doscan_131
080011BE  4A84      1989          tst.l     D4
080011C0  6704      1990          beq.s     doscan_133
080011C2  2004      1991          move.l    D4,D0
080011C4  6006      1992          bra.s     doscan_134
                    1993   doscan_133:
080011C6  70FF      1994          moveq     #-1,D0
080011C8  4880      1995          ext.w     D0
080011CA  48C0      1996          ext.l     D0
                    1997   doscan_134:
080011CC  6000 0066 1998          bra       doscan_15
                    1999   doscan_131:
080011D0  52AE FFE4 2000          addq.l    #1,-28(A6)
080011D4  B483      2001          cmp.l     D3,D2
080011D6  6716      2002          beq.s     doscan_135
080011D8  2F02      2003          move.l    D2,-(A7)
080011DA  2F05      2004          move.l    D5,-(A7)
080011DC  4EB9 0800 2005          jsr       @doscan_putback
080011E0  09B6      
080011E2  504F      2006          addq.w    #8,A7
080011E4  53AE FFE4 2007          subq.l    #1,-28(A6)
080011E8  2004      2008          move.l    D4,D0
080011EA  6000 0048 2009          bra       doscan_15
                    2010   doscan_135:
080011EE  6000 003E 2011          bra       doscan_141
                    2012   doscan_129:
080011F2  2F05      2013          move.l    D5,-(A7)
080011F4  4E93      2014          jsr       (A3)
080011F6  584F      2015          addq.w    #4,A7
080011F8  2400      2016          move.l    D0,D2
080011FA  52AE FFE4 2017          addq.l    #1,-28(A6)
080011FE  0C82 FFFF 2018          cmp.l     #-1,D2
08001202  FFFF      
08001204  6610      2019          bne.s     doscan_137
08001206  4A84      2020          tst.l     D4
08001208  6704      2021          beq.s     doscan_139
0800120A  2004      2022          move.l    D4,D0
0800120C  6006      2023          bra.s     doscan_140
                    2024   doscan_139:
0800120E  70FF      2025          moveq     #-1,D0
08001210  4880      2026          ext.w     D0
08001212  48C0      2027          ext.l     D0
                    2028   doscan_140:
08001214  601E      2029          bra.s     doscan_15
                    2030   doscan_137:
08001216  B483      2031          cmp.l     D3,D2
08001218  6714      2032          beq.s     doscan_141
0800121A  2F02      2033          move.l    D2,-(A7)
0800121C  2F05      2034          move.l    D5,-(A7)
0800121E  4EB9 0800 2035          jsr       @doscan_putback
08001222  09B6      
08001224  504F      2036          addq.w    #8,A7
08001226  53AE FFE4 2037          subq.l    #1,-28(A6)
0800122A  2004      2038          move.l    D4,D0
0800122C  6006      2039          bra.s     doscan_15
                    2040   doscan_141:
0800122E  6000 F9D4 2041          bra       doscan_3
                    2042   doscan_5:
08001232  2004      2043          move.l    D4,D0
                    2044   doscan_15:
08001234  4CDF 3CFC 2045          movem.l   (A7)+,D2/D3/D4/D5/D6/D7/A2/A3/A4/A5
08001238  4E5E      2046          unlk      A6
0800123A  4E75      2047          rts
                    2048   _printf:
0800123C  4E56 FFFC 2049          link      A6,#-4
08001240  2F02      2050          move.l    D2,-(A7)
08001242  41EE 0008 2051          lea       8(A6),A0
08001246  5848      2052          addq.w    #4,A0
08001248  2408      2053          move.l    A0,D2
0800124A  2F02      2054          move.l    D2,-(A7)
0800124C  2F2E 0008 2055          move.l    8(A6),-(A7)
08001250  42A7      2056          clr.l     -(A7)
08001252  4EB9 0800 2057          jsr       _doprint
08001256  148C      
08001258  DEFC 000C 2058          add.w     #12,A7
0800125C  2D40 FFFC 2059          move.l    D0,-4(A6)
08001260  4282      2060          clr.l     D2
08001262  202E FFFC 2061          move.l    -4(A6),D0
08001266  241F      2062          move.l    (A7)+,D2
08001268  4E5E      2063          unlk      A6
0800126A  4E75      2064          rts
                    2065   ULMUL:
0800126C  4E56 0000 2066          link    A6,#0
08001270  48E7 C000 2067          movem.l D0/D1,-(A7)
08001274  222E 0008 2068          move.l  8(A6),D1
08001278  202E 000C 2069          move.l  12(A6),D0
0800127C  602C      2070          bra.s   lmul_3
                    2071   LMUL:
0800127E  4E56 0000 2072          link    A6,#0
08001282  48E7 C000 2073          movem.l D0/D1,-(A7)
08001286  222E 0008 2074          move.l  8(A6),D1
0800128A  202E 000C 2075          move.l  12(A6),D0
0800128E  4A80      2076          tst.l   D0
08001290  6A0A      2077          bpl.s   lmul_1
08001292  4480      2078          neg.l   D0
08001294  4A81      2079          tst.l   D1
08001296  6A0A      2080          bpl.s   lmul_2
08001298  4481      2081          neg.l   D1
0800129A  600E      2082          bra.s   lmul_3
                    2083   lmul_1:
0800129C  4A81      2084          tst.l   D1
0800129E  6A0A      2085          bpl.s   lmul_3
080012A0  4481      2086          neg.l   D1
                    2087   lmul_2:
080012A2  6114      2088          bsr.s   domul
080012A4  4481      2089          neg.l   D1
080012A6  4080      2090          negx.l  D0
080012A8  6002      2091          bra.s   lmul_4
                    2092   lmul_3:
080012AA  610C      2093          bsr.s   domul
                    2094   lmul_4:
080012AC  2D41 0008 2095          move.l  D1,8(A6)
080012B0  4CDF 0003 2096          movem.l (A7)+,D0/D1
080012B4  4E5E      2097          unlk    A6
080012B6  4E75      2098          rts
                    2099   domul:
080012B8  0C81 0000 2100          cmpi.l  #$FFFF,D1
080012BC  FFFF      
080012BE  620C      2101          bhi.s   domul_1
080012C0  0C80 0000 2102          cmpi.l  #$FFFF,D0
080012C4  FFFF      
080012C6  620E      2103          bhi.s   domul_2
080012C8  C2C0      2104          mulu    D0,D1
080012CA  4E75      2105          rts
                    2106   domul_1:
080012CC  0C80 0000 2107          cmpi.l  #$FFFF,D0
080012D0  FFFF      
080012D2  6218      2108          bhi.s   domul_4
080012D4  6002      2109          bra.s   domul_3
                    2110   domul_2
080012D6  C141      2111          exg     D0,D1
                    2112   domul_3:
080012D8  2F02      2113          move.l  D2,-(A7)
080012DA  2401      2114          move.l  D1,D2
080012DC  4842      2115          swap    D2
080012DE  C2C0      2116          mulu    D0,D1
080012E0  C4C0      2117          mulu    D0,D2
080012E2  4842      2118          swap    D2
080012E4  4242      2119          clr.w   D2
080012E6  D282      2120          add.l   D2,D1
080012E8  241F      2121          move.l  (A7)+,D2
080012EA  4E75      2122          rts
                    2123   domul_4:
080012EC  48E7 3000 2124          movem.l D2/D3,-(A7)
080012F0  2401      2125          move.l  D1,D2
080012F2  2601      2126          move.l  D1,D3
080012F4  C2C0      2127          mulu    D0,D1
080012F6  4842      2128          swap    D2
080012F8  C4C0      2129          mulu    D0,D2
080012FA  4840      2130          swap    D0
080012FC  C6C0      2131          mulu    D0,D3
080012FE  D483      2132          add.l   D3,D2
08001300  4842      2133          swap    D2
08001302  4242      2134          clr.w   D2
08001304  D282      2135          add.l   D2,D1
08001306  4CDF 000C 2136          movem.l (A7)+,D2/D3
0800130A  4E75      2137          rts
                    2138   _gets:
0800130C  4E56 0000 2139          link      A6,#0
08001310  48E7 3820 2140          movem.l   D2/D3/D4/A2,-(A7)
08001314  45F9 0800 2141          lea       _putch.L,A2
08001318  1ABC      
0800131A  282E 0008 2142          move.l    8(A6),D4
0800131E  2404      2143          move.l    D4,D2
                    2144   gets_1:
08001320  4EB9 0800 2145          jsr       _getch
08001324  1AEC      
08001326  2600      2146          move.l    D0,D3
08001328  0C80 0000 2147          cmp.l     #10,D0
0800132C  000A      
0800132E  6700 003C 2148          beq       gets_3
08001332  0C83 0000 2149          cmp.l     #8,D3
08001336  0008      
08001338  6712      2150          beq.s     gets_4
0800133A  2042      2151          move.l    D2,A0
0800133C  5282      2152          addq.l    #1,D2
0800133E  1083      2153          move.b    D3,(A0)
08001340  4883      2154          ext.w     D3
08001342  48C3      2155          ext.l     D3
08001344  2F03      2156          move.l    D3,-(A7)
08001346  4E92      2157          jsr       (A2)
08001348  584F      2158          addq.w    #4,A7
0800134A  601E      2159          bra.s     gets_6
                    2160   gets_4:
0800134C  B484      2161          cmp.l     D4,D2
0800134E  631A      2162          bls.s     gets_6
08001350  4878 0008 2163          pea       8
08001354  4E92      2164          jsr       (A2)
08001356  584F      2165          addq.w    #4,A7
08001358  4878 0020 2166          pea       32
0800135C  4E92      2167          jsr       (A2)
0800135E  584F      2168          addq.w    #4,A7
08001360  4878 0008 2169          pea       8
08001364  4E92      2170          jsr       (A2)
08001366  584F      2171          addq.w    #4,A7
08001368  5382      2172          subq.l    #1,D2
                    2173   gets_6:
0800136A  60B4      2174          bra       gets_1
                    2175   gets_3:
0800136C  4878 000A 2176          pea       10
08001370  4E92      2177          jsr       (A2)
08001372  584F      2178          addq.w    #4,A7
08001374  2042      2179          move.l    D2,A0
08001376  4210      2180          clr.b     (A0)
08001378  2004      2181          move.l    D4,D0
0800137A  4CDF 041C 2182          movem.l   (A7)+,D2/D3/D4/A2
0800137E  4E5E      2183          unlk      A6
08001380  4E75      2184          rts
                    2185   _tolower:
08001382  202F 0004 2186          move.l    4(A7),D0
08001386  0C80 0000 2187          cmp.l     #'A',D0
0800138A  0041      
0800138C  6D0E      2188          blt.s     tolower_1
0800138E  0C80 0000 2189          cmp.l     #'Z',D0
08001392  005A      
08001394  6E06      2190          bgt.s     tolower_1
08001396  0680 0000 2191          add.l     #$20,D0
0800139A  0020      
                    2192   tolower_1:
0800139C  4E75      2193          rts
                    2194   _strcat:
0800139E  206F 0004 2195          move.l    (4,A7),A0
080013A2  226F 0008 2196          move.l    (8,A7),A1
080013A6  2008      2197          move.l    A0,D0
                    2198   strcat_1:
080013A8  4A18      2199          tst.b     (A0)+
080013AA  66FC      2200          bne.s     strcat_1
080013AC  5388      2201          subq.l    #1,A0
                    2202   strcat_2:
080013AE  10D9      2203          move.b    (A1)+,(A0)+
080013B0  66FC      2204          bne.s     strcat_2
080013B2  4E75      2205          rts
                    2206   _toupper:
080013B4  202F 0004 2207          move.l    4(A7),D0
080013B8  0C80 0000 2208          cmp.l     #'a',D0
080013BC  0061      
080013BE  6D0E      2209          blt.s     toupper_1
080013C0  0C80 0000 2210          cmp.l     #'z',D0
080013C4  007A      
080013C6  6E06      2211          bgt.s     toupper_1
080013C8  0480 0000 2212          sub.l     #$20,D0
080013CC  0020      
                    2213   toupper_1:
080013CE  4E75      2214          rts
                    2215   _ungetch:
080013D0  4E56 0000 2216          link      A6,#0
080013D4  23EE 0008 2217          move.l    8(A6),__ungetbuf.L
080013D8  0800 213C 
080013DC  202E 0008 2218          move.l    8(A6),D0
080013E0  4E5E      2219          unlk      A6
080013E2  4E75      2220          rts
                    2221   @doprint_copy:
080013E4  4E56 0000 2222          link      A6,#0
080013E8  206E 0008 2223          move.l    8(A6),A0
080013EC  4A90      2224          tst.l     (A0)
080013EE  6710      2225          beq.s     @doprint_copy_1
080013F0  202E 000C 2226          move.l    12(A6),D0
080013F4  206E 0008 2227          move.l    8(A6),A0
080013F8  2250      2228          move.l    (A0),A1
080013FA  5290      2229          addq.l    #1,(A0)
080013FC  1280      2230          move.b    D0,(A1)
080013FE  600C      2231          bra.s     @doprint_copy_2
                    2232   @doprint_copy_1:
08001400  2F2E 000C 2233          move.l    12(A6),-(A7)
08001404  4EB9 0800 2234          jsr       _putch
08001408  1ABC      
0800140A  584F      2235          addq.w    #4,A7
                    2236   @doprint_copy_2:
0800140C  4E5E      2237          unlk      A6
0800140E  4E75      2238          rts
                    2239   @doprint_getval:
08001410  4E56 0000 2240          link      A6,#0
08001414  48E7 3000 2241          movem.l   D2/D3,-(A7)
08001418  262E 0008 2242          move.l    8(A6),D3
0800141C  4282      2243          clr.l     D2
0800141E  2043      2244          move.l    D3,A0
08001420  2050      2245          move.l    (A0),A0
08001422  1010      2246          move.b    (A0),D0
08001424  0C00 002A 2247          cmp.b     #42,D0
08001428  6612      2248          bne.s     @doprint_getval_1
0800142A  206E 000C 2249          move.l    12(A6),A0
0800142E  2250      2250          move.l    (A0),A1
08001430  5890      2251          addq.l    #4,(A0)
08001432  2411      2252          move.l    (A1),D2
08001434  2043      2253          move.l    D3,A0
08001436  5290      2254          addq.l    #1,(A0)
08001438  6000 0048 2255          bra       @doprint_getval_5
                    2256   @doprint_getval_1:
0800143C  7001      2257          moveq     #1,D0
0800143E  2043      2258          move.l    D3,A0
08001440  2050      2259          move.l    (A0),A0
08001442  1210      2260          move.b    (A0),D1
08001444  4881      2261          ext.w     D1
08001446  48C1      2262          ext.l     D1
08001448  D081      2263          add.l     D1,D0
0800144A  41F9 0800 2264          lea       __ctype.L,A0
0800144E  202E      
08001450  1030 0800 2265          move.b    0(A0,D0.L),D0
08001454  C03C 0004 2266          and.b     #4,D0
08001458  6728      2267          beq.s     @doprint_getval_5
0800145A  2F02      2268          move.l    D2,-(A7)
0800145C  4878 000A 2269          pea       10
08001460  4EB9 0800 2270          jsr       LMUL
08001464  127E      
08001466  2017      2271          move.l    (A7),D0
08001468  504F      2272          addq.w    #8,A7
0800146A  2043      2273          move.l    D3,A0
0800146C  2250      2274          move.l    (A0),A1
0800146E  5290      2275          addq.l    #1,(A0)
08001470  1211      2276          move.b    (A1),D1
08001472  4881      2277          ext.w     D1
08001474  48C1      2278          ext.l     D1
08001476  D081      2279          add.l     D1,D0
08001478  0480 0000 2280          sub.l     #48,D0
0800147C  0030      
0800147E  2400      2281          move.l    D0,D2
08001480  60BA      2282          bra       @doprint_getval_1
                    2283   @doprint_getval_5:
08001482  2002      2284          move.l    D2,D0
08001484  4CDF 000C 2285          movem.l   (A7)+,D2/D3
08001488  4E5E      2286          unlk      A6
0800148A  4E75      2287          rts
                    2288   _doprint:
0800148C  4E56 FFCC 2289          link      A6,#-52
08001490  48E7 3F3C 2290          movem.l   D2/D3/D4/D5/D6/D7/A2/A3/A4/A5,-(A7)
08001494  45EE 0008 2291          lea       8(A6),A2
08001498  47F9 0800 2292          lea       @doprint_copy.L,A3
0800149C  13E4      
0800149E  49F9 0800 2293          lea       _ultoa.L,A4
080014A2  1C30      
080014A4  4286      2294          clr.l     D6
                    2295   doprint_1:
080014A6  206E 000C 2296          move.l    12(A6),A0
080014AA  4A10      2297          tst.b     (A0)
080014AC  6700 05F0 2298          beq       doprint_3
080014B0  206E 000C 2299          move.l    12(A6),A0
080014B4  1010      2300          move.b    (A0),D0
080014B6  0C00 0025 2301          cmp.b     #37,D0
080014BA  671C      2302          beq.s     doprint_4
080014BC  206E 000C 2303          move.l    12(A6),A0
080014C0  52AE 000C 2304          addq.l    #1,12(A6)
080014C4  1210      2305          move.b    (A0),D1
080014C6  4881      2306          ext.w     D1
080014C8  48C1      2307          ext.l     D1
080014CA  2F01      2308          move.l    D1,-(A7)
080014CC  2F0A      2309          move.l    A2,-(A7)
080014CE  4E93      2310          jsr       (A3)
080014D0  504F      2311          addq.w    #8,A7
080014D2  5286      2312          addq.l    #1,D6
080014D4  6000 05C4 2313          bra       doprint_2
                    2314   doprint_4:
080014D8  52AE 000C 2315          addq.l    #1,12(A6)
080014DC  422E FFD3 2316          clr.b     -45(A6)
080014E0  422E FFD2 2317          clr.b     -46(A6)
080014E4  422E FFD0 2318          clr.b     -48(A6)
080014E8  422E FFCF 2319          clr.b     -49(A6)
080014EC  422E FFCE 2320          clr.b     -50(A6)
080014F0  422E FFCD 2321          clr.b     -51(A6)
080014F4  42AE FFFC 2322          clr.l     -4(A6)
080014F8  7AFF      2323          moveq     #-1,D5
080014FA  41EE FFDC 2324          lea       -36(A6),A0
080014FE  2608      2325          move.l    A0,D3
08001500  2408      2326          move.l    A0,D2
                    2327   doprint_6:
08001502  206E 000C 2328          move.l    12(A6),A0
08001506  1010      2329          move.b    (A0),D0
08001508  4880      2330          ext.w     D0
0800150A  48C0      2331          ext.l     D0
0800150C  0C80 0000 2332          cmp.l     #43,D0
08001510  002B      
08001512  6730      2333          beq.s     doprint_12
08001514  6E18      2334          bgt.s     doprint_15
08001516  0C80 0000 2335          cmp.l     #35,D0
0800151A  0023      
0800151C  6700 003E 2336          beq       doprint_14
08001520  6E00 0046 2337          bgt       doprint_9
08001524  0C80 0000 2338          cmp.l     #32,D0
08001528  0020      
0800152A  6724      2339          beq.s     doprint_13
0800152C  603A      2340          bra.s     doprint_9
                    2341   doprint_15:
0800152E  0C80 0000 2342          cmp.l     #45,D0
08001532  002D      
08001534  6702      2343          beq.s     doprint_11
08001536  6030      2344          bra.s     doprint_9
                    2345   doprint_11:
08001538  1D7C 0001 2346          move.b    #1,-51(A6)
0800153C  FFCD      
0800153E  52AE 000C 2347          addq.l    #1,12(A6)
08001542  6026      2348          bra.s     doprint_7
                    2349   doprint_12:
08001544  1D7C 0001 2350          move.b    #1,-50(A6)
08001548  FFCE      
0800154A  52AE 000C 2351          addq.l    #1,12(A6)
0800154E  601A      2352          bra.s     doprint_7
                    2353   doprint_13:
08001550  1D7C 0001 2354          move.b    #1,-49(A6)
08001554  FFCF      
08001556  52AE 000C 2355          addq.l    #1,12(A6)
0800155A  600E      2356          bra.s     doprint_7
                    2357   doprint_14:
0800155C  1D7C 0001 2358          move.b    #1,-48(A6)
08001560  FFD0      
08001562  52AE 000C 2359          addq.l    #1,12(A6)
08001566  6002      2360          bra.s     doprint_7
                    2361   doprint_9:
08001568  6002      2362          bra.s     doprint_8
                    2363   doprint_7:
0800156A  6096      2364          bra       doprint_6
                    2365   doprint_8:
0800156C  206E 000C 2366          move.l    12(A6),A0
08001570  1010      2367          move.b    (A0),D0
08001572  0C00 0030 2368          cmp.b     #48,D0
08001576  660A      2369          bne.s     doprint_16
08001578  52AE 000C 2370          addq.l    #1,12(A6)
0800157C  1D7C 0001 2371          move.b    #1,-46(A6)
08001580  FFD2      
                    2372   doprint_16:
08001582  486E 0010 2373          pea       16(A6)
08001586  486E 000C 2374          pea       12(A6)
0800158A  4EB9 0800 2375          jsr       @doprint_getval
0800158E  1410      
08001590  504F      2376          addq.w    #8,A7
08001592  2A40      2377          move.l    D0,A5
08001594  206E 000C 2378          move.l    12(A6),A0
08001598  1010      2379          move.b    (A0),D0
0800159A  0C00 002E 2380          cmp.b     #46,D0
0800159E  6616      2381          bne.s     doprint_18
080015A0  52AE 000C 2382          addq.l    #1,12(A6)
080015A4  486E 0010 2383          pea       16(A6)
080015A8  486E 000C 2384          pea       12(A6)
080015AC  4EB9 0800 2385          jsr       @doprint_getval
080015B0  1410      
080015B2  504F      2386          addq.w    #8,A7
080015B4  2A00      2387          move.l    D0,D5
                    2388   doprint_18:
080015B6  206E 000C 2389          move.l    12(A6),A0
080015BA  1010      2390          move.b    (A0),D0
080015BC  0C00 006C 2391          cmp.b     #108,D0
080015C0  660A      2392          bne.s     doprint_20
080015C2  52AE 000C 2393          addq.l    #1,12(A6)
080015C6  1D7C 0001 2394          move.b    #1,-45(A6)
080015CA  FFD3      
                    2395   doprint_20:
080015CC  206E 000C 2396          move.l    12(A6),A0
080015D0  1010      2397          move.b    (A0),D0
080015D2  4880      2398          ext.w     D0
080015D4  48C0      2399          ext.l     D0
080015D6  0C80 0000 2400          cmp.l     #111,D0
080015DA  006F      
080015DC  6700 00D8 2401          beq       doprint_27
080015E0  6E34      2402          bgt.s     doprint_33
080015E2  0C80 0000 2403          cmp.l     #100,D0
080015E6  0064      
080015E8  6700 0054 2404          beq       doprint_24
080015EC  6E1C      2405          bgt.s     doprint_34
080015EE  0C80 0000 2406          cmp.l     #99,D0
080015F2  0063      
080015F4  6700 0130 2407          beq       doprint_30
080015F8  6E00 0174 2408          bgt       doprint_22
080015FC  0C80 0000 2409          cmp.l     #88,D0
08001600  0058      
08001602  6700 00EA 2410          beq       doprint_28
08001606  6000 0166 2411          bra       doprint_22
                    2412   doprint_34:
0800160A  0C80 0000 2413          cmp.l     #105,D0
0800160E  0069      
08001610  672C      2414          beq.s     doprint_24
08001612  6000 015A 2415          bra       doprint_22
                    2416   doprint_33:
08001616  0C80 0000 2417          cmp.l     #117,D0
0800161A  0075      
0800161C  6700 0060 2418          beq       doprint_26
08001620  6E0E      2419          bgt.s     doprint_35
08001622  0C80 0000 2420          cmp.l     #115,D0
08001626  0073      
08001628  6700 0124 2421          beq       doprint_31
0800162C  6000 0140 2422          bra       doprint_22
                    2423   doprint_35:
08001630  0C80 0000 2424          cmp.l     #120,D0
08001634  0078      
08001636  6700 00B6 2425          beq       doprint_28
0800163A  6000 0132 2426          bra       doprint_22
                    2427   doprint_24:
0800163E  4A2E FFD3 2428          tst.b     -45(A6)
08001642  671C      2429          beq.s     doprint_36
08001644  4878 000A 2430          pea       10
08001648  2F03      2431          move.l    D3,-(A7)
0800164A  206E 0010 2432          move.l    16(A6),A0
0800164E  58AE 0010 2433          addq.l    #4,16(A6)
08001652  2F10      2434          move.l    (A0),-(A7)
08001654  4EB9 0800 2435          jsr       _ltoa
08001658  1BA8      
0800165A  DEFC 000C 2436          add.w     #12,A7
0800165E  601A      2437          bra.s     doprint_37
                    2438   doprint_36:
08001660  4878 000A 2439          pea       10
08001664  2F03      2440          move.l    D3,-(A7)
08001666  206E 0010 2441          move.l    16(A6),A0
0800166A  58AE 0010 2442          addq.l    #4,16(A6)
0800166E  2F10      2443          move.l    (A0),-(A7)
08001670  4EB9 0800 2444          jsr       _ltoa
08001674  1BA8      
08001676  DEFC 000C 2445          add.w     #12,A7
                    2446   doprint_37:
0800167A  6000 0100 2447          bra       doprint_23
                    2448   doprint_26:
0800167E  4A2E FFD3 2449          tst.b     -45(A6)
08001682  6718      2450          beq.s     doprint_38
08001684  4878 000A 2451          pea       10
08001688  2F03      2452          move.l    D3,-(A7)
0800168A  206E 0010 2453          move.l    16(A6),A0
0800168E  58AE 0010 2454          addq.l    #4,16(A6)
08001692  2F10      2455          move.l    (A0),-(A7)
08001694  4E94      2456          jsr       (A4)
08001696  DEFC 000C 2457          add.w     #12,A7
0800169A  6016      2458          bra.s     doprint_39
                    2459   doprint_38:
0800169C  4878 000A 2460          pea       10
080016A0  2F03      2461          move.l    D3,-(A7)
080016A2  206E 0010 2462          move.l    16(A6),A0
080016A6  58AE 0010 2463          addq.l    #4,16(A6)
080016AA  2F10      2464          move.l    (A0),-(A7)
080016AC  4E94      2465          jsr       (A4)
080016AE  DEFC 000C 2466          add.w     #12,A7
                    2467   doprint_39:
080016B2  6000 00C8 2468          bra       doprint_23
                    2469   doprint_27:
080016B6  4A2E FFD3 2470          tst.b     -45(A6)
080016BA  6718      2471          beq.s     doprint_40
080016BC  4878 0008 2472          pea       8
080016C0  2F03      2473          move.l    D3,-(A7)
080016C2  206E 0010 2474          move.l    16(A6),A0
080016C6  58AE 0010 2475          addq.l    #4,16(A6)
080016CA  2F10      2476          move.l    (A0),-(A7)
080016CC  4E94      2477          jsr       (A4)
080016CE  DEFC 000C 2478          add.w     #12,A7
080016D2  6016      2479          bra.s     doprint_41
                    2480   doprint_40:
080016D4  4878 0008 2481          pea       8
080016D8  2F03      2482          move.l    D3,-(A7)
080016DA  206E 0010 2483          move.l    16(A6),A0
080016DE  58AE 0010 2484          addq.l    #4,16(A6)
080016E2  2F10      2485          move.l    (A0),-(A7)
080016E4  4E94      2486          jsr       (A4)
080016E6  DEFC 000C 2487          add.w     #12,A7
                    2488   doprint_41:
080016EA  6000 0090 2489          bra       doprint_23
                    2490   doprint_28:
080016EE  4A2E FFD3 2491          tst.b     -45(A6)
080016F2  6718      2492          beq.s     doprint_42
080016F4  4878 0010 2493          pea       16
080016F8  2F03      2494          move.l    D3,-(A7)
080016FA  206E 0010 2495          move.l    16(A6),A0
080016FE  58AE 0010 2496          addq.l    #4,16(A6)
08001702  2F10      2497          move.l    (A0),-(A7)
08001704  4E94      2498          jsr       (A4)
08001706  DEFC 000C 2499          add.w     #12,A7
0800170A  6016      2500          bra.s     doprint_43
                    2501   doprint_42:
0800170C  4878 0010 2502          pea       16
08001710  2F03      2503          move.l    D3,-(A7)
08001712  206E 0010 2504          move.l    16(A6),A0
08001716  58AE 0010 2505          addq.l    #4,16(A6)
0800171A  2F10      2506          move.l    (A0),-(A7)
0800171C  4E94      2507          jsr       (A4)
0800171E  DEFC 000C 2508          add.w     #12,A7
                    2509   doprint_43:
08001722  6000 0058 2510          bra       doprint_23
                    2511   doprint_30:
08001726  206E 0010 2512          move.l    16(A6),A0
0800172A  58AE 0010 2513          addq.l    #4,16(A6)
0800172E  2010      2514          move.l    (A0),D0
08001730  2042      2515          move.l    D2,A0
08001732  5282      2516          addq.l    #1,D2
08001734  1080      2517          move.b    D0,(A0)
08001736  2042      2518          move.l    D2,A0
08001738  4210      2519          clr.b     (A0)
0800173A  200D      2520          move.l    A5,D0
0800173C  6704      2521          beq.s     doprint_44
0800173E  200D      2522          move.l    A5,D0
08001740  6006      2523          bra.s     doprint_45
                    2524   doprint_44:
08001742  7001      2525          moveq     #1,D0
08001744  4880      2526          ext.w     D0
08001746  48C0      2527          ext.l     D0
                    2528   doprint_45:
08001748  2A00      2529          move.l    D0,D5
0800174A  6000 0030 2530          bra       doprint_23
                    2531   doprint_31:
0800174E  206E 0010 2532          move.l    16(A6),A0
08001752  58AE 0010 2533          addq.l    #4,16(A6)
08001756  2610      2534          move.l    (A0),D3
08001758  0C85 FFFF 2535          cmp.l     #-1,D5
0800175C  FFFF      
0800175E  660C      2536          bne.s     doprint_46
08001760  2F03      2537          move.l    D3,-(A7)
08001762  4EB9 0800 2538          jsr       _strlen
08001766  1C96      
08001768  584F      2539          addq.w    #4,A7
0800176A  2A00      2540          move.l    D0,D5
                    2541   doprint_46:
0800176C  600E      2542          bra.s     doprint_23
                    2543   doprint_22:
0800176E  206E 000C 2544          move.l    12(A6),A0
08001772  2242      2545          move.l    D2,A1
08001774  5282      2546          addq.l    #1,D2
08001776  1290      2547          move.b    (A0),(A1)
08001778  2042      2548          move.l    D2,A0
0800177A  4210      2549          clr.b     (A0)
                    2550   doprint_23:
0800177C  2F03      2551          move.l    D3,-(A7)
0800177E  4EB9 0800 2552          jsr       _strlen
08001782  1C96      
08001784  584F      2553          addq.w    #4,A7
08001786  1800      2554          move.b    D0,D4
08001788  206E 000C 2555          move.l    12(A6),A0
0800178C  1010      2556          move.b    (A0),D0
0800178E  0C00 0073 2557          cmp.b     #115,D0
08001792  661C      2558          bne.s     doprint_48
08001794  0C85 0000 2559          cmp.l     #0,D5
08001798  0000      
0800179A  6D14      2560          blt.s     doprint_48
0800179C  4884      2561          ext.w     D4
0800179E  48C4      2562          ext.l     D4
080017A0  B885      2563          cmp.l     D5,D4
080017A2  6F04      2564          ble.s     doprint_50
080017A4  2005      2565          move.l    D5,D0
080017A6  6006      2566          bra.s     doprint_51
                    2567   doprint_50:
080017A8  1004      2568          move.b    D4,D0
080017AA  4880      2569          ext.w     D0
080017AC  48C0      2570          ext.l     D0
                    2571   doprint_51:
080017AE  1800      2572          move.b    D0,D4
                    2573   doprint_48:
080017B0  206E 000C 2574          move.l    12(A6),A0
080017B4  1010      2575          move.b    (A0),D0
080017B6  0C00 0058 2576          cmp.b     #88,D0
080017BA  6600 0028 2577          bne       doprint_56
080017BE  41EE FFDC 2578          lea       -36(A6),A0
080017C2  2408      2579          move.l    A0,D2
                    2580   doprint_54:
080017C4  2042      2581          move.l    D2,A0
080017C6  4A10      2582          tst.b     (A0)
080017C8  671A      2583          beq.s     doprint_56
080017CA  2042      2584          move.l    D2,A0
080017CC  1210      2585          move.b    (A0),D1
080017CE  4881      2586          ext.w     D1
080017D0  48C1      2587          ext.l     D1
080017D2  2F01      2588          move.l    D1,-(A7)
080017D4  4EB9 0800 2589          jsr       _toupper
080017D8  13B4      
080017DA  584F      2590          addq.w    #4,A7
080017DC  2042      2591          move.l    D2,A0
080017DE  1080      2592          move.b    D0,(A0)
080017E0  5282      2593          addq.l    #1,D2
080017E2  60E0      2594          bra       doprint_54
                    2595   doprint_56:
080017E4  7E00      2596          moveq     #0,D7
080017E6  41EE FFD4 2597          lea       -44(A6),A0
080017EA  2408      2598          move.l    A0,D2
080017EC  206E 000C 2599          move.l    12(A6),A0
080017F0  1010      2600          move.b    (A0),D0
080017F2  0C00 0064 2601          cmp.b     #100,D0
080017F6  670E      2602          beq.s     doprint_59
080017F8  206E 000C 2603          move.l    12(A6),A0
080017FC  1010      2604          move.b    (A0),D0
080017FE  0C00 0069 2605          cmp.b     #105,D0
08001802  6600 0068 2606          bne       doprint_65
                    2607   doprint_59:
08001806  102E FFCE 2608          move.b    -50(A6),D0
0800180A  4880      2609          ext.w     D0
0800180C  48C0      2610          ext.l     D0
0800180E  4A80      2611          tst.l     D0
08001810  660C      2612          bne.s     doprint_62
08001812  2043      2613          move.l    D3,A0
08001814  1010      2614          move.b    (A0),D0
08001816  0C00 002D 2615          cmp.b     #45,D0
0800181A  6600 0028 2616          bne       doprint_60
                    2617   doprint_62:
0800181E  2043      2618          move.l    D3,A0
08001820  1010      2619          move.b    (A0),D0
08001822  0C00 002D 2620          cmp.b     #45,D0
08001826  660E      2621          bne.s     doprint_63
08001828  2043      2622          move.l    D3,A0
0800182A  5283      2623          addq.l    #1,D3
0800182C  2242      2624          move.l    D2,A1
0800182E  5282      2625          addq.l    #1,D2
08001830  1290      2626          move.b    (A0),(A1)
08001832  5304      2627          subq.b    #1,D4
08001834  6008      2628          bra.s     doprint_64
                    2629   doprint_63:
08001836  2042      2630          move.l    D2,A0
08001838  5282      2631          addq.l    #1,D2
0800183A  10BC 002B 2632          move.b    #43,(A0)
                    2633   doprint_64:
0800183E  5287      2634          addq.l    #1,D7
08001840  6000 002A 2635          bra       doprint_65
                    2636   doprint_60:
08001844  4A2E FFCF 2637          tst.b     -49(A6)
08001848  6722      2638          beq.s     doprint_65
0800184A  2043      2639          move.l    D3,A0
0800184C  1010      2640          move.b    (A0),D0
0800184E  0C00 002D 2641          cmp.b     #45,D0
08001852  660E      2642          bne.s     doprint_67
08001854  2043      2643          move.l    D3,A0
08001856  5283      2644          addq.l    #1,D3
08001858  2242      2645          move.l    D2,A1
0800185A  5282      2646          addq.l    #1,D2
0800185C  1290      2647          move.b    (A0),(A1)
0800185E  5304      2648          subq.b    #1,D4
08001860  6008      2649          bra.s     doprint_68
                    2650   doprint_67:
08001862  2042      2651          move.l    D2,A0
08001864  5282      2652          addq.l    #1,D2
08001866  10BC 0020 2653          move.b    #32,(A0)
                    2654   doprint_68:
0800186A  5287      2655          addq.l    #1,D7
                    2656   doprint_65:
0800186C  4A2E FFD0 2657          tst.b     -48(A6)
08001870  6700 005A 2658          beq       doprint_77
08001874  206E 000C 2659          move.l    12(A6),A0
08001878  1010      2660          move.b    (A0),D0
0800187A  4880      2661          ext.w     D0
0800187C  48C0      2662          ext.l     D0
0800187E  0C80 0000 2663          cmp.l     #111,D0
08001882  006F      
08001884  671A      2664          beq.s     doprint_73
08001886  6E0C      2665          bgt.s     doprint_76
08001888  0C80 0000 2666          cmp.l     #88,D0
0800188C  0058      
0800188E  6710      2667          beq.s     doprint_73
08001890  6000 003A 2668          bra       doprint_77
                    2669   doprint_76:
08001894  0C80 0000 2670          cmp.l     #120,D0
08001898  0078      
0800189A  6704      2671          beq.s     doprint_73
0800189C  6000 002E 2672          bra       doprint_77
                    2673   doprint_73:
080018A0  2042      2674          move.l    D2,A0
080018A2  5282      2675          addq.l    #1,D2
080018A4  10BC 0030 2676          move.b    #48,(A0)
080018A8  5287      2677          addq.l    #1,D7
080018AA  206E 000C 2678          move.l    12(A6),A0
080018AE  1010      2679          move.b    (A0),D0
080018B0  0C00 0078 2680          cmp.b     #120,D0
080018B4  670C      2681          beq.s     doprint_79
080018B6  206E 000C 2682          move.l    12(A6),A0
080018BA  1010      2683          move.b    (A0),D0
080018BC  0C00 0058 2684          cmp.b     #88,D0
080018C0  660A      2685          bne.s     doprint_77
                    2686   doprint_79:
080018C2  2042      2687          move.l    D2,A0
080018C4  5282      2688          addq.l    #1,D2
080018C6  10BC 0078 2689          move.b    #120,(A0)
080018CA  5287      2690          addq.l    #1,D7
                    2691   doprint_77:
080018CC  2042      2692          move.l    D2,A0
080018CE  4210      2693          clr.b     (A0)
080018D0  206E 000C 2694          move.l    12(A6),A0
080018D4  1010      2695          move.b    (A0),D0
080018D6  4880      2696          ext.w     D0
080018D8  48C0      2697          ext.l     D0
080018DA  0C80 0000 2698          cmp.l     #105,D0
080018DE  0069      
080018E0  6700 0076 2699          beq       doprint_82
080018E4  6E42      2700          bgt.s     doprint_93
080018E6  0C80 0000 2701          cmp.l     #99,D0
080018EA  0063      
080018EC  6700 0084 2702          beq       doprint_96
080018F0  6E1C      2703          bgt.s     doprint_94
080018F2  0C80 0000 2704          cmp.l     #88,D0
080018F6  0058      
080018F8  6700 005E 2705          beq       doprint_82
080018FC  6E00 0184 2706          bgt       doprint_80
08001900  0C80 0000 2707          cmp.l     #69,D0
08001904  0045      
08001906  6700 0050 2708          beq       doprint_82
0800190A  6000 0176 2709          bra       doprint_80
                    2710   doprint_94:
0800190E  0C80 0000 2711          cmp.l     #101,D0
08001912  0065      
08001914  6700 0042 2712          beq       doprint_82
08001918  6E00 0168 2713          bgt       doprint_80
0800191C  0C80 0000 2714          cmp.l     #100,D0
08001920  0064      
08001922  6734      2715          beq.s     doprint_82
08001924  6000 015C 2716          bra       doprint_80
                    2717   doprint_93:
08001928  0C80 0000 2718          cmp.l     #117,D0
0800192C  0075      
0800192E  6728      2719          beq.s     doprint_82
08001930  6E1A      2720          bgt.s     doprint_95
08001932  0C80 0000 2721          cmp.l     #115,D0
08001936  0073      
08001938  6700 0038 2722          beq       doprint_96
0800193C  6E00 0144 2723          bgt       doprint_80
08001940  0C80 0000 2724          cmp.l     #111,D0
08001944  006F      
08001946  6710      2725          beq.s     doprint_82
08001948  6000 0138 2726          bra       doprint_80
                    2727   doprint_95:
0800194C  0C80 0000 2728          cmp.l     #120,D0
08001950  0078      
08001952  6704      2729          beq.s     doprint_82
08001954  6000 012C 2730          bra       doprint_80
                    2731   doprint_82:
08001958  4A2E FFD2 2732          tst.b     -46(A6)
0800195C  6714      2733          beq.s     doprint_96
0800195E  4A2E FFCD 2734          tst.b     -51(A6)
08001962  660E      2735          bne.s     doprint_96
08001964  200D      2736          move.l    A5,D0
08001966  9087      2737          sub.l     D7,D0
08001968  4884      2738          ext.w     D4
0800196A  48C4      2739          ext.l     D4
0800196C  9084      2740          sub.l     D4,D0
0800196E  2D40 FFFC 2741          move.l    D0,-4(A6)
                    2742   doprint_96:
08001972  202E FFFC 2743          move.l    -4(A6),D0
08001976  0C80 0000 2744          cmp.l     #0,D0
0800197A  0000      
0800197C  6C04      2745          bge.s     doprint_98
0800197E  42AE FFFC 2746          clr.l     -4(A6)
                    2747   doprint_98:
08001982  4A2E FFCD 2748          tst.b     -51(A6)
08001986  6600 0030 2749          bne       doprint_104
0800198A  1004      2750          move.b    D4,D0
0800198C  4880      2751          ext.w     D0
0800198E  48C0      2752          ext.l     D0
08001990  D0AE FFFC 2753          add.l     -4(A6),D0
08001994  D087      2754          add.l     D7,D0
08001996  1D40 FFD1 2755          move.b    D0,-47(A6)
                    2756   doprint_102:
0800199A  102E FFD1 2757          move.b    -47(A6),D0
0800199E  4880      2758          ext.w     D0
080019A0  48C0      2759          ext.l     D0
080019A2  220D      2760          move.l    A5,D1
080019A4  534D      2761          subq.w    #1,A5
080019A6  B081      2762          cmp.l     D1,D0
080019A8  6C0E      2763          bge.s     doprint_104
080019AA  4878 0020 2764          pea       32
080019AE  2F0A      2765          move.l    A2,-(A7)
080019B0  4E93      2766          jsr       (A3)
080019B2  504F      2767          addq.w    #8,A7
080019B4  5286      2768          addq.l    #1,D6
080019B6  60E2      2769          bra       doprint_102
                    2770   doprint_104:
080019B8  41EE FFD4 2771          lea       -44(A6),A0
080019BC  2408      2772          move.l    A0,D2
                    2773   doprint_105:
080019BE  2042      2774          move.l    D2,A0
080019C0  4A10      2775          tst.b     (A0)
080019C2  6716      2776          beq.s     doprint_107
080019C4  2042      2777          move.l    D2,A0
080019C6  5282      2778          addq.l    #1,D2
080019C8  1210      2779          move.b    (A0),D1
080019CA  4881      2780          ext.w     D1
080019CC  48C1      2781          ext.l     D1
080019CE  2F01      2782          move.l    D1,-(A7)
080019D0  2F0A      2783          move.l    A2,-(A7)
080019D2  4E93      2784          jsr       (A3)
080019D4  504F      2785          addq.w    #8,A7
080019D6  5286      2786          addq.l    #1,D6
080019D8  60E4      2787          bra       doprint_105
                    2788   doprint_107:
080019DA  202E FFFC 2789          move.l    -4(A6),D0
080019DE  1D40 FFD1 2790          move.b    D0,-47(A6)
                    2791   doprint_108:
080019E2  102E FFD1 2792          move.b    -47(A6),D0
080019E6  532E FFD1 2793          subq.b    #1,-47(A6)
080019EA  4A00      2794          tst.b     D0
080019EC  670E      2795          beq.s     doprint_110
080019EE  4878 0030 2796          pea       48
080019F2  2F0A      2797          move.l    A2,-(A7)
080019F4  4E93      2798          jsr       (A3)
080019F6  504F      2799          addq.w    #8,A7
080019F8  5286      2800          addq.l    #1,D6
080019FA  60E6      2801          bra       doprint_108
                    2802   doprint_110:
080019FC  2043      2803          move.l    D3,A0
080019FE  4A10      2804          tst.b     (A0)
08001A00  6700 0048 2805          beq       doprint_113
08001A04  206E 000C 2806          move.l    12(A6),A0
08001A08  1010      2807          move.b    (A0),D0
08001A0A  4880      2808          ext.w     D0
08001A0C  48C0      2809          ext.l     D0
08001A0E  0C80 0000 2810          cmp.l     #115,D0
08001A12  0073      
08001A14  670C      2811          beq.s     doprint_116
08001A16  6E18      2812          bgt.s     doprint_119
08001A18  0C80 0000 2813          cmp.l     #99,D0
08001A1C  0063      
08001A1E  6702      2814          beq.s     doprint_116
08001A20  600E      2815          bra.s     doprint_119
                    2816   doprint_116:
08001A22  2005      2817          move.l    D5,D0
08001A24  5385      2818          subq.l    #1,D5
08001A26  0C80 0000 2819          cmp.l     #0,D0
08001A2A  0000      
08001A2C  6E02      2820          bgt.s     doprint_119
08001A2E  6016      2821          bra.s     doprint_115
                    2822   doprint_119:
08001A30  2043      2823          move.l    D3,A0
08001A32  5283      2824          addq.l    #1,D3
08001A34  1210      2825          move.b    (A0),D1
08001A36  4881      2826          ext.w     D1
08001A38  48C1      2827          ext.l     D1
08001A3A  2F01      2828          move.l    D1,-(A7)
08001A3C  2F0A      2829          move.l    A2,-(A7)
08001A3E  4E93      2830          jsr       (A3)
08001A40  504F      2831          addq.w    #8,A7
08001A42  5286      2832          addq.l    #1,D6
08001A44  6002      2833          bra.s     doprint_112
                    2834   doprint_115:
08001A46  6002      2835          bra.s     doprint_113
                    2836   doprint_112:
08001A48  60B2      2837          bra       doprint_110
                    2838   doprint_113:
08001A4A  4A2E FFCD 2839          tst.b     -51(A6)
08001A4E  6700 0030 2840          beq       doprint_125
08001A52  1004      2841          move.b    D4,D0
08001A54  4880      2842          ext.w     D0
08001A56  48C0      2843          ext.l     D0
08001A58  D0AE FFFC 2844          add.l     -4(A6),D0
08001A5C  D087      2845          add.l     D7,D0
08001A5E  1D40 FFD1 2846          move.b    D0,-47(A6)
                    2847   doprint_123:
08001A62  102E FFD1 2848          move.b    -47(A6),D0
08001A66  4880      2849          ext.w     D0
08001A68  48C0      2850          ext.l     D0
08001A6A  220D      2851          move.l    A5,D1
08001A6C  534D      2852          subq.w    #1,A5
08001A6E  B081      2853          cmp.l     D1,D0
08001A70  6C0E      2854          bge.s     doprint_125
08001A72  4878 0020 2855          pea       32
08001A76  2F0A      2856          move.l    A2,-(A7)
08001A78  4E93      2857          jsr       (A3)
08001A7A  504F      2858          addq.w    #8,A7
08001A7C  5386      2859          subq.l    #1,D6
08001A7E  60E2      2860          bra       doprint_123
                    2861   doprint_125:
08001A80  6014      2862          bra.s     doprint_81
                    2863   doprint_80:
08001A82  206E 000C 2864          move.l    12(A6),A0
08001A86  1210      2865          move.b    (A0),D1
08001A88  4881      2866          ext.w     D1
08001A8A  48C1      2867          ext.l     D1
08001A8C  2F01      2868          move.l    D1,-(A7)
08001A8E  2F0A      2869          move.l    A2,-(A7)
08001A90  4E93      2870          jsr       (A3)
08001A92  504F      2871          addq.w    #8,A7
08001A94  5286      2872          addq.l    #1,D6
                    2873   doprint_81:
08001A96  52AE 000C 2874          addq.l    #1,12(A6)
                    2875   doprint_2:
08001A9A  6000 FA0A 2876          bra       doprint_1
                    2877   doprint_3:
08001A9E  4A92      2878          tst.l     (A2)
08001AA0  6710      2879          beq.s     doprint_126
08001AA2  4201      2880          clr.b     D1
08001AA4  C2BC 0000 2881          and.l     #255,D1
08001AA8  00FF      
08001AAA  2F01      2882          move.l    D1,-(A7)
08001AAC  2F0A      2883          move.l    A2,-(A7)
08001AAE  4E93      2884          jsr       (A3)
08001AB0  504F      2885          addq.w    #8,A7
                    2886   doprint_126:
08001AB2  2006      2887          move.l    D6,D0
08001AB4  4CDF 3CFC 2888          movem.l   (A7)+,D2/D3/D4/D5/D6/D7/A2/A3/A4/A5
08001AB8  4E5E      2889          unlk      A6
08001ABA  4E75      2890          rts
                    2891   _putch:
08001ABC  4E56 0000 2892          link      A6,#0
08001AC0  2F02      2893          move.l    D2,-(A7)
08001AC2  242E 0008 2894          move.l    8(A6),D2
08001AC6  0C82 0000 2895          cmp.l     #10,D2
08001ACA  000A      
08001ACC  660C      2896          bne.s     putch_1
08001ACE  4878 000D 2897          pea       13
08001AD2  4EB9 0800 2898          jsr       __putch
08001AD6  006A      
08001AD8  584F      2899          addq.w    #4,A7
                    2900   putch_1:
08001ADA  2F02      2901          move.l    D2,-(A7)
08001ADC  4EB9 0800 2902          jsr       __putch
08001AE0  006A      
08001AE2  584F      2903          addq.w    #4,A7
08001AE4  2002      2904          move.l    D2,D0
08001AE6  241F      2905          move.l    (A7)+,D2
08001AE8  4E5E      2906          unlk      A6
08001AEA  4E75      2907          rts
                    2908   _getch:
08001AEC  2F02      2909          move.l    D2,-(A7)
08001AEE  2439 0800 2910          move.l    __ungetbuf.L,D2
08001AF2  213C      
08001AF4  2039 0800 2911          move.l    __ungetbuf.L,D0
08001AF8  213C      
08001AFA  0C80 FFFF 2912          cmp.l     #-1,D0
08001AFE  FFFF      
08001B00  670C      2913          beq.s     getch_1
08001B02  23FC FFFF 2914          move.l    #-1,__ungetbuf.L
08001B06  FFFF 0800 
08001B0A  213C      
08001B0C  6012      2915          bra.s     getch_3
                    2916   getch_1:
08001B0E  4EB9 0800 2917          jsr       __getch
08001B12  003E      
08001B14  2400      2918          move.l    D0,D2
08001B16  0C80 0000 2919          cmp.l     #13,D0
08001B1A  000D      
08001B1C  6602      2920          bne.s     getch_3
08001B1E  740A      2921          moveq     #10,D2
                    2922   getch_3:
08001B20  2002      2923          move.l    D2,D0
08001B22  241F      2924          move.l    (A7)+,D2
08001B24  4E75      2925          rts
                    2926   @itoa_convert:
08001B26  4E56 0000 2927          link      A6,#0
08001B2A  48E7 3C00 2928          movem.l   D2/D3/D4/D5,-(A7)
08001B2E  242E 0008 2929          move.l    8(A6),D2
08001B32  262E 0010 2930          move.l    16(A6),D3
08001B36  2A2E 000C 2931          move.l    12(A6),D5
08001B3A  2F05      2932          move.l    D5,-(A7)
08001B3C  2F03      2933          move.l    D3,-(A7)
08001B3E  4EB9 0800 2934          jsr       ULDIV
08001B42  085A      
08001B44  202F 0004 2935          move.l    4(A7),D0
08001B48  504F      2936          addq.w    #8,A7
08001B4A  2800      2937          move.l    D0,D4
08001B4C  BA83      2938          cmp.l     D3,D5
08001B4E  6520      2939          blo.s     @itoa_convert_1
08001B50  2F03      2940          move.l    D3,-(A7)
08001B52  2F05      2941          move.l    D5,-(A7)
08001B54  2F03      2942          move.l    D3,-(A7)
08001B56  4EB9 0800 2943          jsr       ULDIV
08001B5A  085A      
08001B5C  2217      2944          move.l    (A7),D1
08001B5E  504F      2945          addq.w    #8,A7
08001B60  2F01      2946          move.l    D1,-(A7)
08001B62  2F02      2947          move.l    D2,-(A7)
08001B64  4EB9 0800 2948          jsr       @itoa_convert
08001B68  1B26      
08001B6A  DEFC 000C 2949          add.w     #12,A7
08001B6E  2400      2950          move.l    D0,D2
                    2951   @itoa_convert_1:
08001B70  0C84 0000 2952          cmp.l     #9,D4
08001B74  0009      
08001B76  6E0E      2953          bgt.s     @itoa_convert_3
08001B78  2004      2954          move.l    D4,D0
08001B7A  7230      2955          moveq     #48,D1
08001B7C  C2BC 0000 2956          and.l     #255,D1
08001B80  00FF      
08001B82  D081      2957          add.l     D1,D0
08001B84  6012      2958          bra.s     @itoa_convert_4
                    2959   @itoa_convert_3:
08001B86  2004      2960          move.l    D4,D0
08001B88  7261      2961          moveq     #97,D1
08001B8A  C2BC 0000 2962          and.l     #255,D1
08001B8E  00FF      
08001B90  D081      2963          add.l     D1,D0
08001B92  0480 0000 2964          sub.l     #10,D0
08001B96  000A      
                    2965   @itoa_convert_4:
08001B98  2042      2966          move.l    D2,A0
08001B9A  1080      2967          move.b    D0,(A0)
08001B9C  2002      2968          move.l    D2,D0
08001B9E  5280      2969          addq.l    #1,D0
08001BA0  4CDF 003C 2970          movem.l   (A7)+,D2/D3/D4/D5
08001BA4  4E5E      2971          unlk      A6
08001BA6  4E75      2972          rts
                    2973   _ltoa:
08001BA8  4E56 0000 2974          link      A6,#0
08001BAC  48E7 3C00 2975          movem.l   D2/D3/D4/D5,-(A7)
08001BB0  242E 0008 2976          move.l    8(A6),D2
08001BB4  262E 000C 2977          move.l    12(A6),D3
08001BB8  2A2E 0010 2978          move.l    16(A6),D5
08001BBC  2803      2979          move.l    D3,D4
08001BBE  0C85 0000 2980          cmp.l     #2,D5
08001BC2  0002      
08001BC4  6D08      2981          blt.s     ltoa_3
08001BC6  0C85 0000 2982          cmp.l     #36,D5
08001BCA  0024      
08001BCC  6F06      2983          ble.s     ltoa_1
                    2984   ltoa_3:
08001BCE  2003      2985          move.l    D3,D0
08001BD0  6000 0056 2986          bra       ltoa_4
                    2987   ltoa_1:
08001BD4  0C85 0000 2988          cmp.l     #10,D5
08001BD8  000A      
08001BDA  6600 0034 2989          bne       ltoa_5
08001BDE  0C82 0000 2990          cmp.l     #0,D2
08001BE2  0000      
08001BE4  6C2A      2991          bge.s     ltoa_5
08001BE6  2002      2992          move.l    D2,D0
08001BE8  4480      2993          neg.l     D0
08001BEA  2400      2994          move.l    D0,D2
08001BEC  0C82 0000 2995          cmp.l     #0,D2
08001BF0  0000      
08001BF2  6C14      2996          bge.s     ltoa_7
08001BF4  4879 0800 2997          pea       @itoa_1.L
08001BF8  2130      
08001BFA  2F03      2998          move.l    D3,-(A7)
08001BFC  4EB9 0800 2999          jsr       _strcpy
08001C00  1CA8      
08001C02  504F      3000          addq.w    #8,A7
08001C04  2003      3001          move.l    D3,D0
08001C06  6020      3002          bra.s     ltoa_4
                    3003   ltoa_7:
08001C08  2044      3004          move.l    D4,A0
08001C0A  5284      3005          addq.l    #1,D4
08001C0C  10BC 002D 3006          move.b    #45,(A0)
                    3007   ltoa_5:
08001C10  2F05      3008          move.l    D5,-(A7)
08001C12  2F02      3009          move.l    D2,-(A7)
08001C14  2F04      3010          move.l    D4,-(A7)
08001C16  4EB9 0800 3011          jsr       @itoa_convert
08001C1A  1B26      
08001C1C  DEFC 000C 3012          add.w     #12,A7
08001C20  2800      3013          move.l    D0,D4
08001C22  2044      3014          move.l    D4,A0
08001C24  4210      3015          clr.b     (A0)
08001C26  2003      3016          move.l    D3,D0
                    3017   ltoa_4:
08001C28  4CDF 003C 3018          movem.l   (A7)+,D2/D3/D4/D5
08001C2C  4E5E      3019          unlk      A6
08001C2E  4E75      3020          rts
                    3021   _ultoa:
08001C30  4E56 0000 3022          link      A6,#0
08001C34  48E7 3800 3023          movem.l   D2/D3/D4,-(A7)
08001C38  262E 0010 3024          move.l    16(A6),D3
08001C3C  282E 000C 3025          move.l    12(A6),D4
08001C40  2404      3026          move.l    D4,D2
08001C42  0C83 0000 3027          cmp.l     #2,D3
08001C46  0002      
08001C48  6D08      3028          blt.s     ultoa_3
08001C4A  0C83 0000 3029          cmp.l     #36,D3
08001C4E  0024      
08001C50  6F04      3030          ble.s     ultoa_1
                    3031   ultoa_3:
08001C52  2004      3032          move.l    D4,D0
08001C54  601A      3033          bra.s     ultoa_4
                    3034   ultoa_1:
08001C56  2F03      3035          move.l    D3,-(A7)
08001C58  2F2E 0008 3036          move.l    8(A6),-(A7)
08001C5C  2F02      3037          move.l    D2,-(A7)
08001C5E  4EB9 0800 3038          jsr       @itoa_convert
08001C62  1B26      
08001C64  DEFC 000C 3039          add.w     #12,A7
08001C68  2400      3040          move.l    D0,D2
08001C6A  2042      3041          move.l    D2,A0
08001C6C  4210      3042          clr.b     (A0)
08001C6E  2004      3043          move.l    D4,D0
                    3044   ultoa_4:
08001C70  4CDF 001C 3045          movem.l   (A7)+,D2/D3/D4
08001C74  4E5E      3046          unlk      A6
08001C76  4E75      3047          rts
                    3048   _itoa:
08001C78  4E56 0000 3049          link      A6,#0
08001C7C  2F2E 0010 3050          move.l    16(A6),-(A7)
08001C80  2F2E 000C 3051          move.l    12(A6),-(A7)
08001C84  2F2E 0008 3052          move.l    8(A6),-(A7)
08001C88  4EB9 0800 3053          jsr       _ltoa
08001C8C  1BA8      
08001C8E  DEFC 000C 3054          add.w     #12,A7
08001C92  4E5E      3055          unlk      A6
08001C94  4E75      3056          rts
                    3057   _strlen:
08001C96  206F 0004 3058          move.l    (4,A7),A0
08001C9A  2248      3059          move.l    A0,A1
                    3060   strlen_1:
08001C9C  4A19      3061          tst.b     (A1)+
08001C9E  66FC      3062          bne       strlen_1
08001CA0  2009      3063          move.l    A1,D0
08001CA2  9088      3064          sub.l     A0,D0
08001CA4  5380      3065          subq.l    #1,D0
08001CA6  4E75      3066          rts
                    3067   _strcpy:
08001CA8  206F 0004 3068          move.l    (4,A7),A0
08001CAC  226F 0008 3069          move.l    (8,A7),A1
08001CB0  2008      3070          move.l    A0,D0
                    3071   strcpy_1:
08001CB2  10D9      3072          move.b    (A1)+,(A0)+
08001CB4  66FC      3073          bne.s     strcpy_1
08001CB6  4E75      3074          rts
                    3075          section   const
08001CB8            3076                   align
                    3077   
                    3078   
                    3079   @m68kus~1_1:
08001CB8  5365 7175 3080          dc.b      83,101,113,117,101,110,116,105,97,108,66,108
08001CBC  656E 7469 
08001CC0  616C 426C 
08001CC4  6F63 6B57 3081          dc.b      111,99,107,87,114,105,116,101,58,32,83,105,122
08001CC8  7269 7465 
08001CCC  3A20 5369 
08001CD0  7A        
08001CD1  6520 6F66 3082          dc.b      101,32,111,102,32,73,110,112,117,116,32,68,97
08001CD5  2049 6E70 
08001CD9  7574 2044 
08001CDD  61        
08001CDE  7461 2042 3083          dc.b      116,97,32,66,108,111,99,107,32,99,97,110,110
08001CE2  6C6F 636B 
08001CE6  2063 616E 
08001CEA  6E        
08001CEB  6F74 2065 3084          dc.b      111,116,32,101,120,99,101,101,100,32,49,50,56
08001CEF  7863 6565 
08001CF3  6420 3132 
08001CF7  38        
08001CF8  6B42 7974 3085          dc.b      107,66,121,116,101,115,13,10,0
08001CFC  6573 0D0A 
08001D00  00        
                    3086   @m68kus~1_2:
08001D02  5365 7175 3087          dc.b      83,101,113,117,101,110,116,105,97,108,66,108
08001D06  656E 7469 
08001D0A  616C 426C 
08001D0E  6F63 6B57 3088          dc.b      111,99,107,87,114,105,116,101,58,32,69,110,116
08001D12  7269 7465 
08001D16  3A20 456E 
08001D1A  74        
08001D1B  6572 6564 3089          dc.b      101,114,101,100,32,65,100,100,114,101,115,115
08001D1F  2041 6464 
08001D23  7265 7373 
08001D27  204F 7574 3090          dc.b      32,79,117,116,32,111,102,32,82,97,110,103,101
08001D2B  206F 6620 
08001D2F  5261 6E67 
08001D33  65        
08001D34  0D0A 00   3091          dc.b      13,10,0
                    3092   @m68kus~1_3:
08001D38  5065 7266 3093          dc.b      80,101,114,102,111,114,109,105,110,103,32,83
08001D3C  6F72 6D69 
08001D40  6E67 2053 
08001D44  6571 7565 3094          dc.b      101,113,117,101,110,116,105,97,108,32,66,108
08001D48  6E74 6961 
08001D4C  6C20 426C 
08001D50  6F63 6B20 3095          dc.b      111,99,107,32,87,114,105,116,101,32,116,111
08001D54  5772 6974 
08001D58  6520 746F 
08001D5C  2045 4550 3096          dc.b      32,69,69,80,82,79,77,13,10,0
08001D60  524F 4D0D 
08001D64  0A00      
                    3097   @m68kus~1_4:
08001D66  5365 7175 3098          dc.b      83,101,113,117,101,110,116,105,97,108,32,66
08001D6A  656E 7469 
08001D6E  616C 2042 
08001D72  6C6F 636B 3099          dc.b      108,111,99,107,32,87,114,105,116,101,32,67,111
08001D76  2057 7269 
08001D7A  7465 2043 
08001D7E  6F        
08001D7F  6D70 6C65 3100          dc.b      109,112,108,101,116,101,100,33,13,10,13,10,0
08001D83  7465 6421 
08001D87  0D0A 0D0A 
08001D8B  00        
                    3101   @m68kus~1_5:
08001D8C  5574 696C 3102          dc.b      85,116,105,108,83,101,113,117,101,110,116,105
08001D90  5365 7175 
08001D94  656E 7469 
08001D98  616C 426C 3103          dc.b      97,108,66,108,111,99,107,87,114,105,116,101
08001D9C  6F63 6B57 
08001DA0  7269 7465 
08001DA4  3A20 4E6F 3104          dc.b      58,32,78,111,32,65,67,75,32,114,101,116,117
08001DA8  2041 434B 
08001DAC  2072 6574 
08001DB0  75        
08001DB1  726E 6564 3105          dc.b      114,110,101,100,32,102,111,114,32,98,121,116
08001DB5  2066 6F72 
08001DB9  2062 7974 
08001DBD  6520 6174 3106          dc.b      101,32,97,116,32,48,120,37,88,13,10,0
08001DC1  2030 7825 
08001DC5  580D 0A00 
                    3107   @m68kus~1_6:
08001DCA  5772 6974 3108          dc.b      87,114,105,116,105,110,103,32,80,97,103,101
08001DCE  696E 6720 
08001DD2  5061 6765 
08001DD6  2074 6F20 3109          dc.b      32,116,111,32,69,69,80,82,79,77,13,10,0
08001DDA  4545 5052 
08001DDE  4F4D 0D0A 
08001DE2  00        
                    3110   @m68kus~1_7:
08001DE4  4E6F 2041 3111          dc.b      78,111,32,65,67,75,32,114,101,116,117,114,110
08001DE8  434B 2072 
08001DEC  6574 7572 
08001DF0  6E        
08001DF1  6564 2066 3112          dc.b      101,100,32,102,111,114,32,98,121,116,101,32
08001DF5  6F72 2062 
08001DF9  7974 6520 
08001DFD  2325 640D 3113          dc.b      35,37,100,13,10,0
08001E01  0A00      
                    3114   @m68kus~1_8:
08001E04  5772 6974 3115          dc.b      87,114,105,116,105,110,103,32,66,121,116,101
08001E08  696E 6720 
08001E0C  4279 7465 
08001E10  2074 6F20 3116          dc.b      32,116,111,32,69,69,80,82,79,77,13,10,0
08001E14  4545 5052 
08001E18  4F4D 0D0A 
08001E1C  00        
                    3117   @m68kus~1_9:
08001E1E  4E6F 2041 3118          dc.b      78,111,32,65,67,75,32,114,101,116,117,114,110
08001E22  434B 2072 
08001E26  6574 7572 
08001E2A  6E        
08001E2B  6564 0D0A 3119          dc.b      101,100,13,10,0
08001E2F  00        
                    3120   @m68kus~1_10:
08001E30  5761 6974 3121          dc.b      87,97,105,116,105,110,103,32,102,111,114,32
08001E34  696E 6720 
08001E38  666F 7220 
08001E3C  496E 7465 3122          dc.b      73,110,116,101,114,110,97,108,32,87,114,105
08001E40  726E 616C 
08001E44  2057 7269 
08001E48  7465 210D 3123          dc.b      116,101,33,13,10,0
08001E4C  0A00      
                    3124   @m68kus~1_11:
08001E4E  496E 7465 3125          dc.b      73,110,116,101,114,110,97,108,32,87,114,105
08001E52  726E 616C 
08001E56  2057 7269 
08001E5A  7465 2043 3126          dc.b      116,101,32,67,111,109,112,108,101,116,101,33
08001E5E  6F6D 706C 
08001E62  6574 6521 
08001E66  0D0A 00   3127          dc.b      13,10,0
                    3128   @m68kus~1_12:
08001E6A  5365 7175 3129          dc.b      83,101,113,117,101,110,116,105,97,108,66,108
08001E6E  656E 7469 
08001E72  616C 426C 
08001E76  6F63 6B52 3130          dc.b      111,99,107,82,101,97,100,58,32,83,105,122,101
08001E7A  6561 643A 
08001E7E  2053 697A 
08001E82  65        
08001E83  206F 6620 3131          dc.b      32,111,102,32,73,110,112,117,116,32,68,97,116
08001E87  496E 7075 
08001E8B  7420 4461 
08001E8F  74        
08001E90  6120 426C 3132          dc.b      97,32,66,108,111,99,107,32,99,97,110,110,111
08001E94  6F63 6B20 
08001E98  6361 6E6E 
08001E9C  6F        
08001E9D  7420 6578 3133          dc.b      116,32,101,120,99,101,101,100,32,49,50,56,107
08001EA1  6365 6564 
08001EA5  2031 3238 
08001EA9  6B        
08001EAA  4279 7465 3134          dc.b      66,121,116,101,115,13,10,0
08001EAE  730D 0A00 
                    3135   @m68kus~1_13:
08001EB2  5365 7175 3136          dc.b      83,101,113,117,101,110,116,105,97,108,66,108
08001EB6  656E 7469 
08001EBA  616C 426C 
08001EBE  6F63 6B52 3137          dc.b      111,99,107,82,101,97,100,58,32,69,110,116,101
08001EC2  6561 643A 
08001EC6  2045 6E74 
08001ECA  65        
08001ECB  7265 6420 3138          dc.b      114,101,100,32,65,100,100,114,101,115,115,32
08001ECF  4164 6472 
08001ED3  6573 7320 
08001ED7  4F75 7420 3139          dc.b      79,117,116,32,111,102,32,82,97,110,103,101,13
08001EDB  6F66 2052 
08001EDF  616E 6765 
08001EE3  0D        
08001EE4  0A00      3140          dc.b      10,0
                    3141   @m68kus~1_14:
08001EE6  5374 6172 3142          dc.b      83,116,97,114,116,105,110,103,32,83,101,113
08001EEA  7469 6E67 
08001EEE  2053 6571 
08001EF2  7565 6E74 3143          dc.b      117,101,110,116,105,97,108,32,66,108,111,99
08001EF6  6961 6C20 
08001EFA  426C 6F63 
08001EFE  6B20 5265 3144          dc.b      107,32,82,101,97,100,46,46,46,13,10,0
08001F02  6164 2E2E 
08001F06  2E0D 0A00 
                    3145   @m68kus~1_15:
08001F0A  5365 7175 3146          dc.b      83,101,113,117,101,110,116,105,97,108,32,66
08001F0E  656E 7469 
08001F12  616C 2042 
08001F16  6C6F 636B 3147          dc.b      108,111,99,107,32,82,101,97,100,32,70,97,105
08001F1A  2052 6561 
08001F1E  6420 4661 
08001F22  69        
08001F23  6C65 6421 3148          dc.b      108,101,100,33,13,10,0
08001F27  0D0A 00   
                    3149   @m68kus~1_16:
08001F2A  5365 7175 3150          dc.b      83,101,113,117,101,110,116,105,97,108,32,66
08001F2E  656E 7469 
08001F32  616C 2042 
08001F36  6C6F 636B 3151          dc.b      108,111,99,107,32,82,101,97,100,32,115,117,99
08001F3A  2052 6561 
08001F3E  6420 7375 
08001F42  63        
08001F43  6365 7373 3152          dc.b      99,101,115,115,102,117,108,33,13,10,0
08001F47  6675 6C21 
08001F4B  0D0A 00   
                    3153   @m68kus~1_17:
08001F4E  4E6F 2041 3154          dc.b      78,111,32,65,67,75,32,114,101,116,117,114,110
08001F52  434B 2072 
08001F56  6574 7572 
08001F5A  6E        
08001F5B  6564 2066 3155          dc.b      101,100,32,102,111,114,32,114,101,97,100,32
08001F5F  6F72 2072 
08001F63  6561 6420 
08001F67  6174 2061 3156          dc.b      97,116,32,97,100,100,114,101,115,115,58,32,48
08001F6B  6464 7265 
08001F6F  7373 3A20 
08001F73  30        
08001F74  7825 580D 3157          dc.b      120,37,88,13,10,0
08001F78  0A00      
                    3158   @m68kus~1_18:
08001F7A  5365 7175 3159          dc.b      83,101,113,117,101,110,116,105,97,108,32,82
08001F7E  656E 7469 
08001F82  616C 2052 
08001F86  6561 6420 3160          dc.b      101,97,100,32,69,114,114,111,114,32,97,116,32
08001F8A  4572 726F 
08001F8E  7220 6174 
08001F92  20        
08001F93  6164 6472 3161          dc.b      97,100,100,114,101,115,115,58,32,48,120,37,88
08001F97  6573 733A 
08001F9B  2030 7825 
08001F9F  58        
08001FA0  0D0A 00   3162          dc.b      13,10,0
                    3163   @m68kus~1_19:
08001FA4  5265 6164 3164          dc.b      82,101,97,100,105,110,103,32,80,97,103,101,32
08001FA8  696E 6720 
08001FAC  5061 6765 
08001FB0  20        
08001FB1  6672 6F6D 3165          dc.b      102,114,111,109,32,69,69,80,82,79,77,32,13,10
08001FB5  2045 4550 
08001FB9  524F 4D20 
08001FBD  0D0A      
08001FBF  00        3166          dc.b      0
                    3167   @m68kus~1_20:
08001FC0  5061 6765 3168          dc.b      80,97,103,101,32,82,101,97,100,32,70,97,105
08001FC4  2052 6561 
08001FC8  6420 4661 
08001FCC  69        
08001FCD  6C65 6420 3169          dc.b      108,101,100,32,97,116,32,66,121,116,101,32,35
08001FD1  6174 2042 
08001FD5  7974 6520 
08001FD9  23        
08001FDA  2564 0D0A 3170          dc.b      37,100,13,10,0
08001FDE  00        
                    3171   @m68kus~1_21:
08001FE0  5061 6765 3172          dc.b      80,97,103,101,32,82,101,97,100,32,83,117,99
08001FE4  2052 6561 
08001FE8  6420 5375 
08001FEC  63        
08001FED  6365 7373 3173          dc.b      99,101,115,115,102,117,108,13,10,0
08001FF1  6675 6C0D 
08001FF5  0A00      
                    3174   @m68kus~1_22:
08001FF8  5265 6164 3175          dc.b      82,101,97,100,105,110,103,32,66,121,116,101
08001FFC  696E 6720 
08002000  4279 7465 
08002004  2066 726F 3176          dc.b      32,102,114,111,109,32,69,69,80,82,79,77,32,13
08002008  6D20 4545 
0800200C  5052 4F4D 
08002010  200D      
08002012  0A00      3177          dc.b      10,0
                    3178   @m68kus~1_23:
08002014  0D0A 4865 3179          dc.b      13,10,72,101,108,108,111,32,73,73,67,32,76,97
08002018  6C6C 6F20 
0800201C  4949 4320 
08002020  4C61      
08002022  620D 0A0D 3180          dc.b      98,13,10,13,10,0
08002026  0A00      
                    3181   @m68kus~1_24:
08002028  0D0A 00   3182          dc.b      13,10,0
                    3183   @doscan_1:
0800202C  0A00      3184          dc.b      10,0
                    3185   __ctype:
0800202E  0040 4040 3186          dc.b      0,64,64,64,64,64,64,64,64,64,80,80,80,80,80
08002032  4040 4040 
08002036  4040 5050 
0800203A  5050 50   
0800203D  4040 4040 3187          dc.b      64,64,64,64,64,64,64,64,64,64,64,64,64,64,64
08002041  4040 4040 
08002045  4040 4040 
08002049  4040 40   
0800204C  4040 40D0 3188          dc.b      64,64,64,208,160,160,160,160,160,160,160,160
08002050  A0A0 A0A0 
08002054  A0A0 A0A0 
08002058  A0A0 A0A0 3189          dc.b      160,160,160,160,160,160,160,140,140,140,140
0800205C  A0A0 A08C 
08002060  8C8C 8C   
08002063  8C8C 8C8C 3190          dc.b      140,140,140,140,140,140,160,160,160,160,160
08002067  8C8C A0A0 
0800206B  A0A0 A0   
0800206E  A0A0 8A8A 3191          dc.b      160,160,138,138,138,138,138,138,130,130,130
08002072  8A8A 8A8A 
08002076  8282 82   
08002079  8282 8282 3192          dc.b      130,130,130,130,130,130,130,130,130,130,130
0800207D  8282 8282 
08002081  8282 82   
08002084  8282 8282 3193          dc.b      130,130,130,130,130,130,160,160,160,160,160
08002088  8282 A0A0 
0800208C  A0A0 A0   
0800208F  A089 8989 3194          dc.b      160,137,137,137,137,137,137,129,129,129,129
08002093  8989 8981 
08002097  8181 81   
0800209A  8181 8181 3195          dc.b      129,129,129,129,129,129,129,129,129,129,129
0800209E  8181 8181 
080020A2  8181 81   
080020A5  8181 8181 3196          dc.b      129,129,129,129,129,160,160,160,160,64,0,0,0
080020A9  81A0 A0A0 
080020AD  A040 0000 
080020B1  00        
080020B2  0000 0000 3197          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
080020B6  0000 0000 
080020BA  0000 0000 
080020BE  0000 0000 
080020C2  0000 0000 
080020C6  0000      
080020C8  0000 0000 3198          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
080020CC  0000 0000 
080020D0  0000 0000 
080020D4  0000 0000 
080020D8  0000 0000 
080020DC  0000      
080020DE  0000 0000 3199          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
080020E2  0000 0000 
080020E6  0000 0000 
080020EA  0000 0000 
080020EE  0000 0000 
080020F2  0000      
080020F4  0000 0000 3200          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
080020F8  0000 0000 
080020FC  0000 0000 
08002100  0000 0000 
08002104  0000 0000 
08002108  0000      
0800210A  0000 0000 3201          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0800210E  0000 0000 
08002112  0000 0000 
08002116  0000 0000 
0800211A  0000 0000 
0800211E  0000      
08002120  0000 0000 3202          dc.b      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
08002124  0000 0000 
08002128  0000 0000 
0800212C  0000 00   
                    3203   @itoa_1:
08002130  2D32 3134 3204          dc.b      45,50,49,52,55,52,56,51,54,52,56,0
08002134  3734 3833 
08002138  3634 3800 
                    3205          section   data
0800213C            3206                   align
                    3207   
                    3208   *********************************************************************************************************************************************************
                    3209   * Section for Initialised Data (in theory should be copied to Ram at startup) but is part of program code as we copy whole program to ram at startup
                    3210   ********************************************************************************************************************************************************
                    3211   
          0800 213C 3212   DataStart       equ       *
0800213C            3213   __ungetbuf:     ds.l      1                    ungetbuffer for stdio functions
08002140            3214   __allocp:       ds.l      1                    start of free memory block list
08002144            3215   __heap:         ds.l      1                    begin of free memory
                    3216   
                    3217   
                    3218   @doscan_lpbuf:
08002148  0800 214C 3219          dc.l      @doscan_buf
                    3220          section   bss
0800214C            3221                   align
                    3222   
          0800 214C 3223   DataEnd         equ       *                    this label will equate to the address of the last byte of global variable in it
          0000 0010 3224   DataLength      equ       DataEnd-DataStart    length of data needed to copy to Ram on bootup
                    3225   
                    3226   *********************************************************************************************************
                    3227   * Section for uninitialised Data which is set to zero, i.e. we should set this space to zero at starup
                    3228   *********************************************************************************************************
          0800 214C 3229   BssStart       equ       *
                    3230   
                    3231   @doscan_buf:
0800214C            3232          ds.b      80
                    3233          section   heap
0800219C            3234                  align
                    3235   
          0800 219C 3236   BssEnd         equ       *
          0000 0050 3237   BssLength      equ       BssEnd-BssStart       length of zeroed data needed to copy to Ram on bootup
                    3238   
                    3239   *********************************************************************************************************
                    3240   * Section for Heap
                    3241   *********************************************************************************************************
                    3242   
          0800 219C 3243   heap           equ       *
0800219C            3244                  align
          0800 0000

Assembly errors: 0
